<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/robot_simulation_with_urdf_sdf/chapter_19/1901/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>실제 로봇 모델링에서의 xacro 사용 예시 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "1. \ub85c\ubd07 \ubaa8\ub378\ub9c1\uc758 \ubcf5\uc7a1\uc131 \ubb38\uc81c \ud574\uacb0", url: "#_top", children: [
              {title: "1.1 \ub9e4\ud06c\ub85c\ub97c \uc0ac\uc6a9\ud55c \uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07 \ubaa8\ub378\ub9c1", url: "#11" },
              {title: "1.2 \ub9e4\ud06c\ub85c\ub97c \uc0ac\uc6a9\ud55c \ub9e4\uac1c\ubcc0\uc218\ud654\ub41c \ubaa8\ub378", url: "#12" },
          ]},
          {title: "2. \uc218\uc2dd \uc801\uc6a9 \uc608\uc2dc", url: "#2", children: [
          ]},
          {title: "3. \uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \ub3d9\uc5ed\ud559 \ubaa8\ub378\ub9c1", url: "#3", children: [
              {title: "3.1 \ub9c1\ud06c\uc758 \uc9c8\ub7c9\uacfc \uad00\uc131 \uc815\uc758", url: "#31" },
              {title: "3.2 \uc870\uc778\ud2b8\uc758 \ud68c\uc804 \uc6b4\ub3d9", url: "#32" },
              {title: "3.3 \ub9e4\uac1c\ubcc0\uc218\ud654\ub41c \uc870\uc778\ud2b8 \uc81c\uc5b4", url: "#33" },
          ]},
          {title: "4. \uc2e4\uc81c \ub85c\ubd07\uc5d0\uc11c\uc758 xacro \ud65c\uc6a9 \uc608\uc2dc", url: "#4-xacro", children: [
              {title: "4.1 \ubaa8\ub4c8\ud654\ub41c \ub85c\ubd07 \ubaa8\ub378", url: "#41" },
              {title: "4.2 \ud30c\ub77c\ubbf8\ud130\ud654\ub41c \ub85c\ubd07 \uc124\uacc4", url: "#42" },
              {title: "4.3 \ub85c\ubd07\uc758 \uc13c\uc11c \ud1b5\ud569", url: "#43" },
          ]},
          {title: "4.4 xacro\ub97c \ud65c\uc6a9\ud55c \ub2e4\uc911 \ub85c\ubd07 \ubaa8\ub378 \uad00\ub9ac", url: "#44-xacro", children: [
              {title: "4.4.1 \ub85c\ubd07 \ubca0\uc774\uc2a4 \ubaa8\ub378 \uc815\uc758", url: "#441" },
              {title: "4.4.2 \ubca0\uc774\uc2a4 \ubaa8\ub378\uc758 \ud655\uc7a5", url: "#442" },
              {title: "4.4.3 \uc5ec\ub7ec \ub85c\ubd07 \ubaa8\ub378\uc758 \ud1b5\ud569", url: "#443" },
              {title: "4.5 \ud504\ub85c\uc81d\ud2b8\uc758 \ud655\uc7a5\uc131 \ubc0f \uc720\uc9c0\ubcf4\uc218", url: "#45" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../1902/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../1902/" class="btn btn-xs btn-link">
        멀티 조인트 로봇에서의 xacro 최적화
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_18/1803/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_18/1803/" class="btn btn-xs btn-link">
        파라미터를 통한 로봇 모델링의 유연성
      </a>
    </div>
    
  </div>

    

    <h3 id="1">1. 로봇 모델링의 복잡성 문제 해결</h3>
<p>로봇을 URDF로 모델링할 때, 특히 멀티 조인트 로봇이나 복잡한 구조를 가진 로봇을 정의할 경우 각 링크와 조인트를 하나씩 명시적으로 작성하는 것은 매우 번거롭고 실수가 발생할 가능성이 높다. xacro는 이러한 문제를 해결하기 위해 매크로와 변수를 사용하여 반복적이고 중복된 코드를 간소화하는 역할을 한다.</p>
<h4 id="11">1.1 매크로를 사용한 멀티 조인트 로봇 모델링</h4>
<p>xacro를 사용하면 반복되는 링크와 조인트 구조를 매크로로 정의하고 재사용할 수 있다. 예를 들어, 멀티 조인트 로봇 팔에서 각 조인트의 구조가 동일하다면, xacro 매크로를 통해 이를 정의하고 필요할 때마다 호출하는 방식으로 작성할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:macro name=&quot;joint_link_pair&quot; params=&quot;name parent child&quot;&gt;
  &lt;joint name=&quot;${name}_joint&quot; type=&quot;revolute&quot;&gt;
    &lt;parent link=&quot;${parent}&quot;/&gt;
    &lt;child link=&quot;${child}&quot;/&gt;
    &lt;axis xyz=&quot;0 0 1&quot;/&gt;
    &lt;limit effort=&quot;1000&quot; velocity=&quot;1&quot;/&gt;
  &lt;/joint&gt;

  &lt;link name=&quot;${child}&quot;&gt;
    &lt;inertial&gt;
      &lt;mass value=&quot;1.0&quot;/&gt;
      &lt;origin xyz=&quot;0 0 0&quot;/&gt;
      &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.01&quot; iyz=&quot;0&quot; izz=&quot;0.01&quot;/&gt;
    &lt;/inertial&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.1 0.1 1.0&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
    &lt;collision&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.1 0.1 1.0&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;
  &lt;/link&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>위의 매크로는 각 조인트와 링크 쌍을 정의하는 구조를 포함하고 있다. 이를 필요할 때마다 호출하여 멀티 조인트 구조를 간단하게 정의할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:joint_link_pair name=&quot;shoulder&quot; parent=&quot;base_link&quot; child=&quot;link1&quot;/&gt;
&lt;xacro:joint_link_pair name=&quot;elbow&quot; parent=&quot;link1&quot; child=&quot;link2&quot;/&gt;
&lt;xacro:joint_link_pair name=&quot;wrist&quot; parent=&quot;link2&quot; child=&quot;link3&quot;/&gt;
</code></pre>
<h4 id="12">1.2 매크로를 사용한 매개변수화된 모델</h4>
<p>로봇 모델을 매개변수화하여 다양한 설정에 맞출 수 있는 유연성을 제공한다. 예를 들어, 링크의 길이나 질량을 매크로의 인자로 설정할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:macro name=&quot;variable_link&quot; params=&quot;name parent length mass&quot;&gt;
  &lt;link name=&quot;${name}&quot;&gt;
    &lt;inertial&gt;
      &lt;mass value=&quot;${mass}&quot;/&gt;
      &lt;origin xyz=&quot;0 0 0&quot;/&gt;
      &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.01&quot; iyz=&quot;0&quot; izz=&quot;0.01&quot;/&gt;
    &lt;/inertial&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.1 0.1 ${length}&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
    &lt;collision&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.1 0.1 ${length}&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;${name}_joint&quot; type=&quot;revolute&quot;&gt;
    &lt;parent link=&quot;${parent}&quot;/&gt;
    &lt;child link=&quot;${name}&quot;/&gt;
    &lt;axis xyz=&quot;0 0 1&quot;/&gt;
    &lt;limit effort=&quot;1000&quot; velocity=&quot;1&quot;/&gt;
  &lt;/joint&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>위의 매크로는 링크의 길이와 질량을 변수로 설정할 수 있으며, 각 링크의 길이를 변경하는 유연한 구조를 만들 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:variable_link name=&quot;link1&quot; parent=&quot;base_link&quot; length=&quot;1.0&quot; mass=&quot;2.0&quot;/&gt;
&lt;xacro:variable_link name=&quot;link2&quot; parent=&quot;link1&quot; length=&quot;0.8&quot; mass=&quot;1.5&quot;/&gt;
</code></pre>
<p>이를 통해 로봇 모델의 링크 길이와 질량을 손쉽게 조정할 수 있다.</p>
<h3 id="2">2. 수식 적용 예시</h3>
<p>멀티 조인트 로봇의 링크와 조인트 간의 관계는 역학적으로 중요한 역할을 하며, 이를 정의하기 위해 매개변수를 기반으로 한 수학적인 모델링이 필요하다. 예를 들어, 각 조인트에서 발생하는 힘의 균형을 계산하는 기본적인 식은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{F}_{i} = m_{i} \mathbf{a}_{i} + \mathbf{g}
</div>
<script type="math/tex; mode=display">
\mathbf{F}_{i} = m_{i} \mathbf{a}_{i} + \mathbf{g}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{F}_{i}</span><script type="math/tex">\mathbf{F}_{i}</script></span>는 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>번째 링크에 작용하는 힘 벡터
- <span class="arithmatex"><span class="MathJax_Preview">m_{i}</span><script type="math/tex">m_{i}</script></span>는 링크의 질량
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{a}_{i}</span><script type="math/tex">\mathbf{a}_{i}</script></span>는 링크의 가속도 벡터
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{g}</span><script type="math/tex">\mathbf{g}</script></span>는 중력 가속도 벡터</p>
<p>또한, 각 링크의 관성 모멘트를 고려하여 회전 운동을 계산할 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{\tau}_{i} = \mathbf{I}_{i} \mathbf{\alpha}_{i}
</div>
<script type="math/tex; mode=display">
\mathbf{\tau}_{i} = \mathbf{I}_{i} \mathbf{\alpha}_{i}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{\tau}_{i}</span><script type="math/tex">\mathbf{\tau}_{i}</script></span>는 링크에 작용하는 토크 벡터
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{I}_{i}</span><script type="math/tex">\mathbf{I}_{i}</script></span>는 링크의 관성 행렬
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{\alpha}_{i}</span><script type="math/tex">\mathbf{\alpha}_{i}</script></span>는 링크의 각가속도 벡터</p>
<p>이러한 수식들은 xacro를 사용한 매크로에서 정의한 링크와 조인트의 특성과 결합하여 실제 로봇의 운동을 시뮬레이션할 때 중요한 역할을 한다.</p>
<h3 id="3">3. 멀티 조인트 로봇의 동역학 모델링</h3>
<p>멀티 조인트 로봇의 동역학을 xacro를 통해 매개변수화할 수 있다. 특히 링크의 질량, 관성, 그리고 조인트의 회전 축 등을 정확히 정의하여 로봇의 운동을 현실적으로 시뮬레이션할 수 있다.</p>
<h4 id="31">3.1 링크의 질량과 관성 정의</h4>
<p>각 링크의 질량 <span class="arithmatex"><span class="MathJax_Preview">m</span><script type="math/tex">m</script></span>과 관성 행렬 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{I}</span><script type="math/tex">\mathbf{I}</script></span>는 링크가 회전할 때 발생하는 관성 모멘트와 관련이 있다. 이를 URDF에서 정의할 때, xacro 매크로를 통해 유연하게 설정할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:macro name=&quot;inertial_properties&quot; params=&quot;mass ixx iyy izz&quot;&gt;
  &lt;inertial&gt;
    &lt;mass value=&quot;${mass}&quot;/&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
    &lt;inertia ixx=&quot;${ixx}&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;${iyy}&quot; iyz=&quot;0&quot; izz=&quot;${izz}&quot;/&gt;
  &lt;/inertial&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>위 매크로는 각 링크의 질량과 관성 모멘트를 매개변수로 받아, 이를 로봇 모델에 적용할 수 있도록 한다. 예를 들어, 특정 링크에 질량과 관성을 적용하는 방법은 다음과 같다.</p>
<pre><code class="language-xml">&lt;link name=&quot;link1&quot;&gt;
  &lt;xacro:inertial_properties mass=&quot;1.5&quot; ixx=&quot;0.02&quot; iyy=&quot;0.02&quot; izz=&quot;0.01&quot;/&gt;
  &lt;visual&gt;
    &lt;geometry&gt;
      &lt;box size=&quot;0.1 0.1 1.0&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/visual&gt;
  &lt;collision&gt;
    &lt;geometry&gt;
      &lt;box size=&quot;0.1 0.1 1.0&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/collision&gt;
&lt;/link&gt;
</code></pre>
<h4 id="32">3.2 조인트의 회전 운동</h4>
<p>조인트의 회전 운동은 각 링크가 어떻게 회전할지를 결정하며, 이를 동역학적으로 설명하기 위해서는 각가속도와 관성 행렬을 함께 고려해야 한다. 기본적으로 회전 운동은 아래와 같은 수식으로 설명된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{\tau} = \mathbf{I} \mathbf{\alpha} + \mathbf{\omega} \times (\mathbf{I} \mathbf{\omega})
</div>
<script type="math/tex; mode=display">
\mathbf{\tau} = \mathbf{I} \mathbf{\alpha} + \mathbf{\omega} \times (\mathbf{I} \mathbf{\omega})
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{\tau}</span><script type="math/tex">\mathbf{\tau}</script></span>는 링크에 작용하는 토크 벡터
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{I}</span><script type="math/tex">\mathbf{I}</script></span>는 링크의 관성 행렬
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{\alpha}</span><script type="math/tex">\mathbf{\alpha}</script></span>는 각가속도 벡터
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{\omega}</span><script type="math/tex">\mathbf{\omega}</script></span>는 각속도 벡터</p>
<p>이 수식을 사용하여 각 링크가 회전할 때 발생하는 동적 효과를 계산할 수 있으며, 이를 기반으로 로봇의 동작을 시뮬레이션할 수 있다.</p>
<h4 id="33">3.3 매개변수화된 조인트 제어</h4>
<p>xacro를 사용하여 조인트의 특성을 매개변수화함으로써 다양한 회전 축 및 속도 제한을 설정할 수 있다. 예를 들어, 조인트의 각속도와 토크를 제어하기 위한 매크로는 아래와 같이 정의할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:macro name=&quot;joint_properties&quot; params=&quot;name parent child axis effort velocity&quot;&gt;
  &lt;joint name=&quot;${name}&quot; type=&quot;revolute&quot;&gt;
    &lt;parent link=&quot;${parent}&quot;/&gt;
    &lt;child link=&quot;${child}&quot;/&gt;
    &lt;axis xyz=&quot;${axis}&quot;/&gt;
    &lt;limit effort=&quot;${effort}&quot; velocity=&quot;${velocity}&quot;/&gt;
  &lt;/joint&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>이 매크로는 각 조인트에 적용될 회전 축과 속도, 토크 제한을 유연하게 설정할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:joint_properties name=&quot;elbow_joint&quot; parent=&quot;link1&quot; child=&quot;link2&quot; axis=&quot;0 0 1&quot; effort=&quot;100&quot; velocity=&quot;1.0&quot;/&gt;
</code></pre>
<p>이처럼 각 조인트에 대해 매개변수를 설정하여, 다양한 로봇 구조를 효율적으로 모델링할 수 있다.</p>
<h3 id="4-xacro">4. 실제 로봇에서의 xacro 활용 예시</h3>
<h4 id="41">4.1 모듈화된 로봇 모델</h4>
<p>xacro는 복잡한 로봇 시스템을 모듈화하는 데 유용하다. 예를 들어, 로봇의 팔, 다리, 센서 등의 구조를 각각의 파일로 나누어 관리하고, 필요에 따라 이를 통합하여 전체 로봇 모델을 구성할 수 있다. 이렇게 하면 각 구성 요소의 독립적인 개발과 테스트가 가능하며, 유지보수가 훨씬 용이해진다.</p>
<pre><code class="language-xml">&lt;!-- arm_macro.xacro --&gt;
&lt;xacro:macro name=&quot;arm&quot; params=&quot;name parent_link&quot;&gt;
  &lt;!-- 팔의 상단 부분 --&gt;
  &lt;link name=&quot;${name}_upper_arm&quot;&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 0.3&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
  &lt;/link&gt;

  &lt;!-- 팔의 하단 부분 --&gt;
  &lt;joint name=&quot;${name}_elbow_joint&quot; type=&quot;revolute&quot;&gt;
    &lt;parent link=&quot;${name}_upper_arm&quot;/&gt;
    &lt;child link=&quot;${name}_lower_arm&quot;/&gt;
    &lt;axis xyz=&quot;0 0 1&quot;/&gt;
    &lt;limit effort=&quot;50&quot; velocity=&quot;2.0&quot;/&gt;
  &lt;/joint&gt;

  &lt;link name=&quot;${name}_lower_arm&quot;&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 0.2&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
  &lt;/link&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>위와 같은 매크로를 사용하여 로봇 팔을 모듈화하고, 필요에 따라 전체 로봇에 쉽게 통합할 수 있다.</p>
<pre><code class="language-xml">&lt;!-- robot_model.xacro --&gt;
&lt;robot name=&quot;modular_robot&quot; xmlns:xacro=&quot;http://www.ros.org/wiki/xacro&quot;&gt;
  &lt;!-- 팔을 두 개 붙여봄 --&gt;
  &lt;xacro:arm name=&quot;left_arm&quot; parent_link=&quot;base_link&quot;/&gt;
  &lt;xacro:arm name=&quot;right_arm&quot; parent_link=&quot;base_link&quot;/&gt;
&lt;/robot&gt;
</code></pre>
<h4 id="42">4.2 파라미터화된 로봇 설계</h4>
<p>xacro는 로봇의 특정 특성(예: 링크의 길이, 무게, 조인트의 회전 범위 등)을 매개변수로 설정하여 유연한 설계를 가능하게 한다. 예를 들어, 멀티 조인트 로봇의 링크 길이와 조인트 회전 범위를 매개변수화하여 다양한 로봇 모델을 빠르게 실험할 수 있다.</p>
<pre><code class="language-xml">&lt;!-- arm_parameterized_macro.xacro --&gt;
&lt;xacro:macro name=&quot;param_arm&quot; params=&quot;name parent_link length mass effort velocity&quot;&gt;
  &lt;link name=&quot;${name}_upper_arm&quot;&gt;
    &lt;inertial&gt;
      &lt;mass value=&quot;${mass}&quot;/&gt;
      &lt;origin xyz=&quot;0 0 0&quot;/&gt;
      &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.01&quot; iyz=&quot;0&quot; izz=&quot;0.01&quot;/&gt;
    &lt;/inertial&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 ${length}&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;${name}_elbow_joint&quot; type=&quot;revolute&quot;&gt;
    &lt;parent link=&quot;${name}_upper_arm&quot;/&gt;
    &lt;child link=&quot;${name}_lower_arm&quot;/&gt;
    &lt;axis xyz=&quot;0 0 1&quot;/&gt;
    &lt;limit effort=&quot;${effort}&quot; velocity=&quot;${velocity}&quot;/&gt;
  &lt;/joint&gt;

  &lt;link name=&quot;${name}_lower_arm&quot;&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 0.2&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
  &lt;/link&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>위 매크로는 링크의 길이, 질량, 조인트의 노력 한계, 속도 등을 매개변수로 받아 다양한 특성을 가진 팔을 정의할 수 있게 한다.</p>
<pre><code class="language-xml">&lt;xacro:param_arm name=&quot;robot_arm&quot; parent_link=&quot;base_link&quot; length=&quot;0.3&quot; mass=&quot;2.0&quot; effort=&quot;100&quot; velocity=&quot;1.5&quot;/&gt;
</code></pre>
<p>이처럼 xacro는 파라미터화된 설계를 통해 로봇의 구조를 간단하게 조절하고, 모델링 작업을 빠르고 효율적으로 할 수 있게 도와준다.</p>
<h4 id="43">4.3 로봇의 센서 통합</h4>
<p>실제 로봇에서는 여러 가지 센서가 로봇의 다양한 부분에 통합된다. xacro를 사용하면 각 센서를 매크로로 정의하고, 필요에 따라 로봇의 원하는 위치에 간편하게 배치할 수 있다. 예를 들어, IMU(관성 측정 장치)와 카메라를 통합하는 방법을 살펴보겠다.</p>
<pre><code class="language-xml">&lt;!-- sensor_macro.xacro --&gt;
&lt;xacro:macro name=&quot;imu_sensor&quot; params=&quot;parent_link&quot;&gt;
  &lt;sensor type=&quot;imu&quot; name=&quot;imu&quot;&gt;
    &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
    &lt;parent link=&quot;${parent_link}&quot;/&gt;
    &lt;imu&gt;
      &lt;rate&gt;100&lt;/rate&gt;
    &lt;/imu&gt;
  &lt;/sensor&gt;
&lt;/xacro:macro&gt;

&lt;xacro:macro name=&quot;camera_sensor&quot; params=&quot;parent_link&quot;&gt;
  &lt;sensor type=&quot;camera&quot; name=&quot;camera&quot;&gt;
    &lt;origin xyz=&quot;0 0 0.15&quot; rpy=&quot;0 0 0&quot;/&gt;
    &lt;parent link=&quot;${parent_link}&quot;/&gt;
    &lt;camera&gt;
      &lt;horizontal_fov&gt;1.57&lt;/horizontal_fov&gt;
      &lt;image width=&quot;640&quot; height=&quot;480&quot;/&gt;
      &lt;clip near=&quot;0.01&quot; far=&quot;50&quot;/&gt;
    &lt;/camera&gt;
  &lt;/sensor&gt;
&lt;/xacro:macro&gt;
</code></pre>
<p>이 매크로는 IMU와 카메라 센서를 정의하며, 각각의 센서를 로봇 모델에 통합할 수 있다.</p>
<pre><code class="language-xml">&lt;xacro:imu_sensor parent_link=&quot;base_link&quot;/&gt;
&lt;xacro:camera_sensor parent_link=&quot;head_link&quot;/&gt;
</code></pre>
<p>이렇게 xacro를 통해 센서를 매크로로 정의하고 로봇에 쉽게 통합하면, 복잡한 로봇의 다양한 센서를 효율적으로 관리할 수 있다.</p>
<h3 id="44-xacro">4.4 xacro를 활용한 다중 로봇 모델 관리</h3>
<p>대규모 로봇 프로젝트에서는 여러 가지 다른 로봇 모델을 사용하거나 같은 로봇 모델의 다양한 변형을 필요로 할 수 있다. xacro는 이러한 상황에서 매우 유용한 도구로, 공통된 구조를 공유하면서도 세부 사항을 다르게 설정하여 여러 모델을 손쉽게 관리할 수 있다.</p>
<h4 id="441">4.4.1 로봇 베이스 모델 정의</h4>
<p>먼저, 공통된 베이스 모델을 정의하여 모든 로봇이 공유할 수 있도록 한다. 이를 통해 로봇의 기본적인 틀을 유지하면서, 각 모델의 특성에 맞게 변형할 수 있다.</p>
<pre><code class="language-xml">&lt;!-- base_robot.xacro --&gt;
&lt;xacro:macro name=&quot;base_robot&quot; params=&quot;name wheel_radius wheel_base&quot;&gt;
  &lt;link name=&quot;${name}_base_link&quot;&gt;
    &lt;inertial&gt;
      &lt;mass value=&quot;5.0&quot;/&gt;
      &lt;origin xyz=&quot;0 0 0&quot;/&gt;
      &lt;inertia ixx=&quot;0.1&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.1&quot; iyz=&quot;0&quot; izz=&quot;0.1&quot;/&gt;
    &lt;/inertial&gt;
    &lt;visual&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;${wheel_radius}&quot; length=&quot;${wheel_base}&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/visual&gt;
    &lt;collision&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;${wheel_radius}&quot; length=&quot;${wheel_base}&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;
  &lt;/link&gt;
&lt;/xacro:macro&gt;
</code></pre>
<h4 id="442">4.4.2 베이스 모델의 확장</h4>
<p>위의 베이스 모델을 바탕으로 특정 로봇의 변형을 정의할 수 있다. 예를 들어, 휠의 크기나 질량을 달리하여 로봇의 특성을 조정할 수 있다.</p>
<pre><code class="language-xml">&lt;!-- wheel_robot.xacro --&gt;
&lt;xacro:base_robot name=&quot;wheeled_robot&quot; wheel_radius=&quot;0.1&quot; wheel_base=&quot;0.5&quot;/&gt;

&lt;joint name=&quot;left_wheel_joint&quot; type=&quot;continuous&quot;&gt;
  &lt;parent link=&quot;wheeled_robot_base_link&quot;/&gt;
  &lt;child link=&quot;left_wheel&quot;/&gt;
  &lt;axis xyz=&quot;0 1 0&quot;/&gt;
&lt;/joint&gt;

&lt;link name=&quot;left_wheel&quot;&gt;
  &lt;inertial&gt;
    &lt;mass value=&quot;0.5&quot;/&gt;
    &lt;origin xyz=&quot;0 0 0&quot;/&gt;
    &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.01&quot; iyz=&quot;0&quot; izz=&quot;0.01&quot;/&gt;
  &lt;/inertial&gt;
  &lt;visual&gt;
    &lt;geometry&gt;
      &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/visual&gt;
  &lt;collision&gt;
    &lt;geometry&gt;
      &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/collision&gt;
&lt;/link&gt;

&lt;joint name=&quot;right_wheel_joint&quot; type=&quot;continuous&quot;&gt;
  &lt;parent link=&quot;wheeled_robot_base_link&quot;/&gt;
  &lt;child link=&quot;right_wheel&quot;/&gt;
  &lt;axis xyz=&quot;0 1 0&quot;/&gt;
&lt;/joint&gt;

&lt;link name=&quot;right_wheel&quot;&gt;
  &lt;inertial&gt;
    &lt;mass value=&quot;0.5&quot;/&gt;
    &lt;origin xyz=&quot;0 0 0&quot;/&gt;
    &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0&quot; ixz=&quot;0&quot; iyy=&quot;0.01&quot; iyz=&quot;0&quot; izz=&quot;0.01&quot;/&gt;
  &lt;/inertial&gt;
  &lt;visual&gt;
    &lt;geometry&gt;
      &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/visual&gt;
  &lt;collision&gt;
    &lt;geometry&gt;
      &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
    &lt;/geometry&gt;
  &lt;/collision&gt;
&lt;/link&gt;
</code></pre>
<p>이 예시에서 <code>wheeled_robot</code>는 베이스 모델을 확장하여 바퀴가 있는 로봇을 정의하고, 바퀴의 위치와 특성을 조정할 수 있다. 이를 통해 로봇 모델을 효과적으로 관리할 수 있다.</p>
<h4 id="443">4.4.3 여러 로봇 모델의 통합</h4>
<p>xacro를 통해 여러 로봇 모델을 하나의 파일로 통합하여 관리할 수도 있다. 프로젝트의 요구에 따라 각 로봇 모델을 불러오고, 이를 시뮬레이션 환경에 맞게 조정할 수 있다.</p>
<pre><code class="language-xml">&lt;robot name=&quot;multi_robot_model&quot; xmlns:xacro=&quot;http://www.ros.org/wiki/xacro&quot;&gt;
  &lt;!-- 첫 번째 로봇 모델 호출 --&gt;
  &lt;xacro:include filename=&quot;wheel_robot.xacro&quot;/&gt;
  &lt;xacro:wheeled_robot name=&quot;robot1&quot;/&gt;

  &lt;!-- 두 번째 로봇 모델 호출 --&gt;
  &lt;xacro:include filename=&quot;arm_robot.xacro&quot;/&gt;
  &lt;xacro:arm_robot name=&quot;robot2&quot;/&gt;
&lt;/robot&gt;
</code></pre>
<p>위 코드를 사용하여 각기 다른 로봇 모델을 동일한 프로젝트 내에서 호출하고, 서로 다른 로봇을 관리할 수 있다.</p>
<h4 id="45">4.5 프로젝트의 확장성 및 유지보수</h4>
<p>xacro는 로봇 모델을 모듈화하고 매개변수화하여 확장성과 유지보수를 용이하게 한다. 프로젝트 규모가 커지거나 로봇 모델이 복잡해질수록, 반복적인 작업을 최소화하고 공통된 코드를 재사용할 수 있어 개발 효율성을 극대화할 수 있다. 또한, 새로운 로봇 모델을 추가하거나 기존 모델을 수정할 때에도 코드 구조가 단순하고 명료하므로 빠르게 수정할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../1902/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../1902/" class="btn btn-xs btn-link">
        멀티 조인트 로봇에서의 xacro 최적화
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_18/1803/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_18/1803/" class="btn btn-xs btn-link">
        파라미터를 통한 로봇 모델링의 유연성
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>