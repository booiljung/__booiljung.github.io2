<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/robot_simulation_with_urdf_sdf/chapter_29/2901/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>멀티 조인트 로봇 시뮬레이션 - 소프트웨어 융합</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \uad6c\uc870", url: "#_top", children: [
              {title: "\uc870\uc778\ud2b8\uc758 \uc885\ub958", url: "#_2" },
          ]},
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \uc6b4\ub3d9\ud559", url: "#_3", children: [
              {title: "\uc815\uc801 \uc6b4\ub3d9\ud559", url: "#_4" },
          ]},
          {title: "\uc5ed\uc6b4\ub3d9\ud559 (Inverse Kinematics)", url: "#inverse-kinematics", children: [
              {title: "\uc5ed\uc6b4\ub3d9\ud559\uc758 \ud574\ubc95", url: "#_5" },
              {title: "Jacobian \ud589\ub82c", url: "#jacobian" },
              {title: "Jacobian \uc5ed\ud589\ub82c\uc744 \ud1b5\ud55c \uc5ed\uc6b4\ub3d9\ud559", url: "#jacobian_1" },
          ]},
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \ub3d9\uc5ed\ud559", url: "#_6", children: [
              {title: "\uc6b4\ub3d9 \ubc29\uc815\uc2dd", url: "#_7" },
              {title: "Newton-Euler \ubc29\uc815\uc2dd", url: "#newton-euler" },
              {title: "\uc5ed\ub3d9\uc5ed\ud559", url: "#_8" },
          ]},
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \ub3d9\uc5ed\ud559 \uc2dc\ubbac\ub808\uc774\uc158", url: "#_9", children: [
              {title: "URDF\uc5d0\uc11c\uc758 \ub3d9\uc5ed\ud559\uc801 \ud2b9\uc131 \uc815\uc758", url: "#urdf" },
              {title: "SDF\uc5d0\uc11c\uc758 \ub3d9\uc5ed\ud559\uc801 \ud2b9\uc131 \uc815\uc758", url: "#sdf" },
          ]},
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07\uc758 \ucda9\ub3cc \ucc98\ub9ac", url: "#_10", children: [
              {title: "\ucda9\ub3cc \ubaa8\ub378\uc758 \uc815\uc758", url: "#_11" },
              {title: "\ucda9\ub3cc \uac10\uc9c0 \uc54c\uace0\ub9ac\uc998", url: "#_12" },
              {title: "\ucda9\ub3cc \ud6c4 \ubc18\uc751", url: "#_13" },
          ]},
          {title: "\uba40\ud2f0 \uc870\uc778\ud2b8 \ub85c\ubd07 \uc2dc\ubbac\ub808\uc774\uc158\uc758 \uc131\ub2a5 \ucd5c\uc801\ud654", url: "#_14", children: [
              {title: "\ucda9\ub3cc \ubaa8\ub378 \uac04\uc18c\ud654", url: "#_15" },
              {title: "\ubb3c\ub9ac \uc5d4\uc9c4 \uc124\uc815 \ucd5c\uc801\ud654", url: "#_16" },
              {title: "\uba40\ud2f0\uc2a4\ub808\ub4dc \ubc0f \ubcd1\ub82c \ucc98\ub9ac", url: "#_17" },
              {title: "URDF\uc640 xacro\uc758 \ud6a8\uc728\uc801 \uc0ac\uc6a9", url: "#urdf-xacro" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../2902/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../2902/" class="btn btn-xs btn-link">
        협동 로봇 시스템 시뮬레이션
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_28/2803/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_28/2803/" class="btn btn-xs btn-link">
        시뮬레이션 결과 시각화 도구
      </a>
    </div>
    
  </div>

    

    <h3 id="_1">멀티 조인트 로봇의 구조</h3>
<p>멀티 조인트 로봇은 여러 개의 조인트(조인트)과 링크로 이루어져 있으며, 각 조인트는 서로 연결된 링크를 회전하거나 이동시키는 역할을 한다. 로봇의 각 링크는 좌표계와 연관되며, 링크 간의 관계는 로봇의 동작을 정의하는 데 중요한 역할을 한다. 이를 기반으로 URDF와 SDF 파일에서 멀티 조인트 로봇을 정의할 때 각 조인트의 운동학적 특성과 동역학적 특성을 정확히 모델링해야 한다.</p>
<h4 id="_2">조인트의 종류</h4>
<p>로봇의 조인트는 크게 다음과 같은 몇 가지 종류로 분류된다:</p>
<ol>
<li><strong>회전 조인트</strong>: 하나의 축을 기준으로 링크가 회전한다.</li>
<li><strong>프리즘 조인트</strong>: 직선 운동을 하는 조인트로, 한 축을 따라 링크가 이동한다.</li>
<li><strong>고정 조인트</strong>: 링크 간에 상대적인 움직임이 없는 조인트이다.</li>
<li><strong>유니버설 조인트</strong>: 두 축을 따라 회전 운동을 하는 조인트이다.</li>
</ol>
<p>조인트의 종류에 따라 각 링크 간의 상호 작용을 정의하는 수식은 달라지며, 이를 바탕으로 로봇의 전체 운동 방정식을 구성하게 된다.</p>
<h3 id="_3">멀티 조인트 로봇의 운동학</h3>
<p>멀티 조인트 로봇의 운동학은 각 링크와 조인트의 상대적인 위치와 자세를 나타내는 수식들로 정의된다. 이를 위해 먼저 각 링크에 대해 정의된 좌표계를 고려하며, 이를 연결하는 변환 행렬을 통해 로봇의 전반적인 자세를 표현할 수 있다.</p>
<h4 id="_4">정적 운동학</h4>
<p>정적 운동학은 조인트 각도(또는 변위)가 주어졌을 때, 로봇의 끝단 위치와 자세를 구하는 문제이다. 이를 위해 <strong>Denavit-Hartenberg (DH) 파라미터</strong>를 이용해 각 조인트의 변환 행렬을 정의할 수 있다. 각 링크 간의 변환은 다음과 같은 행렬로 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{T}_{i}^{i-1} =
\begin{bmatrix}
\cos \theta_i &amp; -\sin \theta_i \cos \alpha_i &amp; \sin \theta_i \sin \alpha_i &amp; a_i \cos \theta_i \\
\sin \theta_i &amp; \cos \theta_i \cos \alpha_i &amp; -\cos \theta_i \sin \alpha_i &amp; a_i \sin \theta_i \\
0 &amp; \sin \alpha_i &amp; \cos \alpha_i &amp; d_i \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
</div>
<script type="math/tex; mode=display">
\mathbf{T}_{i}^{i-1} =
\begin{bmatrix}
\cos \theta_i & -\sin \theta_i \cos \alpha_i & \sin \theta_i \sin \alpha_i & a_i \cos \theta_i \\
\sin \theta_i & \cos \theta_i \cos \alpha_i & -\cos \theta_i \sin \alpha_i & a_i \sin \theta_i \\
0 & \sin \alpha_i & \cos \alpha_i & d_i \\
0 & 0 & 0 & 1
\end{bmatrix}
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">\theta_i</span><script type="math/tex">\theta_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">i-1</span><script type="math/tex">i-1</script></span>을 연결하는 회전 각도</li>
<li><span class="arithmatex"><span class="MathJax_Preview">d_i</span><script type="math/tex">d_i</script></span>: 링크의 변위 (프리즘 조인트의 경우)</li>
<li><span class="arithmatex"><span class="MathJax_Preview">a_i</span><script type="math/tex">a_i</script></span>: 링크 길이</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\alpha_i</span><script type="math/tex">\alpha_i</script></span>: 링크 간의 트위스트 각도</li>
</ul>
<p>이를 통해 멀티 조인트 로봇의 전체적인 위치와 자세를 구할 수 있으며, 이를 전진 운동학(Forward Kinematics)이라고 한다. 전진 운동학 방정식은 다음과 같이 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{T}_{n}^{0} = \mathbf{T}_{1}^{0} \cdot \mathbf{T}_{2}^{1} \cdot \dots \cdot \mathbf{T}_{n}^{n-1}
</div>
<script type="math/tex; mode=display">
\mathbf{T}_{n}^{0} = \mathbf{T}_{1}^{0} \cdot \mathbf{T}_{2}^{1} \cdot \dots \cdot \mathbf{T}_{n}^{n-1}
</script>
</div>
<p>따라서, 각 조인트의 위치와 회전 상태에 따라 끝단 링크의 위치와 자세가 결정된다.</p>
<h3 id="inverse-kinematics">역운동학 (Inverse Kinematics)</h3>
<p>멀티 조인트 로봇의 역운동학은 로봇의 끝단 위치와 자세가 주어졌을 때, 각 조인트의 각도(또는 변위)를 구하는 문제이다. 이 문제는 전진 운동학보다 복잡하며, 특히 다수의 해가 존재하거나 해가 존재하지 않을 수도 있다. 일반적으로 역운동학 문제는 비선형 방정식으로 표현되며, 수치 해법을 통해 근사적으로 해를 구하는 경우가 많다.</p>
<p>역운동학의 일반적인 문제는 다음과 같이 주어진다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{T}_{n}^{0} = \mathbf{T}_{\text{desired}}
</div>
<script type="math/tex; mode=display">
\mathbf{T}_{n}^{0} = \mathbf{T}_{\text{desired}}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{T}_{\text{desired}}</span><script type="math/tex">\mathbf{T}_{\text{desired}}</script></span>는 목표로 하는 끝단의 위치와 자세를 나타내는 변환 행렬이다. 이때, 각 조인트의 회전 각도 <span class="arithmatex"><span class="MathJax_Preview">\theta_1, \theta_2, \dots, \theta_n</span><script type="math/tex">\theta_1, \theta_2, \dots, \theta_n</script></span>을 구하는 것이 역운동학 문제의 핵심이다.</p>
<h4 id="_5">역운동학의 해법</h4>
<p>역운동학 문제를 푸는 여러 가지 방법이 있으며, 대표적인 방법으로는 기하학적 접근법, 해석적 접근법, 그리고 수치적 접근법이 있다.</p>
<ol>
<li>
<p><strong>기하학적 접근법</strong>: 로봇의 구조를 기반으로 삼각법을 이용해 각 조인트의 각도를 계산하는 방법이다. 이 방법은 2D 또는 3D 평면에서 간단한 로봇 팔의 경우에 적용하기 쉽다.</p>
</li>
<li>
<p><strong>해석적 접근법</strong>: 주어진 변환 행렬을 수학적으로 풀어서 각 조인트 각도를 구하는 방법이다. 하지만 이 방법은 로봇의 구조가 복잡해질수록 매우 복잡해지며, 모든 로봇에 대해 적용하기 어렵다.</p>
</li>
<li>
<p><strong>수치적 접근법</strong>: 역운동학 문제를 최적화 문제로 변환하여 반복적인 방법으로 해를 구하는 방식이다. 대표적인 방법으로는 <strong>Newton-Raphson 방법</strong>이나 <strong>Jacobian transpose 방법</strong>이 있다. 수치적 해법은 복잡한 로봇에 대해 널리 사용되며, 다수의 해 또는 해가 없는 경우를 처리할 수 있다.</p>
</li>
</ol>
<h4 id="jacobian">Jacobian 행렬</h4>
<p>역운동학을 푸는 데 자주 사용되는 개념 중 하나가 <strong>Jacobian 행렬</strong>이다. 이는 조인트의 속도와 끝단의 속도 간의 관계를 나타내는 행렬로, 다음과 같이 정의된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{J} = \frac{\partial \mathbf{x}}{\partial \boldsymbol{\theta}}
</div>
<script type="math/tex; mode=display">
\mathbf{J} = \frac{\partial \mathbf{x}}{\partial \boldsymbol{\theta}}
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}</span><script type="math/tex">\mathbf{x}</script></span>는 끝단의 위치와 자세 벡터</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\boldsymbol{\theta} = [\theta_1, \theta_2, \dots, \theta_n]</span><script type="math/tex">\boldsymbol{\theta} = [\theta_1, \theta_2, \dots, \theta_n]</script></span>는 조인트 각도 벡터</li>
</ul>
<p>Jacobian 행렬을 이용하면, 조인트 공간에서의 미세한 변화를 직교 공간에서의 미세한 변화로 변환할 수 있다. 이를 통해 작은 시간 간격 동안 조인트 각도의 변화를 추적하여 역운동학 문제를 해결할 수 있다.</p>
<h4 id="jacobian_1">Jacobian 역행렬을 통한 역운동학</h4>
<p>Jacobian 행렬의 역행렬을 이용해 끝단의 속도를 조인트 속도로 변환할 수 있다. 이를 통해 역운동학을 다음과 같이 풀 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\Delta \boldsymbol{\theta} = \mathbf{J}^{-1} \Delta \mathbf{x}
</div>
<script type="math/tex; mode=display">
\Delta \boldsymbol{\theta} = \mathbf{J}^{-1} \Delta \mathbf{x}
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">\Delta \mathbf{x}</span><script type="math/tex">\Delta \mathbf{x}</script></span>는 끝단의 위치 및 자세 변화</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\Delta \boldsymbol{\theta}</span><script type="math/tex">\Delta \boldsymbol{\theta}</script></span>는 각 조인트의 각도 변화</li>
</ul>
<p>다만, Jacobian 행렬의 역행렬이 항상 존재하는 것은 아니며, 특이점(singularity) 근처에서는 역행렬이 존재하지 않거나 값이 매우 커질 수 있다. 이를 해결하기 위해 <strong>가역 Jacobian 행렬</strong>(pseudo-inverse)을 사용하거나, 특이점 회피 알고리즘을 적용하기도 한다.</p>
<h3 id="_6">멀티 조인트 로봇의 동역학</h3>
<p>멀티 조인트 로봇의 동역학은 로봇이 시간에 따라 어떻게 움직이는지를 설명하는 방정식을 다룬다. 동역학 방정식은 뉴턴의 운동 법칙과 토크 방정식을 기반으로 하며, 각 링크의 질량, 관성, 마찰 등의 물리적 특성을 포함한다.</p>
<h4 id="_7">운동 방정식</h4>
<p>멀티 조인트 로봇의 운동 방정식은 일반적으로 <strong>Euler-Lagrange 방정식</strong> 또는 <strong>Newton-Euler 방정식</strong>으로 표현된다. Euler-Lagrange 방정식은 에너지를 기반으로 하며, 다음과 같은 형태로 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\frac{d}{dt} \left( \frac{\partial L}{\partial \dot{\boldsymbol{\theta}}} \right) - \frac{\partial L}{\partial \boldsymbol{\theta}} = \mathbf{\tau}
</div>
<script type="math/tex; mode=display">
\frac{d}{dt} \left( \frac{\partial L}{\partial \dot{\boldsymbol{\theta}}} \right) - \frac{\partial L}{\partial \boldsymbol{\theta}} = \mathbf{\tau}
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">L = T - V</span><script type="math/tex">L = T - V</script></span>는 라그랑지언(Lagrangian)으로, <span class="arithmatex"><span class="MathJax_Preview">T</span><script type="math/tex">T</script></span>는 운동 에너지, <span class="arithmatex"><span class="MathJax_Preview">V</span><script type="math/tex">V</script></span>는 위치 에너지</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\boldsymbol{\theta}</span><script type="math/tex">\boldsymbol{\theta}</script></span>는 조인트 각도 벡터</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\dot{\boldsymbol{\theta}}</span><script type="math/tex">\dot{\boldsymbol{\theta}}</script></span>는 조인트 각도 속도 벡터</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{\tau}</span><script type="math/tex">\mathbf{\tau}</script></span>는 조인트 토크 벡터</li>
</ul>
<p>이를 통해 로봇의 각 조인트에 필요한 토크를 계산하고, 주어진 입력에 따라 로봇이 어떻게 움직이는지 예측할 수 있다.</p>
<h4 id="newton-euler">Newton-Euler 방정식</h4>
<p>Newton-Euler 방정식은 멀티 조인트 로봇의 각 링크에 작용하는 힘과 토크를 기반으로 로봇의 동작을 설명하는 방식이다. 이는 각 링크의 회전 및 선형 운동을 고려하며, 다음과 같은 일반적인 형태로 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{F}_i = m_i \mathbf{a}_i
</div>
<script type="math/tex; mode=display">
\mathbf{F}_i = m_i \mathbf{a}_i
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{\tau}_i = \mathbf{I}_i \dot{\mathbf{\omega}}_i + \mathbf{\omega}_i \times \mathbf{I}_i \mathbf{\omega}_i
</div>
<script type="math/tex; mode=display">
\mathbf{\tau}_i = \mathbf{I}_i \dot{\mathbf{\omega}}_i + \mathbf{\omega}_i \times \mathbf{I}_i \mathbf{\omega}_i
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{F}_i</span><script type="math/tex">\mathbf{F}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>에 작용하는 힘</li>
<li><span class="arithmatex"><span class="MathJax_Preview">m_i</span><script type="math/tex">m_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>의 질량</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{a}_i</span><script type="math/tex">\mathbf{a}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>의 선형 가속도</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{\tau}_i</span><script type="math/tex">\mathbf{\tau}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>에 작용하는 토크</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{I}_i</span><script type="math/tex">\mathbf{I}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>의 관성 행렬</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{\omega}_i</span><script type="math/tex">\mathbf{\omega}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>의 각속도</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\dot{\mathbf{\omega}}_i</span><script type="math/tex">\dot{\mathbf{\omega}}_i</script></span>: 링크 <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>의 각 가속도</li>
</ul>
<p>Newton-Euler 방정식은 각 링크에 대해 반복적으로 적용되어 로봇의 전체 운동 방정식을 구할 수 있다. 이 방법은 각각의 링크에서 발생하는 힘과 토크를 고려하며, 이는 로봇의 전체적인 움직임에 중요한 역할을 한다.</p>
<h4 id="_8">역동역학</h4>
<p>역동역학은 로봇의 동작이 주어졌을 때, 해당 동작을 수행하기 위해 각 조인트에 요구되는 힘과 토크를 계산하는 문제이다. 역동역학은 제어 알고리즘에서 주로 사용되며, 로봇의 원하는 궤적을 따라가기 위한 제어 명령을 생성하는 데 필요한 정보를 제공한다.</p>
<p>역동역학 문제는 다음과 같은 방정식으로 주어진다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{\tau} = \mathbf{M}(\boldsymbol{\theta}) \ddot{\boldsymbol{\theta}} + \mathbf{C}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) \dot{\boldsymbol{\theta}} + \mathbf{G}(\boldsymbol{\theta})
</div>
<script type="math/tex; mode=display">
\mathbf{\tau} = \mathbf{M}(\boldsymbol{\theta}) \ddot{\boldsymbol{\theta}} + \mathbf{C}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) \dot{\boldsymbol{\theta}} + \mathbf{G}(\boldsymbol{\theta})
</script>
</div>
<p>여기서:</p>
<ul>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{\tau}</span><script type="math/tex">\mathbf{\tau}</script></span>: 조인트에 필요한 토크 벡터</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{M}(\boldsymbol{\theta})</span><script type="math/tex">\mathbf{M}(\boldsymbol{\theta})</script></span>: 로봇의 관성 행렬</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{C}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}})</span><script type="math/tex">\mathbf{C}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}})</script></span>: 코리올리스와 원심력 항</li>
<li><span class="arithmatex"><span class="MathJax_Preview">\mathbf{G}(\boldsymbol{\theta})</span><script type="math/tex">\mathbf{G}(\boldsymbol{\theta})</script></span>: 중력 항</li>
</ul>
<p>역동역학은 멀티 조인트 로봇의 동역학을 풀어, 로봇이 특정 궤적을 따르도록 하는 힘과 토크를 계산하는 데 사용된다.</p>
<h3 id="_9">멀티 조인트 로봇의 동역학 시뮬레이션</h3>
<p>멀티 조인트 로봇의 동역학 시뮬레이션은 각 링크와 조인트의 물리적 특성을 고려하여, 로봇의 동작을 정확히 예측하는 데 중점을 둔다. 이 과정에서 URDF 또는 SDF 파일을 이용해 로봇의 모델을 정의하고, 물리 엔진을 사용해 로봇의 움직임을 시뮬레이션할 수 있다.</p>
<h4 id="urdf">URDF에서의 동역학적 특성 정의</h4>
<p>URDF 파일에서는 각 링크의 질량, 관성, 마찰 등의 물리적 특성을 정의할 수 있다. 이러한 특성들은 URDF의 <code>&lt;inertial&gt;</code>, <code>&lt;mass&gt;</code>, <code>&lt;inertia&gt;</code> 태그를 통해 설정된다. 예를 들어, 링크의 질량과 관성은 다음과 같이 정의될 수 있다:</p>
<pre><code class="language-xml">&lt;inertial&gt;
  &lt;mass value=&quot;1.0&quot;/&gt;
  &lt;inertia ixx=&quot;0.1&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot; iyy=&quot;0.1&quot; iyz=&quot;0.0&quot; izz=&quot;0.1&quot;/&gt;
&lt;/inertial&gt;
</code></pre>
<p>여기서 <code>mass</code>는 링크의 질량을, <code>inertia</code>는 링크의 관성 행렬을 나타낸다.</p>
<h4 id="sdf">SDF에서의 동역학적 특성 정의</h4>
<p>SDF 파일에서는 URDF보다 더 정밀하게 로봇의 물리적 특성을 정의할 수 있으며, 다양한 물리 엔진을 지원한다. SDF에서는 링크의 물리적 특성을 다음과 같이 정의할 수 있다:</p>
<pre><code class="language-xml">&lt;inertial&gt;
  &lt;mass&gt;1.0&lt;/mass&gt;
  &lt;inertia&gt;
    &lt;ixx&gt;0.1&lt;/ixx&gt;
    &lt;iyy&gt;0.1&lt;/iyy&gt;
    &lt;izz&gt;0.1&lt;/izz&gt;
    &lt;ixy&gt;0.0&lt;/ixy&gt;
    &lt;ixz&gt;0.0&lt;/ixz&gt;
    &lt;iyz&gt;0.0&lt;/iyz&gt;
  &lt;/inertia&gt;
&lt;/inertial&gt;
</code></pre>
<p>SDF 파일은 또한 다양한 물리 엔진과의 호환성을 고려하여 마찰, 감쇠 등의 추가적인 물리 특성을 정의할 수 있다.</p>
<h3 id="_10">멀티 조인트 로봇의 충돌 처리</h3>
<p>멀티 조인트 로봇 시뮬레이션에서 충돌 처리도 매우 중요한 부분이다. 로봇의 각 링크가 환경 내의 물체와 충돌하거나 서로 간에 충돌할 때 이를 정확히 처리하지 않으면 시뮬레이션 결과가 부정확하게 나타날 수 있다. 물리 엔진에서는 충돌 처리 알고리즘을 통해 이러한 상호작용을 시뮬레이션하게 된다.</p>
<h4 id="_11">충돌 모델의 정의</h4>
<p>URDF 또는 SDF 파일에서는 로봇의 링크마다 충돌 모델을 정의할 수 있다. 충돌 모델은 일반적으로 간단한 기하학적 형상(박스, 실린더, 구) 또는 복잡한 메쉬 모델로 정의된다. 이는 URDF/SDF에서 <code>&lt;collision&gt;</code> 태그를 사용하여 설정할 수 있다.</p>
<p>예를 들어, 간단한 박스 형상의 충돌 모델은 다음과 같이 정의된다:</p>
<pre><code class="language-xml">&lt;collision&gt;
  &lt;geometry&gt;
    &lt;box&gt;
      &lt;size&gt;0.5 0.5 0.5&lt;/size&gt;
    &lt;/box&gt;
  &lt;/geometry&gt;
&lt;/collision&gt;
</code></pre>
<p>충돌 모델은 실제 로봇의 물리적 상호작용을 정의하기 위해 필수적이며, 정확한 시뮬레이션을 위해서는 물리 엔진에서 이를 처리해야 한다.</p>
<h4 id="_12">충돌 감지 알고리즘</h4>
<p>충돌 감지 알고리즘은 로봇의 링크와 외부 물체가 충돌하는 순간을 감지하고, 그에 따라 힘과 토크를 계산한다. 충돌이 발생하면 물리 엔진은 충돌 지점에서 발생하는 힘을 계산하고, 이를 통해 로봇의 동작이 변화한다.</p>
<p>충돌 감지에는 여러 가지 방법이 있으며, 대표적인 방법으로 <strong>AABB (Axis-Aligned Bounding Box)</strong>, <strong>OBB (Oriented Bounding Box)</strong>, <strong>GJK (Gilbert-Johnson-Keerthi)</strong> 알고리즘이 있다.</p>
<ol>
<li><strong>AABB</strong>: 충돌할 수 있는 두 물체를 포함하는 축 정렬 경계 상자를 만들고, 그 상자들이 겹치는지 확인하는 방식이다. 빠른 충돌 감지에 적합하지만, 정확도가 떨어질 수 있다.</li>
<li><strong>OBB</strong>: 물체의 방향을 고려한 경계 상자를 사용하여 충돌 여부를 판단하는 방식으로, AABB보다 더 정확하지만 계산 비용이 높을 수 있다.</li>
<li><strong>GJK</strong>: 두 물체 간의 최소 거리를 계산하여 충돌 여부를 판단하는 방식이다. 복잡한 형상에도 적용 가능하며, 비교적 정확한 충돌 처리가 가능하다.</li>
</ol>
<h4 id="_13">충돌 후 반응</h4>
<p>충돌이 발생한 후 물리 엔진은 충돌 지점에서 발생하는 힘과 토크를 계산하여, 이를 로봇의 동작에 반영한다. 예를 들어, 로봇의 팔이 벽과 충돌할 경우, 충돌 지점에서 반작용력이 발생하여 로봇의 움직임이 변화하게 된다.</p>
<p>물리 엔진에서는 일반적으로 <strong>탄성 충돌</strong>과 <strong>비탄성 충돌</strong>을 고려한다. 탄성 충돌에서는 물체가 충돌 후 반사되며, 비탄성 충돌에서는 충돌 후 물체가 에너지를 잃고 멈추거나 속도가 줄어든다. 이러한 충돌 특성은 URDF 또는 SDF 파일에서 설정할 수 있으며, 시뮬레이션의 정확성을 높이기 위해 중요한 요소로 작용한다.</p>
<h3 id="_14">멀티 조인트 로봇 시뮬레이션의 성능 최적화</h3>
<p>멀티 조인트 로봇 시뮬레이션은 계산량이 매우 많기 때문에, 성능 최적화가 필요하다. 특히 물리 엔진에서 많은 링크와 조인트, 복잡한 충돌 처리를 다룰 때 시뮬레이션 성능이 저하될 수 있다. 이를 해결하기 위해 여러 가지 최적화 기법을 적용할 수 있다.</p>
<h4 id="_15">충돌 모델 간소화</h4>
<p>복잡한 충돌 모델을 간소화하면 시뮬레이션 속도를 크게 향상시킬 수 있다. 복잡한 메쉬 모델 대신 간단한 기하학적 형상(박스, 구, 실린더 등)을 사용하는 것이 대표적인 방법이다. 간단한 충돌 모델을 사용하면 물리 엔진에서 충돌 감지와 처리에 필요한 계산량을 줄일 수 있다.</p>
<h4 id="_16">물리 엔진 설정 최적화</h4>
<p>물리 엔진의 다양한 설정을 최적화하여 시뮬레이션 성능을 향상시킬 수 있다. 예를 들어, 물리 엔진의 시뮬레이션 시간 스텝을 조정하여 시뮬레이션 속도를 높이거나, 충돌 감지의 정확도를 낮춰 성능을 최적화할 수 있다. 이는 SDF 파일에서 설정할 수 있으며, 시뮬레이션 목적에 따라 적절한 타협점을 찾는 것이 중요하다.</p>
<h4 id="_17">멀티스레드 및 병렬 처리</h4>
<p>로봇의 링크와 조인트가 많을수록 계산량이 기하급수적으로 증가할 수 있다. 이를 해결하기 위해 물리 엔진에서 멀티스레드 또는 병렬 처리를 지원하는 경우, 이를 활용하여 계산 성능을 높일 수 있다. 특히 대규모 로봇 시스템을 시뮬레이션할 때 유용하다.</p>
<h4 id="urdf-xacro">URDF와 xacro의 효율적 사용</h4>
<p>복잡한 URDF 파일을 직접 작성하는 대신, xacro를 사용하여 반복적인 구조를 간소화하고, 코드 재사용성을 높임으로써 모델 정의 시간을 단축할 수 있다. 이를 통해 URDF 파일의 가독성을 높이고, 관리와 수정이 용이해지며, 시뮬레이션 성능에도 긍정적인 영향을 미칠 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../2902/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../2902/" class="btn btn-xs btn-link">
        협동 로봇 시스템 시뮬레이션
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_28/2803/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_28/2803/" class="btn btn-xs btn-link">
        시뮬레이션 결과 시각화 도구
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>