<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://booiljung.github.io/robot/autonomous_robot_with_humble_fastlivo_mid360/chapter_01/0101/" rel="canonical"/>
<link href="../../../../img/favicon.ico" rel="shortcut icon"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>ROS2의 특징과 발전 - 소프트웨어 융합</title>
<link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet"/>
<link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet"/>
<link href="../../../../css/base.css" rel="stylesheet"/>
<link href="../../../../css/highlight.css" rel="stylesheet"/>
<link href="../../../../css/custom.css" rel="stylesheet"/>
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script src="../../../../js/jquery-3.2.1.min.js"></script>
<script src="../../../../js/bootstrap-3.3.7.min.js"></script>
<script src="../../../../js/highlight.pack.js"></script>
<base target="_top"/>
<script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\ubd84\uc0b0 \uc2dc\uc2a4\ud15c \uc544\ud0a4\ud14d\ucc98", url: "#_top", children: [
          ]},
          {title: "DDS(\ub370\uc774\ud130 \ubd84\uc0b0 \uc11c\ube44\uc2a4) \ud1b5\uc2e0 \ud504\ub85c\ud1a0\ucf5c \uae30\ubc18", url: "#dds", children: [
          ]},
          {title: "\ub2e4\uc911 \ud50c\ub7ab\ud3fc \uc9c0\uc6d0", url: "#_2", children: [
          ]},
          {title: "\uc2e4\uc2dc\uac04\uc131 \uc9c0\uc6d0", url: "#_3", children: [
          ]},
          {title: "\ubcf4\uc548 \uac15\ud654", url: "#_4", children: [
          ]},
          {title: "\ubaa8\ub4c8\ud654 \ubc0f \ud655\uc7a5\uc131", url: "#_5", children: [
          ]},
          {title: "\uac1c\uc120\ub41c QoS(\uc11c\ube44\uc2a4 \ud488\uc9c8) \uc124\uc815", url: "#qos", children: [
          ]},
          {title: "\uc0dd\uc560 \uc8fc\uae30 \uad00\ub9ac(Lifecycle Management)", url: "#lifecycle-management", children: [
          ]},
          {title: "\ubbf8\ub4e4\uc6e8\uc5b4 \ucd94\uc0c1\ud654 \uacc4\uce35", url: "#_6", children: [
          ]},
          {title: "\ud14c\uc2a4\ud2b8 \ubc0f \ub514\ubc84\uae45 \uc9c0\uc6d0 \uac15\ud654", url: "#_7", children: [
          ]},
          {title: "\uac1c\uc120\ub41c \ub85c\uae45 \ubc0f \ubaa8\ub2c8\ud130\ub9c1 \uae30\ub2a5", url: "#_8", children: [
          ]},
          {title: "ROS2\uc758 \uc131\ub2a5 \ucd5c\uc801\ud654", url: "#ros2", children: [
          ]},
          {title: "\uba40\ud2f0\uc2a4\ub808\ub529 \ubc0f \uba40\ud2f0\ud504\ub85c\uc138\uc2f1 \uc9c0\uc6d0", url: "#_9", children: [
          ]},
          {title: "ROS2\uc758 \ub124\ud2b8\uc6cc\ud06c \uc9c0\uc6d0 \ubc0f \ud2b8\ub798\ud53d \uad00\ub9ac", url: "#ros2_1", children: [
          ]},
          {title: "\uc2dc\uac04 \ub3d9\uae30\ud654 \ubc0f \ud074\ub7ed \uad00\ub9ac", url: "#_10", children: [
          ]},
          {title: "ROS2\uc640 \ub124\uc774\ud2f0\ube0c \uc2e4\uc2dc\uac04 OS \ud1b5\ud569", url: "#ros2-os", children: [
          ]},
          {title: "\ub124\uc784\uc2a4\ud398\uc774\uc2a4 \ubc0f \ud1a0\ud53d \uad00\ub9ac", url: "#_11", children: [
          ]},
          {title: "\ub124\ud2b8\uc6cc\ud06c \ub300\uc5ed\ud3ed \ucd5c\uc801\ud654", url: "#_12", children: [
          ]},
          {title: "ROS2\uc758 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub77c\uc774\ube0c\ub7ec\ub9ac \uad6c\uc870", url: "#ros2_2", children: [
          ]},
          {title: "\ubbf8\uc158 \ud06c\ub9ac\ud2f0\uceec\ud55c \ud658\uacbd\uc5d0\uc11c\uc758 \uc2e0\ub8b0\uc131", url: "#_13", children: [
          ]},
          {title: "\ub85c\ubd07 \uc6b4\uc601 \ubc0f \uc720\uc9c0 \ubcf4\uc218 \uc9c0\uc6d0", url: "#_14", children: [
          ]},
          {title: "ROS2\uc758 \uac00\uc0c1\ud654 \ubc0f \ucee8\ud14c\uc774\ub108\ud654 \uc9c0\uc6d0", url: "#ros2_3", children: [
          ]},
          {title: "ROS2\uc758 \ud558\ub4dc\uc6e8\uc5b4 \uac00\uc18d \uc9c0\uc6d0", url: "#ros2_4", children: [
          ]},
        ];

    </script>
<script src="../../../../js/base.js"></script>
<script src="../../../../js/google_analytics.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script>
</meta></head>
<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>
<div class="container-fluid wm-page-content">
<a name="_top"></a>
<div aria-label="navigation" class="row wm-article-nav-buttons" role="navigation">
<div class="wm-article-nav pull-right">
<a class="btn btn-xs btn-default pull-right" href="../0102/">
        Next
        <i aria-hidden="true" class="fa fa-chevron-right"></i>
</a>
<a class="btn btn-xs btn-link" href="../0102/">
        ROS2 Humble의 설치 및 환경 설정
      </a>
</div>
<div class="wm-article-nav">
<a class="btn btn-xs btn-default pull-left" href="../../01_preface_ko/">
<i aria-hidden="true" class="fa fa-chevron-left"></i>
        Previous</a><a class="btn btn-xs btn-link" href="../../01_preface_ko/">
        소개
      </a>
</div>
</div>
<h3 id="_1">분산 시스템 아키텍처</h3>
<p>ROS2는 ROS1과 달리 분산 시스템 아키텍처를 기본으로 채택하고 있다. ROS1은 단일 마스터 노드를 통해 전체 시스템의 노드들이 통신하는 구조였다. 이러한 중앙 집중식 아키텍처는 시스템이 커질수록 마스터 노드에 과부하가 걸리거나, 마스터 노드에 장애가 발생하면 전체 시스템이 중단되는 문제가 있었다. ROS2는 이를 개선하기 위해 분산 시스템 아키텍처를 채택하여, 중앙 집중식 노드 없이도 각 노드가 독립적으로 통신할 수 있게 하였다.</p>
<h3 id="dds">DDS(데이터 분산 서비스) 통신 프로토콜 기반</h3>
<p>ROS2는 DDS(Data Distribution Service) 표준을 기반으로 하여 통신을 수행한다. DDS는 고성능, 저지연, 실시간 통신을 지원하는 프로토콜로, 분산 시스템에서 매우 중요한 역할을 한다. ROS2의 DDS 기반 통신은 다양한 네트워크 토폴로지에서 통신의 안정성과 확장성을 보장하며, 특히 자율주행과 같이 실시간 처리가 요구되는 환경에서 큰 장점을 제공한다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
P_{latency} \propto \frac{1}{T_{DDS}} 
</div>
<script type="math/tex; mode=display">
P_{latency} \propto \frac{1}{T_{DDS}} 
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">P_{latency}</span><script type="math/tex">P_{latency}</script></span>는 통신의 지연 시간이며, <span class="arithmatex"><span class="MathJax_Preview">T_{DDS}</span><script type="math/tex">T_{DDS}</script></span>는 DDS 기반 통신 시스템의 처리 시간이다.</p>
<h3 id="_2">다중 플랫폼 지원</h3>
<p>ROS1은 주로 리눅스(Linux) 기반에서 작동하도록 설계되었으나, ROS2는 리눅스뿐만 아니라 윈도우(Windows), 맥OS(MacOS) 및 임베디드 시스템 등 다양한 플랫폼에서 실행될 수 있도록 설계되었다. 이를 통해 ROS2는 로봇 소프트웨어 개발에 있어서 플랫폼에 종속되지 않고, 다양한 하드웨어에서 구현 가능하다.</p>
<h3 id="_3">실시간성 지원</h3>
<p>ROS2는 실시간성을 보다 향상시키기 위한 기능을 강화하였다. 로봇 시스템에서는 센서 데이터의 지연 없는 처리와 실시간 제어가 필수적이다. ROS2는 실시간 OS(RTOS)와의 통합을 통해 실시간 응답성을 제공할 수 있으며, 이를 통해 자율 주행 시스템에서도 실시간 데이터 처리와 제어가 가능하다.</p>
<p>실시간 시스템의 제어 주기를 나타내는 수식은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_{real-time} = \frac{1}{f_{control}}
</div>
<script type="math/tex; mode=display">
T_{real-time} = \frac{1}{f_{control}}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">T_{real-time}</span><script type="math/tex">T_{real-time}</script></span>은 실시간 제어 주기, <span class="arithmatex"><span class="MathJax_Preview">f_{control}</span><script type="math/tex">f_{control}</script></span>은 제어 주파수이다.</p>
<h3 id="_4">보안 강화</h3>
<p>ROS2는 보안을 강화하기 위한 다양한 기능을 제공한다. ROS1은 보안에 대한 기능이 거의 없었으나, ROS2는 DDS의 보안 모델을 통해 데이터 암호화, 사용자 인증, 접근 제어 등의 기능을 지원한다. 특히 자율주행과 같은 시스템에서는 외부 공격으로부터의 보호가 매우 중요한데, ROS2는 이러한 요구 사항을 충족하기 위해 통신 보안성을 제공한다.</p>
<p>보안 모델의 기초 수식을 다음과 같이 정의할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
S_{security} = f(E_{encryption}, A_{authentication}, C_{control})
</div>
<script type="math/tex; mode=display">
S_{security} = f(E_{encryption}, A_{authentication}, C_{control})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">S_{security}</span><script type="math/tex">S_{security}</script></span>는 시스템 보안 수준을 나타내며, <span class="arithmatex"><span class="MathJax_Preview">E_{encryption}</span><script type="math/tex">E_{encryption}</script></span>는 암호화, <span class="arithmatex"><span class="MathJax_Preview">A_{authentication}</span><script type="math/tex">A_{authentication}</script></span>는 인증, <span class="arithmatex"><span class="MathJax_Preview">C_{control}</span><script type="math/tex">C_{control}</script></span>은 접근 제어이다.</p>
<h3 id="_5">모듈화 및 확장성</h3>
<p>ROS2는 모듈화된 구조를 통해 다양한 기능을 독립적인 패키지로 구현하여 유지보수성과 확장성을 높였다. 예를 들어, 특정 통신 방식이나 센서 드라이버는 ROS2의 각 패키지로 독립적으로 개발 및 배포되며, 필요에 따라 자유롭게 조합하여 시스템을 구성할 수 있다. 이러한 구조적 특징은 대규모 시스템에서 특히 유리하다.</p>
<p>ROS2의 노드 구조를 모듈화 관점에서 표현하면 다음과 같다.</p>
<div class="mermaid">graph TD;
    A[노드 1] --&gt; B[노드 2]
    A --&gt; C[노드 3]
    C --&gt; D[노드 4]
    B --&gt; D
</div>
<h3 id="qos">개선된 QoS(서비스 품질) 설정</h3>
<p>ROS2는 DDS를 기반으로 한 통신에서 QoS(Quality of Service) 설정 기능을 제공한다. 이를 통해 각 노드 간의 통신 신뢰성을 제어할 수 있으며, 데이터 전송의 신뢰도, 지연 허용 범위 등을 사용자가 직접 설정할 수 있다. 예를 들어, 자율주행에서는 고신뢰도의 센서 데이터가 필수적이므로, 해당 통신 노드에 대해 높은 신뢰도 QoS 설정을 적용할 수 있다.</p>
<p>QoS의 신뢰도를 표현하는 수식은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
R_{QoS} = f(L_{latency}, P_{packet\_loss})
</div>
<script type="math/tex; mode=display">
R_{QoS} = f(L_{latency}, P_{packet\_loss})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">R_{QoS}</span><script type="math/tex">R_{QoS}</script></span>는 QoS의 신뢰도, <span class="arithmatex"><span class="MathJax_Preview">L_{latency}</span><script type="math/tex">L_{latency}</script></span>는 지연 시간, <span class="arithmatex"><span class="MathJax_Preview">P_{packet\_loss}</span><script type="math/tex">P_{packet\_loss}</script></span>는 패킷 손실 확률이다.</p>
<h3 id="lifecycle-management">생애 주기 관리(Lifecycle Management)</h3>
<p>ROS2는 노드의 생애 주기 관리를 보다 명확히 정의하여 시스템의 신뢰성을 높였다. ROS2의 노드는 여러 상태(state)를 가지며, 각 상태에서의 전환이 명확하게 정의된다. 이를 통해 노드의 상태를 모니터링하고, 필요에 따라 재시작하거나 종료하는 등의 관리 작업을 수행할 수 있다. 특히 자율주행 시스템에서는 하드웨어 장애나 소프트웨어 에러가 발생할 경우, 노드의 생애 주기 관리를 통해 시스템을 안정적으로 유지하는 것이 매우 중요하다.</p>
<p>노드의 생애 주기 상태 전이를 다음과 같이 정의할 수 있다:</p>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; unconfigured
    unconfigured --&gt; inactive : configure()
    inactive --&gt; active : activate()
    active --&gt; inactive : deactivate()
    inactive --&gt; unconfigured : cleanup()
    unconfigured --&gt; [*] : shutdown()
</div>
<h3 id="_6">미들웨어 추상화 계층</h3>
<p>ROS2는 DDS와 같은 미들웨어(Middleware)를 사용하지만, 이를 사용자 코드에서 직접 다루지 않도록 미들웨어 추상화 계층(RMW, ROS Middleware Layer)을 제공한다. RMW는 다양한 DDS 구현체 간의 호환성을 보장하며, 개발자가 특정 DDS에 종속되지 않도록 한다. 또한, 사용자는 RMW를 통해 다른 통신 프로토콜로 쉽게 전환할 수 있어 유연한 시스템 설계가 가능하다.</p>
<p>미들웨어 계층에서의 데이터 흐름은 다음과 같이 정의된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
M_{abstract} = f(T_{topic}, M_{middleware}, Q_{QoS})
</div>
<script type="math/tex; mode=display">
M_{abstract} = f(T_{topic}, M_{middleware}, Q_{QoS})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">M_{abstract}</span><script type="math/tex">M_{abstract}</script></span>는 미들웨어 추상화 계층의 데이터 흐름, <span class="arithmatex"><span class="MathJax_Preview">T_{topic}</span><script type="math/tex">T_{topic}</script></span>는 토픽 데이터, <span class="arithmatex"><span class="MathJax_Preview">M_{middleware}</span><script type="math/tex">M_{middleware}</script></span>는 미들웨어 종류, <span class="arithmatex"><span class="MathJax_Preview">Q_{QoS}</span><script type="math/tex">Q_{QoS}</script></span>는 QoS 설정이다.</p>
<h3 id="_7">테스트 및 디버깅 지원 강화</h3>
<p>ROS2는 다양한 테스트 및 디버깅 도구를 제공하여 개발자들이 시스템을 효율적으로 검증하고 유지할 수 있도록 지원한다. 예를 들어, ROS2는 유닛 테스트(unit test)와 통합 테스트(integration test)를 지원하며, 시스템의 동작을 모니터링하기 위한 다양한 로깅(logging) 및 프로파일링(profiling) 도구도 제공한다. 특히 자율주행 시스템에서는 다양한 센서 데이터와 알고리즘이 복잡하게 얽혀있기 때문에, 이러한 테스트 도구를 활용하여 시스템의 각 부분을 검증하고 최적화하는 것이 매우 중요하다.</p>
<p>ROS2에서의 테스트 프로세스 흐름은 다음과 같이 정의될 수 있다.</p>
<div class="mermaid">graph TD;
    A[테스트 코드 작성] --&gt; B[유닛 테스트 실행]
    B --&gt; C[통합 테스트 실행]
    C --&gt; D[결과 분석 및 디버깅]
</div>
<h3 id="_8">개선된 로깅 및 모니터링 기능</h3>
<p>ROS2는 로깅(logging) 및 모니터링 기능을 대폭 강화하였다. ROS1에서도 기본적인 로깅 기능이 제공되었으나, ROS2는 보다 세밀한 로그 레벨 설정과 함께 실시간 모니터링을 통해 시스템의 상태를 정확하게 파악할 수 있다. 예를 들어, 자율주행 시스템에서는 로깅 데이터를 통해 주행 중 발생한 오류를 신속히 파악하고 원인을 분석할 수 있으며, 이를 바탕으로 시스템을 개선할 수 있다.</p>
<p>로깅 및 모니터링 기능을 수식으로 표현하면 다음과 같다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
L_{logging} = f(S_{severity}, T_{timestamp}, C_{context})
</div>
<script type="math/tex; mode=display">
L_{logging} = f(S_{severity}, T_{timestamp}, C_{context})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">L_{logging}</span><script type="math/tex">L_{logging}</script></span>는 로그 데이터, <span class="arithmatex"><span class="MathJax_Preview">S_{severity}</span><script type="math/tex">S_{severity}</script></span>는 로그 심각도, <span class="arithmatex"><span class="MathJax_Preview">T_{timestamp}</span><script type="math/tex">T_{timestamp}</script></span>는 타임스탬프, <span class="arithmatex"><span class="MathJax_Preview">C_{context}</span><script type="math/tex">C_{context}</script></span>는 로그 발생 시의 컨텍스트 정보이다.</p>
<h3 id="ros2">ROS2의 성능 최적화</h3>
<p>ROS2는 다양한 성능 최적화 옵션을 제공하여 대규모 시스템에서도 높은 성능을 유지할 수 있도록 한다. 특히 ROS2는 멀티스레딩(multi-threading)을 지원하여 여러 노드가 병렬로 실행될 수 있으며, CPU 자원을 효율적으로 활용할 수 있다. 또한, ROS2는 각 노드의 실행 주기를 세밀하게 조정할 수 있어, 실시간 제어가 필요한 자율주행 시스템에서도 높은 성능을 발휘할 수 있다.</p>
<p>ROS2에서 성능 최적화를 위한 병렬 처리 모델은 다음과 같이 나타낼 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
P_{performance} = f(N_{nodes}, T_{threads}, U_{utilization})
</div>
<script type="math/tex; mode=display">
P_{performance} = f(N_{nodes}, T_{threads}, U_{utilization})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">P_{performance}</span><script type="math/tex">P_{performance}</script></span>는 시스템 성능, <span class="arithmatex"><span class="MathJax_Preview">N_{nodes}</span><script type="math/tex">N_{nodes}</script></span>는 노드 수, <span class="arithmatex"><span class="MathJax_Preview">T_{threads}</span><script type="math/tex">T_{threads}</script></span>는 스레드 수, <span class="arithmatex"><span class="MathJax_Preview">U_{utilization}</span><script type="math/tex">U_{utilization}</script></span>는 CPU 자원 활용도이다.</p>
<h3 id="_9">멀티스레딩 및 멀티프로세싱 지원</h3>
<p>ROS2는 멀티스레딩과 멀티프로세싱을 보다 유연하게 지원한다. ROS1에서는 멀티스레딩과 멀티프로세싱이 제한적이었으나, ROS2는 각 노드가 독립적으로 실행되기 때문에 여러 프로세스를 병렬로 수행할 수 있다. 또한, 각 노드가 독립적인 스레드를 가질 수 있으며, 스레드 간 충돌이나 경쟁 조건을 방지하기 위해 적절한 동기화 메커니즘도 제공한다. 자율주행 시스템과 같은 복잡한 시스템에서는 각 센서와 알고리즘이 병렬로 실행되기 때문에 이러한 기능이 필수적이다.</p>
<p>멀티스레딩을 통한 성능 향상 모델은 다음과 같이 정의할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_{total} = \frac{T_{sequential}}{N_{threads}} + T_{parallel}
</div>
<script type="math/tex; mode=display">
T_{total} = \frac{T_{sequential}}{N_{threads}} + T_{parallel}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">T_{total}</span><script type="math/tex">T_{total}</script></span>은 전체 실행 시간, <span class="arithmatex"><span class="MathJax_Preview">T_{sequential}</span><script type="math/tex">T_{sequential}</script></span>은 직렬 처리 시간, <span class="arithmatex"><span class="MathJax_Preview">N_{threads}</span><script type="math/tex">N_{threads}</script></span>는 사용된 스레드 수, <span class="arithmatex"><span class="MathJax_Preview">T_{parallel}</span><script type="math/tex">T_{parallel}</script></span>은 병렬 처리된 작업의 시간이다.</p>
<h3 id="ros2_1">ROS2의 네트워크 지원 및 트래픽 관리</h3>
<p>ROS2는 네트워크 트래픽을 효율적으로 관리하기 위한 다양한 옵션을 제공한다. DDS 기반의 통신에서는 다중 네트워크 인터페이스와 고성능 네트워크 토폴로지를 지원하며, 이를 통해 대규모 로봇 시스템에서도 안정적인 통신을 보장한다. 특히 네트워크 대역폭을 최적화하기 위해 ROS2는 데이터 전송 빈도, 전송 크기, 전송 신뢰도를 제어할 수 있는 QoS 설정을 지원하며, 이는 네트워크 자원을 효율적으로 활용하는 데 도움을 준다.</p>
<p>네트워크 트래픽 관리의 모델은 다음과 같이 표현할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
N_{traffic} = f(B_{bandwidth}, P_{packet\_size}, R_{rate})
</div>
<script type="math/tex; mode=display">
N_{traffic} = f(B_{bandwidth}, P_{packet\_size}, R_{rate})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">N_{traffic}</span><script type="math/tex">N_{traffic}</script></span>은 네트워크 트래픽, <span class="arithmatex"><span class="MathJax_Preview">B_{bandwidth}</span><script type="math/tex">B_{bandwidth}</script></span>는 네트워크 대역폭, <span class="arithmatex"><span class="MathJax_Preview">P_{packet\_size}</span><script type="math/tex">P_{packet\_size}</script></span>는 패킷 크기, <span class="arithmatex"><span class="MathJax_Preview">R_{rate}</span><script type="math/tex">R_{rate}</script></span>는 데이터 전송 속도이다.</p>
<h3 id="_10">시간 동기화 및 클럭 관리</h3>
<p>ROS2는 분산 시스템의 특성상 시간 동기화가 중요한 요소로, 시스템 전반에서 동기된 시간 기준을 제공한다. 각 노드가 독립적으로 실행되기 때문에, 로봇 시스템 내에서 센서 데이터와 제어 명령의 타이밍이 정확히 맞지 않으면 시스템 전체의 성능이 저하될 수 있다. 이를 해결하기 위해 ROS2는 클럭(clock) 및 타이머(timer)를 통해 각 노드 간의 시간 동기화를 지원하며, 이는 자율주행 시스템에서 특히 중요하다.</p>
<p>시간 동기화를 위한 모델은 다음과 같이 정의할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_{sync} = |T_{node1} - T_{node2}|
</div>
<script type="math/tex; mode=display">
T_{sync} = |T_{node1} - T_{node2}|
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">T_{sync}</span><script type="math/tex">T_{sync}</script></span>는 노드 간 시간 차이, <span class="arithmatex"><span class="MathJax_Preview">T_{node1}</span><script type="math/tex">T_{node1}</script></span>과 <span class="arithmatex"><span class="MathJax_Preview">T_{node2}</span><script type="math/tex">T_{node2}</script></span>는 각각의 노드에서 기록된 시간이다.</p>
<h3 id="ros2-os">ROS2와 네이티브 실시간 OS 통합</h3>
<p>ROS2는 실시간 운영체제(RTOS)와의 통합을 통해 실시간성 지원을 강화하였다. 기존의 ROS1에서는 리눅스 운영체제 상에서 실시간 처리가 어려운 부분이 있었으나, ROS2는 RTOS와의 직접적인 통합을 지원하여 하드 리얼타임 제어가 가능하다. 이는 자율주행 차량의 제어와 같은 고성능, 저지연 환경에서 필수적인 요소로 작용한다.</p>
<p>실시간 OS에서의 응답 시간을 나타내는 수식은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
R_{real-time} = \frac{1}{f_{interrupt}} + T_{processing}
</div>
<script type="math/tex; mode=display">
R_{real-time} = \frac{1}{f_{interrupt}} + T_{processing}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">R_{real-time}</span><script type="math/tex">R_{real-time}</script></span>은 실시간 응답 시간, <span class="arithmatex"><span class="MathJax_Preview">f_{interrupt}</span><script type="math/tex">f_{interrupt}</script></span>는 인터럽트 발생 주파수, <span class="arithmatex"><span class="MathJax_Preview">T_{processing}</span><script type="math/tex">T_{processing}</script></span>은 처리 시간이다.</p>
<h3 id="_11">네임스페이스 및 토픽 관리</h3>
<p>ROS2는 네임스페이스(namespace)와 토픽 관리 기능을 개선하여, 대규모 시스템에서도 직관적이고 체계적으로 노드 및 토픽을 관리할 수 있다. 네임스페이스는 노드나 토픽을 그룹화하는 역할을 하며, 이를 통해 시스템의 복잡도를 줄이고, 중복된 이름 충돌을 방지할 수 있다. 또한, 네임스페이스는 각 로봇의 모듈을 독립적으로 관리하고, 여러 로봇이 협력할 때에도 충돌 없이 통신할 수 있도록 해준다.</p>
<p>네임스페이스와 토픽 관리의 관계는 다음과 같이 정의될 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_{namespace} = N_{nodes} \times T_{topics}
</div>
<script type="math/tex; mode=display">
T_{namespace} = N_{nodes} \times T_{topics}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">T_{namespace}</span><script type="math/tex">T_{namespace}</script></span>는 네임스페이스 내의 토픽 수, <span class="arithmatex"><span class="MathJax_Preview">N_{nodes}</span><script type="math/tex">N_{nodes}</script></span>는 노드 수, <span class="arithmatex"><span class="MathJax_Preview">T_{topics}</span><script type="math/tex">T_{topics}</script></span>는 각 노드의 토픽 수이다.</p>
<h3 id="_12">네트워크 대역폭 최적화</h3>
<p>ROS2는 네트워크 대역폭을 최적화하기 위한 다양한 기능을 제공하여, 특히 자율주행 시스템처럼 여러 센서와 노드가 복잡하게 얽힌 환경에서 네트워크 사용량을 최소화할 수 있다. 예를 들어, QoS 설정을 통해 토픽의 신뢰도와 전송 빈도를 제어하여 필요한 데이터만을 전송하도록 설정할 수 있으며, 또한 특정 데이터는 필요 시에만 전송하도록 트리거(trigger)를 설정할 수 있다. 이를 통해 불필요한 데이터 전송을 방지하고, 네트워크 대역폭을 효율적으로 관리할 수 있다.</p>
<p>네트워크 대역폭 최적화 수식은 다음과 같이 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
B_{optimized} = \frac{D_{total}}{T_{transmission}} \times R_{qos}
</div>
<script type="math/tex; mode=display">
B_{optimized} = \frac{D_{total}}{T_{transmission}} \times R_{qos}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">B_{optimized}</span><script type="math/tex">B_{optimized}</script></span>는 최적화된 대역폭 사용량, <span class="arithmatex"><span class="MathJax_Preview">D_{total}</span><script type="math/tex">D_{total}</script></span>는 전송되는 데이터 양, <span class="arithmatex"><span class="MathJax_Preview">T_{transmission}</span><script type="math/tex">T_{transmission}</script></span>은 전송 시간, <span class="arithmatex"><span class="MathJax_Preview">R_{qos}</span><script type="math/tex">R_{qos}</script></span>는 QoS 설정에 따른 최적화 인자이다.</p>
<h3 id="ros2_2">ROS2의 클라이언트 라이브러리 구조</h3>
<p>ROS2는 다양한 언어에서 사용할 수 있는 클라이언트 라이브러리를 제공한다. 대표적으로 C++ 기반의 rclcpp와 Python 기반의 rclpy가 있으며, 이를 통해 개발자는 원하는 언어로 로봇 애플리케이션을 쉽게 개발할 수 있다. 각 클라이언트 라이브러리는 ROS2의 기본 기능을 제공하며, 이를 통해 노드 간 통신, 서비스 호출, 액션(action) 수행 등이 가능하다. 특히 자율주행 시스템에서는 실시간성과 성능이 중요한데, C++ 라이브러리를 사용하면 보다 높은 성능을 기대할 수 있다.</p>
<p>클라이언트 라이브러리의 상호 관계는 다음과 같다:</p>
<div class="mermaid">graph LR;
    A[ROS2 Core] --&gt; B[rclcpp]
    A --&gt; C[rclpy]
    B --&gt; D[노드 1]
    C --&gt; E[노드 2]
</div>
<h3 id="_13">미션 크리티컬한 환경에서의 신뢰성</h3>
<p>ROS2는 미션 크리티컬한 환경에서도 높은 신뢰성을 제공하기 위한 다양한 기능을 갖추고 있다. 특히, DDS 기반의 신뢰성 있는 통신을 통해 각 노드 간의 메시지 전달이 보장되며, QoS 설정을 통해 데이터 유실을 최소화할 수 있다. 또한, ROS2는 다양한 장애 대응 메커니즘을 제공하여, 노드 간의 통신 오류나 시스템 장애가 발생하더라도 자동으로 복구할 수 있는 기능을 지원한다. 자율주행 로봇의 경우, 시스템의 신뢰성은 안전과 직결되기 때문에 이러한 기능이 필수적이다.</p>
<p>신뢰성 있는 통신을 수식으로 나타내면 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
R_{reliability} = f(T_{timeout}, P_{packet\_loss}, Q_{QoS\_reliability})
</div>
<script type="math/tex; mode=display">
R_{reliability} = f(T_{timeout}, P_{packet\_loss}, Q_{QoS\_reliability})
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">R_{reliability}</span><script type="math/tex">R_{reliability}</script></span>는 시스템 신뢰성, <span class="arithmatex"><span class="MathJax_Preview">T_{timeout}</span><script type="math/tex">T_{timeout}</script></span>은 타임아웃 시간, <span class="arithmatex"><span class="MathJax_Preview">P_{packet\_loss}</span><script type="math/tex">P_{packet\_loss}</script></span>는 패킷 손실 확률, <span class="arithmatex"><span class="MathJax_Preview">Q_{QoS\_reliability}</span><script type="math/tex">Q_{QoS\_reliability}</script></span>는 QoS의 신뢰도 설정이다.</p>
<h3 id="_14">로봇 운영 및 유지 보수 지원</h3>
<p>ROS2는 로봇 운영 및 유지 보수 측면에서 여러 가지 개선 사항을 제공한다. 로봇 시스템이 배포되고 운영될 때, 시스템의 상태를 모니터링하고 장애를 즉시 감지하여 대처할 수 있는 기능이 중요하다. ROS2는 노드 상태 모니터링, 실시간 로그 분석, 노드 재시작 등의 기능을 제공하여 로봇 운영 중 발생할 수 있는 이슈에 신속히 대응할 수 있다. 또한, 유지 보수를 위한 리모트 제어 및 시스템 업데이트 기능도 강화되었다.</p>
<p>운영 및 유지 보수에서의 상태 변화는 다음과 같이 표현할 수 있다:</p>
<div class="mermaid">stateDiagram-v2
    [*] --&gt; Running
    Running --&gt; Error : 감지된 오류
    Error --&gt; Maintenance : 유지 보수 작업
    Maintenance --&gt; Running : 시스템 복구
    Error --&gt; [*] : 시스템 종료
</div>
<h3 id="ros2_3">ROS2의 가상화 및 컨테이너화 지원</h3>
<p>ROS2는 가상화 및 컨테이너화 기술을 적극적으로 지원하여 로봇 시스템의 개발, 배포, 운영이 보다 유연하게 이루어질 수 있다. Docker와 같은 컨테이너 기술을 활용하면 ROS2 환경을 쉽게 배포하고, 다양한 플랫폼에서 일관된 환경을 제공할 수 있다. 이를 통해 개발자들은 환경 설정 문제를 최소화하고, 다양한 하드웨어 및 소프트웨어 환경에서 동일한 ROS2 애플리케이션을 실행할 수 있다.</p>
<p>컨테이너화된 ROS2 시스템의 구성은 다음과 같이 나타낼 수 있다.</p>
<div class="mermaid">graph TD;
    A[Host OS] --&gt; B[Docker]
    B --&gt; C[ROS2 Container 1]
    B --&gt; D[ROS2 Container 2]
    C --&gt; E[노드 1]
    D --&gt; F[노드 2]
</div>
<h3 id="ros2_4">ROS2의 하드웨어 가속 지원</h3>
<p>ROS2는 하드웨어 가속 기능을 통해 복잡한 연산을 보다 빠르게 처리할 수 있도록 지원한다. 자율주행 시스템에서는 고속으로 많은 양의 센서 데이터를 처리해야 하기 때문에 CPU만으로는 한계가 있을 수 있다. 이러한 경우 GPU, FPGA, ASIC 등 하드웨어 가속 장치를 활용하여 병렬 연산을 수행할 수 있다. ROS2는 이러한 하드웨어 가속을 위한 인터페이스를 제공하여, 실시간으로 대용량 데이터를 처리할 수 있도록 돕는다.</p>
<p>하드웨어 가속을 통한 처리 성능을 수식으로 나타내면 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
P_{accelerated} = \frac{P_{CPU} + P_{GPU}}{T_{execution}}
</div>
<script type="math/tex; mode=display">
P_{accelerated} = \frac{P_{CPU} + P_{GPU}}{T_{execution}}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">P_{accelerated}</span><script type="math/tex">P_{accelerated}</script></span>는 하드웨어 가속을 통한 성능, <span class="arithmatex"><span class="MathJax_Preview">P_{CPU}</span><script type="math/tex">P_{CPU}</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">P_{GPU}</span><script type="math/tex">P_{GPU}</script></span>는 각각 CPU와 GPU의 처리 성능, <span class="arithmatex"><span class="MathJax_Preview">T_{execution}</span><script type="math/tex">T_{execution}</script></span>은 실행 시간이다.</p>
<br/>
<div aria-label="navigation" class="row wm-article-nav-buttons" role="navigation">
<div class="wm-article-nav pull-right">
<a class="btn btn-xs btn-default pull-right" href="../0102/">
        Next
        <i aria-hidden="true" class="fa fa-chevron-right"></i>
</a>
<a class="btn btn-xs btn-link" href="../0102/">
        ROS2 Humble의 설치 및 환경 설정
      </a>
</div>
<div class="wm-article-nav">
<a class="btn btn-xs btn-default pull-left" href="../../01_preface_ko/">
<i aria-hidden="true" class="fa fa-chevron-left"></i>
        Previous</a><a class="btn btn-xs btn-link" href="../../01_preface_ko/">
        소개
      </a>
</div>
</div>
<br/>
</div>
<footer class="container-fluid wm-page-content">
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>