<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/ros2_humble/chapter_03/0306/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>로컬 및 원격 패키지 관리 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\ub85c\uceec \ud328\ud0a4\uc9c0 \uad00\ub9ac", url: "#_top", children: [
              {title: "\ud328\ud0a4\uc9c0 \uc0dd\uc131", url: "#_2" },
              {title: "\ud328\ud0a4\uc9c0 \ube4c\ub4dc \ubc0f \uc124\uce58", url: "#_3" },
          ]},
          {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uad00\ub9ac", url: "#_4", children: [
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uc124\uce58", url: "#_5" },
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0\uc758 \ubc84\uc804 \uad00\ub9ac", url: "#_6" },
          ]},
          {title: "\ud328\ud0a4\uc9c0 \uc758\uc874\uc131 \ud574\uacb0", url: "#_7", children: [
          ]},
          {title: "\ud328\ud0a4\uc9c0 \uc758\uc874\uc131 \uad00\ub9ac", url: "#_8", children: [
              {title: "\ub85c\uceec \ud328\ud0a4\uc9c0 \uc758\uc874\uc131 \uad00\ub9ac", url: "#_9" },
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uc758\uc874\uc131 \uad00\ub9ac", url: "#_10" },
          ]},
          {title: "\ub85c\uceec \ud328\ud0a4\uc9c0 \uad00\ub9ac \uc804\ub7b5", url: "#_11", children: [
              {title: "\uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4 \ubd84\ub9ac", url: "#_12" },
              {title: "\ud328\ud0a4\uc9c0 \ubc84\uc804 \uad00\ub9ac", url: "#_13" },
          ]},
          {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uad00\ub9ac \uc804\ub7b5", url: "#_14", children: [
              {title: "\uc6d0\uaca9 \uc800\uc7a5\uc18c \ud65c\uc6a9", url: "#_15" },
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uc5c5\ub370\uc774\ud2b8", url: "#_16" },
          ]},
          {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uc758\uc874\uc131 \ud574\uacb0", url: "#_17", children: [
              {title: "rosdep\uc744 \ud1b5\ud55c \uc6d0\uaca9 \uc758\uc874\uc131 \ud574\uacb0", url: "#rosdep" },
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0 \uad00\ub9ac \ub3c4\uad6c", url: "#_18" },
          ]},
          {title: "\ub85c\uceec \ubc0f \uc6d0\uaca9 \ud328\ud0a4\uc9c0 \ud1b5\ud569 \uc804\ub7b5", url: "#_19", children: [
              {title: "\ud328\ud0a4\uc9c0 \uc624\ubc84\ub808\uc774(overlay)", url: "#overlay" },
              {title: "\uc6d0\uaca9 \ud328\ud0a4\uc9c0\uc758 \uc548\uc815\uc131 \ud3c9\uac00", url: "#_20" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../chapter_04/0401/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../chapter_04/0401/" class="btn btn-xs btn-link">
        네임스페이스의 개념과 중요성
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0305/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0305/" class="btn btn-xs btn-link">
        패키지 의존성 관리 및 수정 방법
      </a>
    </div>
    
  </div>

    

    <h3 id="_1">로컬 패키지 관리</h3>
<p>로컬에서 ROS2 패키지를 관리하는 과정은 ROS2 시스템의 성능을 최적화하고 유지하기 위해 필수적인 작업이다. 로컬 패키지를 관리하기 위해서는 ROS2 워크스페이스 내에서 패키지를 생성, 빌드, 업데이트, 삭제하는 방법을 이해해야 한다. 이 과정에서 <code>colcon</code> 빌드 도구와 같은 ROS2 도구들을 효과적으로 활용하는 것이 중요하다.</p>
<h4 id="_2">패키지 생성</h4>
<p>로컬에서 패키지를 생성하기 위해서는 ROS2 표준 구조를 따르는 패키지를 생성해야 한다. 패키지 생성 명령어는 다음과 같다:</p>
<pre><code class="language-bash">ros2 pkg create &lt;패키지 이름&gt; --build-type &lt;빌드 타입&gt;
</code></pre>
<p>빌드 타입은 <code>ament_cmake</code> 또는 <code>ament_python</code> 등을 사용할 수 있다. 패키지 생성 후에는 해당 패키지의 <code>package.xml</code> 파일을 수정하여 필요한 의존성을 추가하거나, <code>CMakeLists.txt</code> 파일을 통해 빌드 설정을 할 수 있다.</p>
<h4 id="_3">패키지 빌드 및 설치</h4>
<p>로컬 패키지를 빌드하기 위해서는 <code>colcon build</code> 명령을 사용한다. 이는 ROS2에서 패키지를 빌드하고 실행 가능한 바이너리를 생성하는 도구이다. 빌드 후 패키지를 설치하기 위해서는 다음 명령을 사용한다:</p>
<pre><code class="language-bash">colcon build --packages-select &lt;패키지 이름&gt;
source install/setup.bash
</code></pre>
<p>이 과정에서 워크스페이스 내의 패키지 의존성 해결 및 빌드 타겟 설정을 할 수 있다.</p>
<h3 id="_4">원격 패키지 관리</h3>
<p>원격 패키지 관리는 로컬에서 작업하지 않고, 외부 저장소나 ROS2 빌드 팜에서 제공하는 패키지를 관리하는 것을 말한다. 이는 여러 프로젝트에서 공통적으로 사용되는 패키지를 공유하거나, 다른 개발자의 패키지를 사용할 때 필요하다.</p>
<h4 id="_5">원격 패키지 설치</h4>
<p>ROS2에서는 <code>apt</code> 패키지 관리자를 통해 원격 패키지를 쉽게 설치할 수 있다. 다음 명령을 사용하여 원격 패키지를 설치할 수 있다:</p>
<pre><code class="language-bash">sudo apt install ros-humble-&lt;패키지 이름&gt;
</code></pre>
<p>이는 ROS2 공식 저장소에서 제공하는 패키지를 설치하는 방식이다. 또한, 직접 원격 저장소에서 패키지를 클론하여 로컬에서 빌드하는 방법도 있다.</p>
<pre><code class="language-bash">git clone &lt;원격 저장소 URL&gt;
</code></pre>
<h4 id="_6">원격 패키지의 버전 관리</h4>
<p>원격 패키지를 사용하는 경우 버전 관리를 철저히 해야 한다. 패키지의 버전 충돌이나 의존성 문제를 피하기 위해서는 <code>package.xml</code> 파일에 정확한 버전 정보를 명시하는 것이 중요하다. 이를 통해 패키지 의존성을 충족하는 버전을 자동으로 설치할 수 있다.</p>
<pre><code class="language-xml">&lt;depend version=&quot;&gt;=1.0.0&quot;&gt;example_package&lt;/depend&gt;
</code></pre>
<p>이 명령은 <code>example_package</code>가 버전 1.0.0 이상일 때만 의존성이 충족되는 것을 의미한다.</p>
<h3 id="_7">패키지 의존성 해결</h3>
<p>패키지 의존성을 해결하는 과정은 <code>package.xml</code> 파일에서 선언된 의존성을 기준으로 ROS2 시스템이 필요한 패키지를 다운로드하고 설치하는 것이다. 의존성 충돌을 방지하기 위해서는 패키지의 버전을 신중하게 설정하고, 빌드 도구에서 의존성 해결에 실패할 경우 수동으로 해결해야 한다.</p>
<h3 id="_8">패키지 의존성 관리</h3>
<h4 id="_9">로컬 패키지 의존성 관리</h4>
<p>로컬 패키지 의존성을 관리하기 위해서는 <code>package.xml</code> 파일에서 필요한 패키지를 정의해야 한다. 이를 통해 패키지 빌드 시 자동으로 의존성을 확인하고, 충족되지 않는 경우 알림을 받게 된다. <code>package.xml</code> 파일에서 의존성을 설정하는 예는 다음과 같다:</p>
<pre><code class="language-xml">&lt;build_depend&gt;example_package&lt;/build_depend&gt;
&lt;exec_depend&gt;example_runtime_package&lt;/exec_depend&gt;
</code></pre>
<p>위 예시는 패키지를 빌드하는 동안 <code>example_package</code>가 필요하고, 실행 시에는 <code>example_runtime_package</code>가 필요함을 의미한다. 의존성 관리에서는 빌드 시 의존성과 실행 시 의존성을 구분하는 것이 중요하다.</p>
<p>ROS2에서는 <code>colcon</code>을 사용하여 패키지를 빌드할 때 의존성을 자동으로 해결하지만, 필요 시 의존성 충돌이 발생할 경우 수동으로 패키지의 버전을 명시하여 충돌을 해결할 수 있다.</p>
<h4 id="_10">원격 패키지 의존성 관리</h4>
<p>원격 패키지의 의존성은 로컬과 달리 네트워크 상에서 패키지를 다운로드하고 설치해야 하므로 <code>rosdep</code>과 같은 도구를 사용하여 의존성을 해결한다. <code>rosdep</code>은 ROS2에서 패키지 의존성을 관리하는 표준 도구로, 이를 사용하여 의존성을 자동으로 설치할 수 있다.</p>
<pre><code class="language-bash">rosdep install --from-paths src --ignore-src -r -y
</code></pre>
<p>이 명령은 ROS2 패키지가 있는 <code>src</code> 디렉토리에서 필요한 모든 의존성을 자동으로 설치한다. 또한, ROS2는 다양한 운영 체제에서 의존성을 해결하기 위해 <code>rosdep</code>을 사용하므로, 특정 운영 체제에서만 지원되는 패키지가 있을 경우 이를 명시적으로 처리할 수 있다.</p>
<h3 id="_11">로컬 패키지 관리 전략</h3>
<h4 id="_12">워크스페이스 분리</h4>
<p>로컬에서 여러 프로젝트를 관리하는 경우, 각 프로젝트마다 별도의 워크스페이스를 사용하는 것이 권장된다. 워크스페이스를 분리하면 의존성 충돌을 방지할 수 있으며, 각 워크스페이스의 패키지 간섭을 최소화할 수 있다. 이를 위해 각 워크스페이스의 <code>src</code> 디렉토리에 패키지를 저장하고, 각각의 워크스페이스를 독립적으로 빌드한다.</p>
<pre><code class="language-bash">mkdir -p ~/ros2_ws/src
cd ~/ros2_ws
colcon build
</code></pre>
<p>워크스페이스 간의 의존성을 관리하는 것이 중요한데, 필요 시에는 워크스페이스 간 패키지 공유를 위해 패키지를 <code>overlay</code> 하는 방법을 사용할 수 있다.</p>
<h4 id="_13">패키지 버전 관리</h4>
<p>로컬 패키지의 버전 관리는 소스 코드 레포지토리에서 버전 태그를 사용하거나, 패키지의 <code>package.xml</code> 파일에서 명시적인 버전을 설정하여 관리할 수 있다. 이때 <code>package.xml</code> 파일의 <code>&lt;version&gt;</code> 태그를 사용하여 명시적으로 버전을 설정할 수 있으며, 패키지의 변경 사항에 따라 버전 번호를 갱신해야 한다.</p>
<pre><code class="language-xml">&lt;version&gt;1.0.0&lt;/version&gt;
</code></pre>
<p>이러한 방식으로 패키지의 변경 이력을 관리하고, 다른 패키지에서 해당 버전 정보를 참고할 수 있다.</p>
<h3 id="_14">원격 패키지 관리 전략</h3>
<h4 id="_15">원격 저장소 활용</h4>
<p>원격 패키지를 관리할 때, 주로 GitHub과 같은 원격 저장소를 활용한다. ROS2 패키지들은 오픈소스 커뮤니티에서 활발히 개발되며, 이 과정에서 다양한 버전의 패키지를 원격 저장소에서 관리하게 된다. 원격 저장소에서 패키지를 클론하는 방법은 다음과 같다:</p>
<pre><code class="language-bash">git clone &lt;원격 저장소 URL&gt;
</code></pre>
<p>이 방식으로 원격 패키지를 가져온 후 로컬에서 빌드하여 사용할 수 있다. 또한, 원격 패키지 관리 시 각 패키지의 브랜치, 태그를 통해 패키지의 버전을 명확하게 구분할 수 있다. 예를 들어, 특정 브랜치 또는 태그를 지정하여 클론할 수 있다:</p>
<pre><code class="language-bash">git clone -b &lt;브랜치 이름&gt; &lt;원격 저장소 URL&gt;
git checkout tags/&lt;태그 이름&gt;
</code></pre>
<p>이를 통해 특정 버전의 패키지를 관리할 수 있다.</p>
<h4 id="_16">원격 패키지 업데이트</h4>
<p>ROS2 패키지는 지속적으로 업데이트되며, 원격 저장소에 새로운 버전이 릴리즈될 경우 이를 로컬 환경으로 반영할 필요가 있다. 원격 저장소에서 패키지를 클론한 후 패키지를 최신 버전으로 업데이트하려면 다음 명령을 사용할 수 있다:</p>
<pre><code class="language-bash">git pull origin &lt;브랜치 이름&gt;
</code></pre>
<p>이를 통해 원격 저장소의 최신 변경 사항을 가져올 수 있다. 그러나 패키지 업데이트 시, 의존성 충돌이 발생할 수 있으므로 주의가 필요하다. 특히, 패키지의 종속성이 변경된 경우 <code>package.xml</code> 파일을 업데이트하고, 빌드 과정을 다시 실행해야 한다.</p>
<h3 id="_17">원격 패키지 의존성 해결</h3>
<h4 id="rosdep"><code>rosdep</code>을 통한 원격 의존성 해결</h4>
<p>원격 패키지의 경우에도 의존성 해결이 중요한 문제이다. 원격 패키지를 사용할 때 의존성이 자동으로 해결되지 않으면, 수동으로 패키지를 다운로드하거나 추가로 설치해야 한다. 이를 방지하기 위해 ROS2에서는 <code>rosdep</code>이라는 도구를 사용하여 패키지의 의존성을 자동으로 설치할 수 있다.</p>
<p><code>rosdep</code>은 ROS 패키지의 의존성을 정의하고 이를 설치하는데 사용되며, 원격 저장소에서 패키지를 클론한 후 <code>rosdep</code>을 통해 의존성을 설치할 수 있다. 다음 명령을 사용하여 의존성을 설치한다:</p>
<pre><code class="language-bash">rosdep install --from-paths src --ignore-src -r -y
</code></pre>
<p>이 명령은 <code>src</code> 디렉토리 내에서 모든 ROS2 패키지의 의존성을 자동으로 설치하며, 특정 패키지를 무시하거나 별도로 의존성을 해결하는 옵션도 제공한다.</p>
<h4 id="_18">원격 패키지 관리 도구</h4>
<p>원격 패키지를 관리하기 위한 또 다른 중요한 도구로는 <code>vcs</code>(version control system) 도구가 있다. <code>vcs</code>는 여러 개의 Git 저장소를 한 번에 관리할 수 있도록 도와준다. 여러 패키지를 포함한 프로젝트에서는 다수의 원격 저장소를 관리하는 일이 복잡해질 수 있는데, 이를 <code>vcs</code>를 사용해 효율적으로 관리할 수 있다.</p>
<p><code>vcs</code>를 사용하여 여러 패키지를 관리하는 기본적인 예는 다음과 같다:</p>
<pre><code class="language-bash">vcs import &lt; src/ &lt; 패키지 목록 파일
</code></pre>
<p>이 명령은 패키지 목록 파일에 명시된 여러 원격 저장소에서 패키지를 클론하여 관리한다. 패키지 목록 파일은 <code>.repos</code> 확장자를 가지며, 각 패키지의 원격 저장소 정보를 담고 있다.</p>
<h3 id="_19">로컬 및 원격 패키지 통합 전략</h3>
<h4 id="overlay">패키지 오버레이(overlay)</h4>
<p>로컬과 원격 패키지를 통합 관리할 때 유용한 방법 중 하나는 오버레이(overlay) 기법이다. ROS2에서는 여러 워크스페이스를 중첩시켜 사용하는 방식으로, 오버레이 워크스페이스를 설정하여 여러 패키지 집합을 효율적으로 관리할 수 있다. 오버레이 방식에서는 상위 워크스페이스의 패키지를 덮어쓰는 방식으로 하위 워크스페이스를 사용하게 된다.</p>
<p>예를 들어, 다음과 같이 상위 워크스페이스에서 하위 워크스페이스의 패키지를 덮어쓸 수 있다:</p>
<pre><code class="language-bash">source /path/to/upper_ws/install/setup.bash
source /path/to/lower_ws/install/setup.bash
</code></pre>
<p>이러한 오버레이 전략을 통해 기존 로컬 패키지와 원격 패키지를 함께 사용할 수 있으며, 특정 패키지만 업데이트하거나 테스트할 때 유용하다.</p>
<h4 id="_20">원격 패키지의 안정성 평가</h4>
<p>원격 패키지를 통합하는 경우, 각 패키지의 안정성을 확인하는 것이 중요하다. 원격 패키지는 각기 다른 개발자가 관리하는 경우가 많으며, 새로운 패키지를 도입하기 전에 해당 패키지의 버전 관리 상태, 문서화, 이슈 해결 속도 등을 평가하는 것이 필요하다. 안정성이 검증된 패키지만을 통합하여 사용함으로써 시스템 전체의 안정성을 유지할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../chapter_04/0401/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../chapter_04/0401/" class="btn btn-xs btn-link">
        네임스페이스의 개념과 중요성
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0305/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0305/" class="btn btn-xs btn-link">
        패키지 의존성 관리 및 수정 방법
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>