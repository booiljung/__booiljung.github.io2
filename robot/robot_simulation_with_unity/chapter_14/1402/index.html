<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/robot_simulation_with_unity/chapter_14/1402/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>데이터 시각화 및 분석 도구 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "1. \uc2dc\uac01\ud654 \ub3c4\uad6c \uac1c\uc694", url: "#_top", children: [
          ]},
          {title: "2. \uadf8\ub798\ud504\ub97c \ud1b5\ud55c \ub370\uc774\ud130 \uc2dc\uac01\ud654", url: "#2", children: [
              {title: "\uc608\uc2dc: Unity\uc5d0\uc11c \uc120\ud615 \uadf8\ub798\ud504 \uadf8\ub9ac\uae30", url: "#unity" },
          ]},
          {title: "3. 3D \uacf5\uac04\uc5d0\uc11c\uc758 \ub370\uc774\ud130 \uc2dc\uac01\ud654", url: "#3-3d", children: [
          ]},
          {title: "4. \uc678\ubd80 \ub3c4\uad6c\uc640\uc758 \uc5f0\ub3d9", url: "#4", children: [
              {title: "CSV \ud615\uc2dd\uc73c\ub85c \ub370\uc774\ud130 \ub0b4\ubcf4\ub0b4\uae30", url: "#csv" },
              {title: "Python\uc5d0\uc11c CSV \ub370\uc774\ud130\ub97c \uc2dc\uac01\ud654\ud558\uae30", url: "#python-csv" },
          ]},
          {title: "5. \uc218\uc9d1\ub41c \ub370\uc774\ud130\uc758 \ud1b5\uacc4 \ubd84\uc11d", url: "#5", children: [
              {title: "\ud3c9\uade0\uacfc \ubd84\uc0b0", url: "#_1" },
              {title: "\uc13c\uc11c \ub178\uc774\uc988 \ubd84\uc11d", url: "#_2" },
          ]},
          {title: "6. \uba38\uc2e0\ub7ec\ub2dd\uc744 \uc704\ud55c \ub370\uc774\ud130 \uc804\ucc98\ub9ac", url: "#6", children: [
              {title: "\ub370\uc774\ud130 \uc815\uaddc\ud654", url: "#_3" },
              {title: "\ub370\uc774\ud130 \ud45c\uc900\ud654", url: "#_4" },
              {title: "\uacb0\uce21\uce58 \ucc98\ub9ac", url: "#_5" },
          ]},
          {title: "7. \uba38\uc2e0\ub7ec\ub2dd\uc744 \ud65c\uc6a9\ud55c \ub370\uc774\ud130 \ubd84\uc11d", url: "#7", children: [
              {title: "\uc608\uce21 \ubaa8\ub378 \ud6c8\ub828", url: "#_6" },
              {title: "\ubd84\ub958 \ubaa8\ub378 \ud6c8\ub828", url: "#_7" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../1403/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../1403/" class="btn btn-xs btn-link">
        머신러닝을 위한 시뮬레이션 데이터 처리
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../1401/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../1401/" class="btn btn-xs btn-link">
        Unity에서 시뮬레이션 데이터 로깅
      </a>
    </div>
    
  </div>

    

    <p>데이터 시각화와 분석은 로봇 시뮬레이션의 성능을 평가하고, 시뮬레이션 결과에서 통찰을 얻는 데 매우 중요한 단계이다. Unity에서 로봇 시뮬레이션을 수행할 때, 다양한 방식으로 데이터를 시각화하고 분석할 수 있다. 이 섹션에서는 Unity에서 사용할 수 있는 다양한 시각화 도구와 분석 방법에 대해 설명한다.</p>
<h3 id="1">1. 시각화 도구 개요</h3>
<p>Unity에서 시뮬레이션 데이터를 시각화하는 주요 도구는 다음과 같다:</p>
<ul>
<li><strong>Unity 자체 제공 시각화 도구</strong>: Unity에서 제공하는 그래픽 엔진과 UI 도구를 이용해 실시간 데이터를 시각화할 수 있다.</li>
<li><strong>그래프 플로팅 도구</strong>: Unity에서 그래프를 그리기 위한 라이브러리나 외부 도구를 사용하여 로봇의 센서 데이터 및 상태 변화를 실시간으로 시각화할 수 있다.</li>
<li><strong>3D 모델 및 포인트 클라우드 시각화</strong>: LiDAR나 카메라 데이터를 3D 공간에서 시각화하여 환경 인식을 돕는다.</li>
<li><strong>외부 도구와의 연동</strong>: Unity 데이터를 CSV나 JSON으로 저장하고, 이를 Python의 Matplotlib, Seaborn, 또는 MATLAB 같은 도구로 불러와 시각화할 수 있다.</li>
</ul>
<h3 id="2">2. 그래프를 통한 데이터 시각화</h3>
<p>Unity에서는 직접적인 데이터 시각화 도구가 부족하기 때문에, 그래프 플로팅을 위해서는 별도의 스크립팅이나 외부 라이브러리의 도움이 필요하다. </p>
<h4 id="unity">예시: Unity에서 선형 그래프 그리기</h4>
<p>시뮬레이션 동안 수집된 데이터(예: 로봇의 속도 변화나 센서 측정값)를 실시간으로 그래프 형태로 보여주려면, C# 스크립트를 통해 데이터를 저장하고, Unity의 UI 시스템을 이용하여 그래프를 그릴 수 있다. 다음은 기본적인 선형 그래프의 예시이다.</p>
<pre><code class="language-csharp">public class DataVisualizer : MonoBehaviour
{
    public LineRenderer lineRenderer;
    private List&lt;Vector3&gt; points = new List&lt;Vector3&gt;();

    void Update()
    {
        // 새로운 데이터를 받아서 리스트에 추가
        float time = Time.time;
        float value = GetSensorData(); // 가상의 센서 데이터 함수

        points.Add(new Vector3(time, value, 0));
        lineRenderer.positionCount = points.Count;
        lineRenderer.SetPositions(points.ToArray());
    }
}
</code></pre>
<p>이 예시에서는 시간에 따른 데이터를 선형 그래프로 표시하고 있으며, LineRenderer를 사용하여 실시간으로 데이터를 시각화하고 있다. 데이터가 실시간으로 갱신되면서 그래프에 새로운 포인트가 추가된다.</p>
<h3 id="3-3d">3. 3D 공간에서의 데이터 시각화</h3>
<p>3D 시각화는 특히 로봇의 환경 인식 데이터를 처리할 때 매우 유용하다. 예를 들어, LiDAR 데이터를 포인트 클라우드로 시각화하여 로봇 주변의 장애물이나 지형을 확인할 수 있다. Unity에서 3D 포인트 클라우드를 구현하는 방식은 다음과 같다:</p>
<ul>
<li><strong>LiDAR 포인트 클라우드 시각화</strong>: 센서가 측정한 거리 데이터를 포인트로 변환하고, 이를 3D 공간에서 그려서 주변 환경을 표현한다.</li>
</ul>
<pre><code class="language-csharp">public class LiDARVisualizer : MonoBehaviour
{
    public GameObject pointPrefab; // 포인트 클라우드를 위한 프리팹
    private List&lt;GameObject&gt; points = new List&lt;GameObject&gt;();

    void Update()
    {
        // LiDAR 데이터 수집 (예: 360도 스캔 데이터)
        List&lt;Vector3&gt; lidarData = GetLiDARData();

        foreach (Vector3 point in lidarData)
        {
            GameObject pointObject = Instantiate(pointPrefab, point, Quaternion.identity);
            points.Add(pointObject);
        }
    }
}
</code></pre>
<p>이 스크립트는 LiDAR 데이터를 3D 공간에서 작은 점으로 시각화하는 방식이다. 각 측정값은 하나의 포인트로 변환되어 3D 좌표에 배치되며, 실시간으로 갱신된다.</p>
<h3 id="4">4. 외부 도구와의 연동</h3>
<p>Unity에서 생성된 시뮬레이션 데이터를 분석하거나 복잡한 시각화를 수행하기 위해, 데이터를 외부 도구로 내보내는 것도 유용하다. 예를 들어, CSV, JSON 형식으로 데이터를 저장한 후 이를 외부 프로그램에서 불러와 분석할 수 있다. </p>
<h4 id="csv">CSV 형식으로 데이터 내보내기</h4>
<p>Unity에서 데이터를 CSV 파일로 내보내는 것은 매우 간단한다. 다음은 C# 코드에서 시뮬레이션 데이터를 CSV로 저장하는 예제이다:</p>
<pre><code class="language-csharp">using System.IO;

public class DataExporter : MonoBehaviour
{
    private string filePath = &quot;Assets/SimulationData.csv&quot;;

    void Start()
    {
        if (!File.Exists(filePath))
        {
            File.WriteAllText(filePath, &quot;Time,SensorValue\n&quot;);
        }
    }

    void Update()
    {
        float time = Time.time;
        float sensorValue = GetSensorData(); // 가상의 센서 데이터 함수
        string dataLine = string.Format(&quot;{0},{1}\n&quot;, time, sensorValue);

        File.AppendAllText(filePath, dataLine);
    }
}
</code></pre>
<p>이 코드에서는 시뮬레이션 시간과 센서 데이터를 매 프레임마다 CSV 파일에 저장한다. 나중에 이 데이터를 Python, MATLAB, R 등의 분석 도구로 불러와서 시각화할 수 있다.</p>
<h4 id="python-csv">Python에서 CSV 데이터를 시각화하기</h4>
<p>Python의 Matplotlib를 사용하여 Unity에서 생성된 CSV 데이터를 시각화할 수 있다. 다음은 간단한 예시이다:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt
import pandas as pd

# CSV 파일 불러오기
data = pd.read_csv('SimulationData.csv')

# 시간 vs 센서값 그래프 그리기
plt.plot(data['Time'], data['SensorValue'])
plt.xlabel('Time (s)')
plt.ylabel('Sensor Value')
plt.title('Sensor Data Over Time')
plt.show()
</code></pre>
<p>이 코드를 실행하면 Unity에서 기록된 센서 데이터를 시간에 따라 그래프로 시각화할 수 있다. 이처럼 Unity는 자체 시각화 도구 외에도 다양한 외부 분석 도구와 연동할 수 있다.</p>
<h3 id="5">5. 수집된 데이터의 통계 분석</h3>
<p>Unity에서 수집된 시뮬레이션 데이터를 분석할 때, 데이터를 단순히 시각화하는 것 외에도 다양한 통계 분석 기법을 적용할 수 있다. 다음은 기본적인 통계 분석 기법 몇 가지이다:</p>
<h4 id="_1">평균과 분산</h4>
<p>수집된 센서 데이터의 평균값과 분산을 계산하면 시스템의 안정성과 정확성을 평가할 수 있다. 예를 들어, 센서 데이터 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x} = [x_1, x_2, \ldots, x_n]</span><script type="math/tex">\mathbf{x} = [x_1, x_2, \ldots, x_n]</script></span>가 있을 때, 평균 <span class="arithmatex"><span class="MathJax_Preview">\mu</span><script type="math/tex">\mu</script></span>와 분산 <span class="arithmatex"><span class="MathJax_Preview">\sigma^2</span><script type="math/tex">\sigma^2</script></span>는 다음과 같이 계산할 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mu = \frac{1}{n} \sum_{i=1}^{n} x_i
</div>
<script type="math/tex; mode=display">
\mu = \frac{1}{n} \sum_{i=1}^{n} x_i
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
\sigma^2 = \frac{1}{n} \sum_{i=1}^{n} (x_i - \mu)^2
</div>
<script type="math/tex; mode=display">
\sigma^2 = \frac{1}{n} \sum_{i=1}^{n} (x_i - \mu)^2
</script>
</div>
<p>이러한 통계값을 계산하여 센서의 데이터가 얼마나 일정하게 유지되는지, 혹은 외부 요인에 의해 얼마나 변동하는지를 파악할 수 있다.</p>
<h4 id="_2">센서 노이즈 분석</h4>
<p>센서 데이터에는 노이즈가 포함될 수 있다. 노이즈 수준을 분석하기 위해서는, 데이터의 분포를 확인하거나 히스토그램을 그려서 각 데이터가 얼마나 일정하게 분포되는지 확인할 수 있다. </p>
<p>다음은 Python을 사용하여 센서 데이터의 히스토그램을 그리는 예시이다:</p>
<pre><code class="language-python">import matplotlib.pyplot as plt

# 센서 데이터 히스토그램 그리기
plt.hist(data['SensorValue'], bins=50)
plt.xlabel('Sensor Value')
plt.ylabel('Frequency')
plt.title('Sensor Value Distribution')
plt.show()
</code></pre>
<p>이 히스토그램을 통해 센서 데이터의 분포를 확인할 수 있으며, 센서 노이즈가 발생하는 패턴을 분석할 수 있다.</p>
<h3 id="6">6. 머신러닝을 위한 데이터 전처리</h3>
<p>로봇 시뮬레이션에서 수집한 데이터를 기반으로 머신러닝 모델을 훈련시키기 전에, 데이터를 적절히 전처리하는 것이 중요하다. 데이터 전처리는 분석 과정에서 매우 중요한 단계로, 머신러닝 모델의 성능에 큰 영향을 미친다. Unity에서 수집한 데이터가 머신러닝 모델에 사용될 때, 다음과 같은 주요 전처리 과정을 고려해야 한다.</p>
<h4 id="_3">데이터 정규화</h4>
<p>센서 데이터나 시뮬레이션 결과는 서로 다른 범위와 단위를 가질 수 있기 때문에, 데이터를 정규화(normalization)하거나 표준화(standardization)하여 모델 훈련에 적합한 형태로 만드는 것이 필요하다. 정규화는 데이터를 0과 1 사이의 범위로 변환하는 방법이며, 다음 식을 통해 계산된다.</p>
<p>정규화된 값 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_{\text{norm}}</span><script type="math/tex">\mathbf{x}_{\text{norm}}</script></span>는 다음과 같이 계산된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{x}_{\text{norm}} = \frac{\mathbf{x} - \min(\mathbf{x})}{\max(\mathbf{x}) - \min(\mathbf{x})}
</div>
<script type="math/tex; mode=display">
\mathbf{x}_{\text{norm}} = \frac{\mathbf{x} - \min(\mathbf{x})}{\max(\mathbf{x}) - \min(\mathbf{x})}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\min(\mathbf{x})</span><script type="math/tex">\min(\mathbf{x})</script></span>: 데이터에서 최소값
- <span class="arithmatex"><span class="MathJax_Preview">\max(\mathbf{x})</span><script type="math/tex">\max(\mathbf{x})</script></span>: 데이터에서 최대값</p>
<h4 id="_4">데이터 표준화</h4>
<p>표준화는 데이터를 평균이 0이고, 표준 편차가 1인 형태로 변환하는 과정이다. 이를 통해 각 데이터가 동일한 분포를 따르게 할 수 있다. 표준화된 데이터 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_{\text{std}}</span><script type="math/tex">\mathbf{x}_{\text{std}}</script></span>는 다음과 같이 계산된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{x}_{\text{std}} = \frac{\mathbf{x} - \mu}{\sigma}
</div>
<script type="math/tex; mode=display">
\mathbf{x}_{\text{std}} = \frac{\mathbf{x} - \mu}{\sigma}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mu</span><script type="math/tex">\mu</script></span>: 데이터의 평균
- <span class="arithmatex"><span class="MathJax_Preview">\sigma</span><script type="math/tex">\sigma</script></span>: 데이터의 표준 편차</p>
<p>이 과정을 거치면 데이터의 크기 차이로 인해 학습 과정에서 발생할 수 있는 문제를 줄일 수 있다.</p>
<h4 id="_5">결측치 처리</h4>
<p>로봇 시뮬레이션 중 센서 오류나 시스템 이상으로 인해 일부 데이터가 결측치로 기록될 수 있다. 머신러닝 모델에 결측치가 포함되면 학습 과정에서 오류가 발생할 수 있으므로, 이를 처리해야 한다. 결측치 처리 방법으로는 다음과 같은 방법이 있다:</p>
<ul>
<li><strong>결측치 제거</strong>: 결측치가 포함된 데이터를 제외하고 훈련 데이터를 구성한다.</li>
<li><strong>결측치 대체</strong>: 결측치를 데이터의 평균, 중앙값 등으로 대체하여 훈련에 사용한다.</li>
</ul>
<p>Python에서 결측치를 대체하는 예시는 다음과 같다:</p>
<pre><code class="language-python">import pandas as pd

# 결측치를 평균값으로 대체
data['SensorValue'].fillna(data['SensorValue'].mean(), inplace=True)
</code></pre>
<h3 id="7">7. 머신러닝을 활용한 데이터 분석</h3>
<p>Unity에서 수집한 데이터를 기반으로 머신러닝 모델을 훈련시켜 다양한 분석을 수행할 수 있다. 특히, 로봇 시뮬레이션 데이터는 로봇의 행동을 예측하거나 특정 작업의 성능을 향상시키는 데 유용하게 사용된다.</p>
<h4 id="_6">예측 모델 훈련</h4>
<p>예를 들어, 로봇의 이동 경로 데이터를 학습하여 향후 경로를 예측하는 회귀 모델을 구축할 수 있다. 회귀 모델은 입력 데이터 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{X}</span><script type="math/tex">\mathbf{X}</script></span>에 대해 연속적인 출력값 <span class="arithmatex"><span class="MathJax_Preview">y</span><script type="math/tex">y</script></span>를 예측하는데, 이때 선형 회귀 모델은 다음과 같은 수식으로 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
y = \mathbf{w}^\top \mathbf{X} + b
</div>
<script type="math/tex; mode=display">
y = \mathbf{w}^\top \mathbf{X} + b
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{w}</span><script type="math/tex">\mathbf{w}</script></span>: 가중치 벡터
- <span class="arithmatex"><span class="MathJax_Preview">b</span><script type="math/tex">b</script></span>: 절편</p>
<p>Python에서 선형 회귀 모델을 훈련하는 간단한 예시는 다음과 같다:</p>
<pre><code class="language-python">from sklearn.linear_model import LinearRegression

# 데이터 준비
X = data[['Time']].values
y = data['SensorValue'].values

# 선형 회귀 모델 훈련
model = LinearRegression()
model.fit(X, y)

# 예측
y_pred = model.predict(X)
</code></pre>
<p>이 모델은 시간에 따른 센서 값을 예측하는데 사용될 수 있으며, 이를 통해 로봇의 상태를 예측하거나 시뮬레이션 성능을 평가할 수 있다.</p>
<h4 id="_7">분류 모델 훈련</h4>
<p>또한, 시뮬레이션 데이터를 기반으로 로봇의 동작 상태를 분류하는 모델을 만들 수도 있다. 예를 들어, 로봇이 특정 경로를 따라 움직이는 동안 발생하는 오류를 분류하거나, 센서 데이터를 기반으로 로봇이 어떤 환경에 처해 있는지 파악할 수 있다.</p>
<p>Python에서 분류 모델을 훈련하는 간단한 예시는 다음과 같다:</p>
<pre><code class="language-python">from sklearn.ensemble import RandomForestClassifier

# 데이터 준비
X = data[['Time', 'SensorValue']].values
y = data['Label'].values  # 레이블: 정상/오류

# 랜덤 포레스트 모델 훈련
model = RandomForestClassifier()
model.fit(X, y)

# 예측
y_pred = model.predict(X)
</code></pre>
<p>이와 같이 Unity에서 수집한 데이터를 기반으로 다양한 머신러닝 기법을 활용해 시뮬레이션 결과를 분석하고, 예측 모델을 구축할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../1403/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../1403/" class="btn btn-xs btn-link">
        머신러닝을 위한 시뮬레이션 데이터 처리
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../1401/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../1401/" class="btn btn-xs btn-link">
        Unity에서 시뮬레이션 데이터 로깅
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>