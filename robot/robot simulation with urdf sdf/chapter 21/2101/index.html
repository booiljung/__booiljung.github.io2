<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/robot%20simulation%20with%20urdf%20sdf/chapter%2021/2101/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Gazebo 설치 및 기본 설정 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Gazebo \uc124\uce58", url: "#_top", children: [
              {title: "1. \uc2dc\uc2a4\ud15c \uc5c5\ub370\uc774\ud2b8", url: "#1" },
              {title: "2. Gazebo \ud328\ud0a4\uc9c0 \uc124\uce58", url: "#2-gazebo" },
              {title: "3. Gazebo \uc124\uce58 \ud655\uc778", url: "#3-gazebo" },
          ]},
          {title: "Gazebo \uae30\ubcf8 \uc124\uc815", url: "#gazebo_1", children: [
              {title: "1. \ud658\uacbd \ubcc0\uc218 \uc124\uc815", url: "#1_1" },
              {title: "2. SDF \ubc0f URDF \ud30c\uc77c \ub85c\ub4dc", url: "#2-sdf-urdf" },
          ]},
          {title: "3. Gazebo \ubb3c\ub9ac \uc5d4\uc9c4 \uc124\uc815", url: "#3-gazebo_1", children: [
              {title: "\ubb3c\ub9ac \uc5d4\uc9c4 \uc124\uc815 \ud30c\uc77c", url: "#_1" },
          ]},
          {title: "4. Gazebo \ud50c\ub7ec\uadf8\uc778 \uc124\uc815", url: "#4-gazebo", children: [
              {title: "URDF\uc5d0\uc11c \ud50c\ub7ec\uadf8\uc778 \uc124\uc815", url: "#urdf" },
          ]},
          {title: "5. Gazebo \uc6d4\ub4dc \ud30c\uc77c \uc124\uc815", url: "#5-gazebo", children: [
              {title: "\uae30\ubcf8\uc801\uc778 world \ud30c\uc77c \uc608\uc2dc", url: "#world" },
          ]},
          {title: "6. \uc2dc\ubbac\ub808\uc774\uc158 \ud658\uacbd \ucd5c\uc801\ud654", url: "#6", children: [
              {title: "\uadf8\ub798\ud53d \uc124\uc815", url: "#_2" },
              {title: "CPU \ubc0f \uba54\ubaa8\ub9ac \uad00\ub9ac", url: "#cpu" },
          ]},
          {title: "7. Gazebo \uc2dc\uc791 \uc2a4\ud06c\ub9bd\ud2b8 \uc791\uc131", url: "#7-gazebo", children: [
              {title: "\uae30\ubcf8\uc801\uc778 Gazebo \uc2dc\uc791 \uc2a4\ud06c\ub9bd\ud2b8", url: "#gazebo_2" },
              {title: "\uc790\ub3d9\uc73c\ub85c URDF \ud30c\uc77c \ub85c\ub4dc\ud558\uae30", url: "#urdf_1" },
          ]},
          {title: "8. Gazebo \uc0ac\uc6a9\uc790 \uc778\ud130\ud398\uc774\uc2a4(UI) \uc124\uc815", url: "#8-gazebo-ui", children: [
              {title: "\uc2dc\ubbac\ub808\uc774\uc158 \uc81c\uc5b4 \ud328\ub110", url: "#_3" },
              {title: "3D \ubdf0 \ucee8\ud2b8\ub864", url: "#3d" },
              {title: "GUI \uc694\uc18c \ucd94\uac00", url: "#gui" },
          ]},
          {title: "9. Gazebo \ub85c\uadf8 \ubc0f \uae30\ub85d \uc124\uc815", url: "#9-gazebo", children: [
              {title: "\ub85c\uadf8 \uae30\ub85d \uc2dc\uc791", url: "#_4" },
              {title: "\ub85c\uadf8 \uc7ac\uc0dd", url: "#_5" },
              {title: "\ub85c\uadf8 \ud30c\uc77c \ubd84\uc11d", url: "#_6" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../2102/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../2102/" class="btn btn-xs btn-link">
        URDF/SDF 파일 불러오기
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter%2020/2003/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter%2020/2003/" class="btn btn-xs btn-link">
        프로젝트에서 선택 기준
      </a>
    </div>
    
  </div>

    

    <h3 id="gazebo">Gazebo 설치</h3>
<p>Gazebo는 로봇 시뮬레이션을 위한 강력한 도구로, 다양한 물리 엔진과 센서 플러그인을 지원한다. Gazebo를 설치하기 위해서는 다음 단계를 따른다.</p>
<h4 id="1">1. 시스템 업데이트</h4>
<p>먼저 시스템을 최신 상태로 업데이트한다. Ubuntu와 같은 리눅스 배포판을 기준으로 설명하겠다.</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get upgrade
</code></pre>
<h4 id="2-gazebo">2. Gazebo 패키지 설치</h4>
<p>다음으로, Gazebo의 최신 버전을 설치하기 위해 <code>osrfoundation</code>의 패키지를 추가하고 설치한다.</p>
<pre><code class="language-bash">sudo sh -c 'echo &quot;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/gazebo-stable.list'
wget https://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -
sudo apt-get update
sudo apt-get install gazebo11
</code></pre>
<p>위 명령어에서 <code>gazebo11</code>은 Gazebo의 11번째 버전을 설치한다. 만약 특정 버전을 설치하고자 한다면, <code>gazebo9</code>, <code>gazebo10</code>과 같은 버전을 지정하여 설치할 수 있다.</p>
<h4 id="3-gazebo">3. Gazebo 설치 확인</h4>
<p>설치가 완료되면 Gazebo가 제대로 설치되었는지 확인한다. 터미널에 다음 명령어를 입력한다.</p>
<pre><code class="language-bash">gazebo
</code></pre>
<p>정상적으로 설치되었다면 Gazebo GUI가 열리며, 이를 통해 시뮬레이션 환경을 시각적으로 확인할 수 있다.</p>
<h3 id="gazebo_1">Gazebo 기본 설정</h3>
<p>Gazebo가 설치된 후, 기본 설정을 통해 시뮬레이션 환경을 효율적으로 구성할 수 있다. 여기서는 사용자 정의 환경 설정과 기본적인 초기 구성 파일을 다룬다.</p>
<h4 id="1_1">1. 환경 변수 설정</h4>
<p>Gazebo는 다양한 환경 변수를 통해 시뮬레이션 경로, 플러그인 위치 등을 지정할 수 있다. 이러한 변수를 설정하여 보다 효율적인 시뮬레이션 환경을 구축할 수 있다.</p>
<pre><code class="language-bash">export GAZEBO_MODEL_PATH=~/gazebo_models:$GAZEBO_MODEL_PATH
export GAZEBO_PLUGIN_PATH=~/gazebo_plugins:$GAZEBO_PLUGIN_PATH
</code></pre>
<p><code>GAZEBO_MODEL_PATH</code>는 사용자 정의 모델이 저장된 경로를 지정하며, <code>GAZEBO_PLUGIN_PATH</code>는 플러그인 경로를 설정한다.</p>
<h4 id="2-sdf-urdf">2. SDF 및 URDF 파일 로드</h4>
<p>Gazebo는 URDF 또는 SDF 파일을 통해 로봇 모델을 로드한다. 기본적인 URDF 파일을 로드하는 방법을 설명하겠다. <code>roslaunch</code>를 이용하여 URDF 파일을 로드한다.</p>
<pre><code class="language-bash">roslaunch &lt;패키지 이름&gt; &lt;파일 이름&gt;.launch
</code></pre>
<p>이 명령어는 <code>launch</code> 파일을 실행하여 Gazebo에서 로봇 시뮬레이션을 시작한다.</p>
<h3 id="3-gazebo_1">3. Gazebo 물리 엔진 설정</h3>
<p>Gazebo에서는 여러 물리 엔진을 지원하며, 이를 통해 현실감 있는 시뮬레이션을 구현할 수 있다. 대표적인 물리 엔진으로는 ODE(Open Dynamics Engine), Bullet, DART, Simbody 등이 있다. 기본적으로 Gazebo는 ODE 엔진을 사용하며, 물리 엔진의 파라미터를 통해 시뮬레이션의 정확도를 조정할 수 있다.</p>
<h4 id="_1">물리 엔진 설정 파일</h4>
<p>Gazebo의 물리 엔진 설정은 <code>world</code> 파일 안에서 정의된다. 여기서는 ODE 물리 엔진을 사용하는 기본적인 설정 예시를 설명한다.</p>
<pre><code class="language-xml">&lt;physics type='ode'&gt;
  &lt;max_step_size&gt;0.001&lt;/max_step_size&gt;
  &lt;real_time_factor&gt;1&lt;/real_time_factor&gt;
  &lt;real_time_update_rate&gt;1000&lt;/real_time_update_rate&gt;
&lt;/physics&gt;
</code></pre>
<ul>
<li><code>max_step_size</code>: 시뮬레이션의 시간 스텝 크기를 정의한다. 값이 작을수록 시뮬레이션의 정확도는 높아지지만, 계산 비용이 증가한다.</li>
<li><code>real_time_factor</code>: 시뮬레이션 속도를 실제 시간에 대비한 비율로 설정한다. 1은 실제 시간과 동일한 속도로 시뮬레이션이 진행됨을 의미한다.</li>
<li><code>real_time_update_rate</code>: 시뮬레이션의 업데이트 속도를 설정한다. 이 값은 실제 시간과 시뮬레이션 시간 간의 관계를 나타낸다.</li>
</ul>
<h3 id="4-gazebo">4. Gazebo 플러그인 설정</h3>
<p>Gazebo는 다양한 플러그인을 통해 로봇의 동작을 제어하고 센서를 시뮬레이션할 수 있다. 플러그인은 URDF 또는 SDF 파일 내에서 설정할 수 있으며, 플러그인에 의해 시뮬레이션 내에서 로봇의 행동이나 센서 데이터가 변경된다.</p>
<h4 id="urdf">URDF에서 플러그인 설정</h4>
<pre><code class="language-xml">&lt;gazebo&gt;
  &lt;plugin name=&quot;my_robot_control&quot; filename=&quot;libmy_robot_control.so&quot;&gt;
    &lt;robotNamespace&gt;/my_robot&lt;/robotNamespace&gt;
    &lt;controlTopic&gt;/cmd_vel&lt;/controlTopic&gt;
  &lt;/plugin&gt;
&lt;/gazebo&gt;
</code></pre>
<ul>
<li><code>plugin name</code>: 플러그인의 이름을 지정한다.</li>
<li><code>filename</code>: 플러그인의 파일 경로를 지정한다.</li>
<li><code>robotNamespace</code>: 로봇의 네임스페이스를 지정하여 여러 로봇이 있는 경우 각각을 구분할 수 있다.</li>
<li><code>controlTopic</code>: 로봇의 제어 명령을 받을 토픽을 지정한다.</li>
</ul>
<p>플러그인은 로봇의 물리적 특성, 센서, 동작 제어 등 다양한 역할을 수행할 수 있으며, 이는 사용자가 작성한 커스텀 플러그인으로 확장 가능한다.</p>
<h3 id="5-gazebo">5. Gazebo 월드 파일 설정</h3>
<p>Gazebo에서 시뮬레이션 환경을 정의하는 <code>world</code> 파일은 로봇이 상호작용할 수 있는 지형, 빌딩, 조명, 카메라 등의 요소를 포함한다. 이 파일은 SDF 형식으로 작성되며, 다음과 같은 요소들이 포함될 수 있다.</p>
<h4 id="world">기본적인 <code>world</code> 파일 예시</h4>
<pre><code class="language-xml">&lt;world name=&quot;default&quot;&gt;
  &lt;include&gt;
    &lt;uri&gt;model://ground_plane&lt;/uri&gt;
  &lt;/include&gt;
  &lt;include&gt;
    &lt;uri&gt;model://sun&lt;/uri&gt;
  &lt;/include&gt;
&lt;/world&gt;
</code></pre>
<ul>
<li><code>ground_plane</code>: 기본 바닥 면을 설정한다.</li>
<li><code>sun</code>: 시뮬레이션 환경에 태양 조명을 추가한다.</li>
</ul>
<p>월드 파일을 통해 다양한 환경 설정이 가능하며, 로봇의 센서와 상호작용하는 복잡한 시뮬레이션 환경을 만들 수 있다.</p>
<h3 id="6">6. 시뮬레이션 환경 최적화</h3>
<p>Gazebo 시뮬레이션은 복잡한 물리 엔진, 센서, 로봇 모델을 사용하기 때문에 컴퓨터 성능에 따라 성능 최적화가 필요할 수 있다. 시뮬레이션 성능을 최적화하기 위해 다음과 같은 설정을 조정할 수 있다.</p>
<h4 id="_2">그래픽 설정</h4>
<p>Gazebo의 그래픽 설정을 낮추면 시뮬레이션이 보다 원활하게 실행될 수 있다. 다음은 그래픽 관련 설정이다.</p>
<pre><code class="language-bash">gzclient --rendering-off
</code></pre>
<p>이 명령어를 사용하면 Gazebo의 GUI가 비활성화되며, 그래픽 렌더링 없이 시뮬레이션을 실행할 수 있어 성능이 향상된다.</p>
<h4 id="cpu">CPU 및 메모리 관리</h4>
<p>Gazebo는 CPU와 메모리 사용량이 많은 프로그램이다. 따라서 다중 코어 프로세서를 사용하는 시스템에서는 CPU 코어를 효율적으로 분배하여 Gazebo의 성능을 향상시킬 수 있다. 이를 위해 다음과 같은 리눅스 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">taskset -c 0-3 gazebo
</code></pre>
<p>위 명령어는 Gazebo가 CPU의 0번부터 3번까지의 코어에서 실행되도록 설정한다. 이를 통해 나머지 코어는 다른 작업을 처리할 수 있다.</p>
<h3 id="7-gazebo">7. Gazebo 시작 스크립트 작성</h3>
<p>Gazebo를 실행할 때마다 여러 설정 파일과 명령어를 입력하는 것은 번거로울 수 있다. 이를 해결하기 위해, 시작 스크립트를 작성하여 여러 설정을 자동으로 로드할 수 있다.</p>
<h4 id="gazebo_2">기본적인 Gazebo 시작 스크립트</h4>
<pre><code class="language-bash">#!/bin/bash

export GAZEBO_MODEL_PATH=~/gazebo_models:$GAZEBO_MODEL_PATH
export GAZEBO_PLUGIN_PATH=~/gazebo_plugins:$GAZEBO_PLUGIN_PATH

gazebo --verbose
</code></pre>
<p>이 스크립트는 Gazebo 실행에 필요한 환경 변수를 설정하고 Gazebo를 실행한다. 이 파일을 <code>start_gazebo.sh</code>라는 이름으로 저장한 후, 다음 명령어로 실행 권한을 부여하고 실행할 수 있다.</p>
<pre><code class="language-bash">chmod +x start_gazebo.sh
./start_gazebo.sh
</code></pre>
<h4 id="urdf_1">자동으로 URDF 파일 로드하기</h4>
<p>이제 <code>start_gazebo.sh</code> 스크립트에 로봇 모델을 자동으로 불러오는 코드를 추가해보겠다. 이를 통해 Gazebo 실행과 동시에 로봇 모델이 시뮬레이션 환경에 로드된다.</p>
<pre><code class="language-bash">#!/bin/bash

export GAZEBO_MODEL_PATH=~/gazebo_models:$GAZEBO_MODEL_PATH
export GAZEBO_PLUGIN_PATH=~/gazebo_plugins:$GAZEBO_PLUGIN_PATH

roslaunch &lt;패키지 이름&gt; &lt;파일 이름&gt;.launch
</code></pre>
<p><code>roslaunch</code> 명령어를 사용하면 URDF 파일을 자동으로 로드하고, 로봇 모델이 Gazebo 내에서 시뮬레이션될 수 있다.</p>
<h3 id="8-gazebo-ui">8. Gazebo 사용자 인터페이스(UI) 설정</h3>
<p>Gazebo의 사용자 인터페이스는 시뮬레이션을 보다 직관적으로 제어할 수 있는 도구를 제공한다. 기본적으로 제공되는 UI는 다음과 같은 주요 기능을 포함한다.</p>
<h4 id="_3">시뮬레이션 제어 패널</h4>
<p>시뮬레이션 제어 패널은 Gazebo 화면의 상단에 위치하며, 시뮬레이션 실행, 일시 정지, 재시작 등의 기능을 제공한다.</p>
<ul>
<li><strong>Play</strong>: 시뮬레이션을 시작한다.</li>
<li><strong>Pause</strong>: 현재 진행 중인 시뮬레이션을 일시 정지한다.</li>
<li><strong>Step</strong>: 시뮬레이션을 한 스텝씩 실행한다.</li>
</ul>
<h4 id="3d">3D 뷰 컨트롤</h4>
<p>마우스를 사용하여 Gazebo의 3D 환경을 자유롭게 이동할 수 있다. 로봇 모델을 다양한 각도에서 확인할 수 있으며, 다음과 같은 단축키를 사용하여 3D 뷰를 제어할 수 있다.</p>
<ul>
<li><strong>왼쪽 클릭</strong>: 카메라 회전</li>
<li><strong>오른쪽 클릭</strong>: 카메라 이동</li>
<li><strong>휠</strong>: 줌 인/줌 아웃</li>
</ul>
<h4 id="gui">GUI 요소 추가</h4>
<p>Gazebo의 기본 GUI 외에도, 사용자 정의 인터페이스를 추가하여 다양한 데이터를 실시간으로 모니터링할 수 있다. 이를 위해 플러그인을 통해 추가적인 데이터를 시각화할 수 있다.</p>
<p>예를 들어, 시뮬레이션 중 로봇의 센서 데이터를 실시간으로 모니터링하는 플러그인을 추가하여 Gazebo 화면에 센서 출력을 표시할 수 있다.</p>
<pre><code class="language-xml">&lt;plugin name=&quot;sensor_display&quot; filename=&quot;libsensor_display.so&quot;&gt;
  &lt;update_rate&gt;30&lt;/update_rate&gt;
&lt;/plugin&gt;
</code></pre>
<p><code>update_rate</code>는 초당 업데이트 횟수를 설정한다. 이 플러그인은 센서 데이터를 Gazebo GUI에 시각적으로 출력하는 역할을 한다.</p>
<h3 id="9-gazebo">9. Gazebo 로그 및 기록 설정</h3>
<p>Gazebo는 시뮬레이션 동안 발생하는 모든 이벤트를 기록할 수 있는 기능을 제공한다. 이를 통해 시뮬레이션 결과를 저장하고, 이후 분석을 위해 사용할 수 있다.</p>
<h4 id="_4">로그 기록 시작</h4>
<p>다음 명령어를 통해 Gazebo의 로그 기록을 시작할 수 있다.</p>
<pre><code class="language-bash">gazebo --record path_to_world_file.world
</code></pre>
<p>이 명령어는 시뮬레이션을 실행하면서 발생하는 이벤트와 데이터를 기록한다.</p>
<h4 id="_5">로그 재생</h4>
<p>기록된 로그 파일은 다음 명령어를 통해 재생할 수 있다.</p>
<pre><code class="language-bash">gazebo --playback path_to_log_file.log
</code></pre>
<p>이를 통해 기록된 시뮬레이션을 다시 확인할 수 있으며, 데이터를 기반으로 추가적인 분석을 수행할 수 있다.</p>
<h4 id="_6">로그 파일 분석</h4>
<p>로그 파일을 분석하기 위해 다양한 도구를 사용할 수 있으며, 특히 로봇의 동작 데이터를 수집하고 분석하는 데 유용하다. Gazebo에서 제공하는 기본적인 분석 도구를 사용하여 로그 데이터를 그래프로 시각화할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../2102/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../2102/" class="btn btn-xs btn-link">
        URDF/SDF 파일 불러오기
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter%2020/2003/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter%2020/2003/" class="btn btn-xs btn-link">
        프로젝트에서 선택 기준
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>