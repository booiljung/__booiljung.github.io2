<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/robot/ros2%20humble/chapter%2005/0502/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>싱글 노드와 멀티 노드 차이점 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\uc2f1\uae00 \ub178\ub4dc", url: "#_top", children: [
          ]},
          {title: "\uba40\ud2f0 \ub178\ub4dc", url: "#_2", children: [
          ]},
          {title: "\ub178\ub4dc \uac04 \ud1b5\uc2e0 \uad6c\uc870", url: "#_3", children: [
          ]},
          {title: "\uba40\ud2f0 \ub178\ub4dc\uc5d0\uc11c\uc758 \ubcd1\ub82c \ucc98\ub9ac", url: "#_4", children: [
          ]},
          {title: "\ub178\ub4dc \uac04 \ud1b5\uc2e0\uc5d0\uc11c\uc758 \uc9c0\uc5f0 (Latency)", url: "#latency", children: [
          ]},
          {title: "\uc790\uc6d0 \uad00\ub9ac \uce21\uba74\uc5d0\uc11c\uc758 \ucc28\uc774\uc810", url: "#_5", children: [
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0503/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0503/" class="btn btn-xs btn-link">
        퍼블리셔와 서브스크라이버
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0501/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0501/" class="btn btn-xs btn-link">
        노드(Node) 생성과 관리
      </a>
    </div>
    
  </div>

    

    <h3 id="_1">싱글 노드</h3>
<p>싱글 노드는 하나의 ROS2 노드로 구성된 시스템이다. 이 노드는 주로 하나의 프로세스 내에서 실행되며, 노드 내부에서 퍼블리셔, 서브스크라이버, 서비스, 액션 등의 통신 인터페이스를 사용하여 데이터를 처리하거나 전달한다.</p>
<p>싱글 노드의 장점은 설계와 관리가 단순하다는 점이다. 모든 기능이 하나의 노드에 통합되어 있으므로, 노드 간의 복잡한 통신 설정이 필요하지 않으며, 관리할 노드가 하나뿐이므로 디버깅이나 성능 최적화가 상대적으로 쉬운 편이다. 그러나 복잡한 시스템에서 확장성과 유연성에 한계가 있을 수 있다. 또한, 리소스 사용 측면에서 비효율적일 수 있으며, 특히 병렬 처리가 요구되는 시스템에서는 병목 현상이 발생할 수 있다.</p>
<h3 id="_2">멀티 노드</h3>
<p>멀티 노드는 여러 개의 ROS2 노드로 구성된 시스템이다. 각 노드는 독립적으로 실행되며, 각기 다른 프로세스에서 실행될 수도 있다. 노드 간에는 퍼블리셔-서브스크라이버, 서비스-클라이언트, 액션 서버-액션 클라이언트 등의 통신 패턴을 사용하여 데이터를 주고받는다.</p>
<p>멀티 노드의 주요 장점은 시스템의 확장성과 병렬 처리 능력이다. 여러 노드가 각각의 작업을 분담하여 수행하므로, 작업 간의 병목 현상을 줄일 수 있으며, 시스템 성능을 최적화할 수 있다. 또한, 각 노드가 독립적으로 실행되므로 장애 발생 시 전체 시스템이 중단되지 않고, 특정 노드만 재시작하거나 수정하는 등 관리가 유연한다. 그러나 노드 간 통신 설정과 관리가 복잡할 수 있으며, 실시간성과 데이터 동기화 측면에서 신경 써야 할 부분이 많다.</p>
<h3 id="_3">노드 간 통신 구조</h3>
<p>싱글 노드와 멀티 노드의 차이를 이해하기 위해, 노드 간 통신 구조를 살펴볼 필요가 있다. ROS2는 데이터의 비동기 처리와 동시성을 보장하기 위해 퍼블리셔-서브스크라이버 모델을 사용한다. 이 통신 모델은 메시지 기반의 비동기 통신을 제공하여 각 노드가 독립적으로 동작하도록 지원한다.</p>
<ul>
<li><strong>퍼블리셔-서브스크라이버 모델</strong><br />
  퍼블리셔 노드는 특정 토픽에 데이터를 게시하고, 서브스크라이버 노드는 해당 토픽을 구독하여 데이터를 수신한다. 멀티 노드 환경에서는 여러 퍼블리셔와 서브스크라이버 노드가 동시에 다양한 토픽을 주고받으므로, 병렬 처리가 용이해진다.</li>
</ul>
<p>노드 간 통신을 수학적으로 표현하면, 노드 <span class="arithmatex"><span class="MathJax_Preview">N_1</span><script type="math/tex">N_1</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">N_2</span><script type="math/tex">N_2</script></span>가 퍼블리셔와 서브스크라이버 관계에 있을 때, 퍼블리셔 노드 <span class="arithmatex"><span class="MathJax_Preview">N_1</span><script type="math/tex">N_1</script></span>는 토픽 <span class="arithmatex"><span class="MathJax_Preview">T</span><script type="math/tex">T</script></span>에 데이터를 게시한다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
N_1 \xrightarrow{T} N_2
</div>
<script type="math/tex; mode=display">
N_1 \xrightarrow{T} N_2
</script>
</div>
<p>멀티 노드 시스템에서 각 노드 <span class="arithmatex"><span class="MathJax_Preview">N_i</span><script type="math/tex">N_i</script></span>는 개별적으로 실행되며, 노드 간 통신은 ROS2의 DDS (Data Distribution Service)를 통해 이루어진다. 노드 간의 통신량을 최소화하기 위해 QoS (Quality of Service) 설정을 통해 메시지의 주기와 전송 신뢰성을 조정할 수 있다.</p>
<h3 id="_4">멀티 노드에서의 병렬 처리</h3>
<p>멀티 노드는 각 노드가 병렬로 실행되기 때문에 작업을 동시에 처리할 수 있다. 예를 들어, 센서 데이터를 수집하는 노드와 이를 처리하는 노드를 분리하면, 센서 데이터 수집이 완료될 때까지 기다리지 않고 데이터를 실시간으로 처리할 수 있다. 이러한 병렬 처리의 효율성은 멀티 노드 시스템의 큰 장점이다.</p>
<p>병렬 처리를 수학적으로 설명하면, 두 개의 독립적인 작업 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{A}</span><script type="math/tex">\mathbf{A}</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{B}</span><script type="math/tex">\mathbf{B}</script></span>가 있을 때, 싱글 노드에서는 두 작업을 순차적으로 처리하므로 작업 시간은 두 작업의 시간 합계 <span class="arithmatex"><span class="MathJax_Preview">t_{\mathbf{A}} + t_{\mathbf{B}}</span><script type="math/tex">t_{\mathbf{A}} + t_{\mathbf{B}}</script></span>가 된다. 반면, 멀티 노드에서는 작업이 병렬로 실행되므로, 전체 작업 시간은 더 짧은 시간인 <span class="arithmatex"><span class="MathJax_Preview">\max(t_{\mathbf{A}}, t_{\mathbf{B}})</span><script type="math/tex">\max(t_{\mathbf{A}}, t_{\mathbf{B}})</script></span>가 된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_{\text{single}} = t_{\mathbf{A}} + t_{\mathbf{B}}, \quad T_{\text{multi}} = \max(t_{\mathbf{A}}, t_{\mathbf{B}})
</div>
<script type="math/tex; mode=display">
T_{\text{single}} = t_{\mathbf{A}} + t_{\mathbf{B}}, \quad T_{\text{multi}} = \max(t_{\mathbf{A}}, t_{\mathbf{B}})
</script>
</div>
<p>멀티 노드 시스템은 이러한 방식으로 처리 속도를 크게 향상시킬 수 있다.</p>
<h3 id="latency">노드 간 통신에서의 지연 (Latency)</h3>
<p>멀티 노드 시스템에서는 노드 간의 통신에 따른 지연 시간이 중요한 요소가 된다. 특히, 실시간성을 요구하는 시스템에서는 데이터 전송 지연으로 인해 성능 저하가 발생할 수 있다. 예를 들어, 센서 데이터를 수집하는 노드와 이를 처리하는 노드 간의 통신에서 지연이 발생하면, 처리 속도가 느려지거나 실시간 데이터를 놓치는 문제가 생길 수 있다.</p>
<p>지연 시간을 수학적으로 표현하면, 퍼블리셔 노드 <span class="arithmatex"><span class="MathJax_Preview">N_1</span><script type="math/tex">N_1</script></span>에서 서브스크라이버 노드 <span class="arithmatex"><span class="MathJax_Preview">N_2</span><script type="math/tex">N_2</script></span>로 전송되는 데이터의 전송 시간 <span class="arithmatex"><span class="MathJax_Preview">T_d</span><script type="math/tex">T_d</script></span>는 다음과 같이 정의된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
T_d = T_{\text{process}} + T_{\text{queue}} + T_{\text{network}}
</div>
<script type="math/tex; mode=display">
T_d = T_{\text{process}} + T_{\text{queue}} + T_{\text{network}}
</script>
</div>
<p>여기서,
- <span class="arithmatex"><span class="MathJax_Preview">T_{\text{process}}</span><script type="math/tex">T_{\text{process}}</script></span>는 퍼블리셔 노드에서 데이터를 처리하는 시간,
- <span class="arithmatex"><span class="MathJax_Preview">T_{\text{queue}}</span><script type="math/tex">T_{\text{queue}}</script></span>는 데이터가 전송 대기 중인 시간,
- <span class="arithmatex"><span class="MathJax_Preview">T_{\text{network}}</span><script type="math/tex">T_{\text{network}}</script></span>는 네트워크를 통한 데이터 전송 시간이다.</p>
<p>멀티 노드 환경에서 이러한 지연을 최소화하기 위해서는 QoS 설정을 최적화하고, 네트워크 대역폭과 노드 간 통신 빈도를 고려한 설계가 필요하다.</p>
<h3 id="_5">자원 관리 측면에서의 차이점</h3>
<p>싱글 노드는 하나의 프로세스 내에서 모든 작업을 처리하므로, 리소스 사용이 집중된다. CPU와 메모리를 하나의 노드가 모두 사용하게 되면, 리소스 부족으로 인한 성능 저하가 발생할 수 있다. 반면, 멀티 노드는 작업을 여러 프로세스로 나누어 수행하므로, 각 노드가 필요한 만큼의 리소스를 독립적으로 사용할 수 있다. 따라서, 시스템 자원을 보다 효율적으로 관리할 수 있으며, 리소스 충돌을 피할 수 있다.</p>
<p>멀티 노드의 자원 사용량을 수학적으로 표현하면, 각 노드가 사용하는 CPU와 메모리 리소스를 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{R}_{CPU}</span><script type="math/tex">\mathbf{R}_{CPU}</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{R}_{MEM}</span><script type="math/tex">\mathbf{R}_{MEM}</script></span>로 나타낼 수 있다. 싱글 노드에서는 모든 리소스를 하나의 노드가 독점적으로 사용하므로, 전체 리소스 소비는 다음과 같이 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{R}_{\text{single}} = \mathbf{R}_{\text{CPU}_{\text{single}}} + \mathbf{R}_{\text{MEM}_{\text{single}}}
</div>
<script type="math/tex; mode=display">
\mathbf{R}_{\text{single}} = \mathbf{R}_{\text{CPU}_{\text{single}}} + \mathbf{R}_{\text{MEM}_{\text{single}}}
</script>
</div>
<p>반면, 멀티 노드에서는 각 노드가 필요한 리소스만 사용하므로, 전체 리소스 소비는 개별 노드의 리소스 사용량의 합으로 표현된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{R}_{\text{multi}} = \sum_{i=1}^{n} \mathbf{R}_{\text{CPU}_i} + \mathbf{R}_{\text{MEM}_i}
</div>
<script type="math/tex; mode=display">
\mathbf{R}_{\text{multi}} = \sum_{i=1}^{n} \mathbf{R}_{\text{CPU}_i} + \mathbf{R}_{\text{MEM}_i}
</script>
</div>
<p>멀티 노드의 장점은 노드 간 자원 분배가 유연하다는 점이며, 이는 복잡한 시스템에서 리소스 사용 효율성을 크게 높일 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0503/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0503/" class="btn btn-xs btn-link">
        퍼블리셔와 서브스크라이버
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0501/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0501/" class="btn btn-xs btn-link">
        노드(Node) 생성과 관리
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>