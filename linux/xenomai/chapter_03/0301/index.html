<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/linux/xenomai/chapter_03/0301/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Xenomai API 개요 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\ud575\uc2ec Xenomai API", url: "#_top", children: [
              {title: "POSIX API", url: "#posix-api" },
              {title: "Native API", url: "#native-api" },
              {title: "Alchemy API", url: "#alchemy-api" },
          ]},
          {title: "API \uc0ac\uc6a9 \uc608\uc81c", url: "#api", children: [
              {title: "POSIX API \uc0ac\uc6a9 \uc608\uc81c", url: "#posix-api_1" },
              {title: "Native API \uc0ac\uc6a9 \uc608\uc81c", url: "#native-api_1" },
              {title: "Alchemy API \uc0ac\uc6a9 \uc608\uc81c", url: "#alchemy-api_1" },
          ]},
          {title: "Xenomai API \uc2ec\ud654", url: "#xenomai-api_1", children: [
              {title: "\uc2e4\uc2dc\uac04 \ud0c0\uc774\uba38", url: "#_1" },
              {title: "\uc774\ubca4\ud2b8", url: "#_2" },
          ]},
          {title: "\uc778\ud130\ub7fd\ud2b8 \uad00\ub9ac", url: "#_3", children: [
              {title: "Native \uc778\ud130\ub7fd\ud2b8 API", url: "#native-api_3" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0302/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0302/" class="btn btn-xs btn-link">
        제3장 Xenomai API 및 개발 환경
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_02/0207/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_02/0207/" class="btn btn-xs btn-link">
        설치 확인
      </a>
    </div>
    
  </div>

    

    <p>Xenomai는 실시간 애플리케이션의 개발을 용이하게 하는 다양한 API를 제공한다. 이 섹션에서는 Xenomai의 주요 API들을 개요하고, 각각의 특징과 사용 방법을 간단히 소개한다. </p>
<h2 id="xenomai-api">핵심 Xenomai API</h2>
<p>Xenomai는 주로 여러 실시간 운영 환경을 제공하는데, 아래와 같은 주요 API 세트를 갖추고 있다.</p>
<h3 id="posix-api">POSIX API</h3>
<p>Xenomai는 POSIX 규격의 실시간 확장을 제공하여, 기존 POSIX 호환 코드의 리얼타임성을 보장한다. 이는 사용자가 리눅스와 유사한 방식으로 쓰레드, 뮤텍스, 조건 변수 등을 사용해서 실시간 애플리케이션을 개발할 수 있게 해준다.</p>
<ul>
<li><strong>pthread_create</strong>: 새로운 POSIX 쓰레드를 생성한다.</li>
<li><strong>pthread_mutex_lock</strong>: 뮤텍스를 잠급니다.</li>
<li><strong>pthread_cond_wait</strong>: 조건 변수를 기다린다.</li>
</ul>
<h3 id="native-api">Native API</h3>
<p>Xenomai Native API는 Xenomai의 최대 성능을 활용할 수 있는 API이다. 이는 Xenomai의 기본 기능을 직접 접근할 수 있는 방법을 제공한다.</p>
<ul>
<li><strong>rt_task_create</strong>: 새로운 실시간 태스크를 생성한다.</li>
<li><strong>rt_task_start</strong>: 실시간 태스크를 시작한다.</li>
<li><strong>rt_task_delete</strong>: 실시간 태스크를 삭제한다.</li>
</ul>
<h3 id="alchemy-api">Alchemy API</h3>
<p>Alchemy는 고급 실시간 기능을 제공하는 API 패키지로, Xenomai 사용자들을 위한 고성능 실시간 애플리케이션 개발에 최적화된 API이다.</p>
<ul>
<li><strong>rt_mutex_create</strong>: 실시간 뮤텍스를 생성한다.</li>
<li><strong>rt_sem_broadcast</strong>: 세마포를 브로드캐스트 한다.</li>
<li><strong>rt_queue_create</strong>: 실시간 큐를 생성한다.</li>
</ul>
<h2 id="api">API 사용 예제</h2>
<h3 id="posix-api_1">POSIX API 사용 예제</h3>
<pre><code class="language-c">#include &lt;pthread.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

void* thread_function(void* arg) {
    printf(&quot;Hello from POSIX thread!\n&quot;);
    return NULL;
}

int main() {
    pthread_t thread;
    pthread_create(&amp;thread, NULL, thread_function, NULL);
    pthread_join(thread, NULL);
    return 0;
}
</code></pre>
<h3 id="native-api_1">Native API 사용 예제</h3>
<pre><code class="language-c">#include &lt;native/task.h&gt;
#include &lt;rtdk.h&gt;

void task_function(void *arg) {
    rt_printf(&quot;Hello from Native API task!\n&quot;);
}

int main() {
    RT_TASK task;
    rt_task_create(&amp;task, &quot;Task&quot;, 0, 50, 0);
    rt_task_start(&amp;task, &amp;task_function, NULL);
    rt_task_delete(&amp;task);
    return 0;
}
</code></pre>
<h3 id="alchemy-api_1">Alchemy API 사용 예제</h3>
<pre><code class="language-c">#include &lt;alchemy/task.h&gt;
#include &lt;alchemy/timer.h&gt;
#include &lt;alchemy/sem.h&gt;
#include &lt;rtdk.h&gt;

void task_function(void *arg) {
    RT_SEM *sem = (RT_SEM *)arg;
    rt_sem_p(sem, TM_INFINITE);
    rt_printf(&quot;Semaphore acquired, task running!\n&quot;);
}

int main() {
    RT_TASK task;
    RT_SEM sem;

    rt_sem_create(&amp;sem, &quot;MySemaphore&quot;, 0, S_PRIO);
    rt_task_create(&amp;task, &quot;Task&quot;, 0, 50, 0);
    rt_task_start(&amp;task, &amp;task_function, &amp;sem);

    rt_timer_spin(1000000000); // Wait for 1 second
    rt_sem_broadcast(&amp;sem);

    rt_task_delete(&amp;task);
    rt_sem_delete(&amp;sem);
    return 0;
}
</code></pre>
<h2 id="xenomai-api_1">Xenomai API 심화</h2>
<p>이제 간단한 예제를 실습해봤으니, 실시간 시스템에서 자주 사용하는 몇 가지 고급 기능과 그 활용 방법에 대해 살펴보겠다.</p>
<h3 id="_1">실시간 타이머</h3>
<p>실시간 애플리케이션에서 시간당 작업 주기를 관리하는 것은 매우 중요하다. Xenomai는 이를 위해 고성능 타이머를 제공한다.</p>
<h4 id="alchemy-api_2">Alchemy 타이머 API</h4>
<ul>
<li><strong>rt_timer_ns2ticks</strong>: 나노초 단위의 시간을 타이머 틱(ticks) 단위로 변환한다.</li>
<li><strong>rt_timer_read</strong>: 현재 타이머 값을 읽어온다.</li>
</ul>
<p><strong>실시간 타이머 사용 예제</strong></p>
<pre><code class="language-c">#include &lt;alchemy/task.h&gt;
#include &lt;alchemy/timer.h&gt;
#include &lt;rtdk.h&gt;

void task_function(void *arg) {
    RTIME start_time = rt_timer_read();

    // 1초 대기
    rt_task_sleep(1000000000); // 1 second

    RTIME end_time = rt_timer_read();
    rt_printf(&quot;Elapsed time: %llu ns\n&quot;, end_time - start_time);
}

int main() {
    RT_TASK task;
    rt_task_create(&amp;task, &quot;TimeTask&quot;, 0, 50, 0);
    rt_task_start(&amp;task, &amp;task_function, NULL);

    rt_task_join(&amp;task);
    rt_task_delete(&amp;task);
    return 0;
}
</code></pre>
<h3 id="_2">이벤트</h3>
<p>실시간 시스템에서는 여러 이벤트를 감지하고 이에 대응하는 것이 중요하다. Xenomai는 효과적인 이벤트 관리 기능을 제공한다.</p>
<h4 id="native-api_2">Native 이벤트 API</h4>
<ul>
<li><strong>rt_event_create</strong>: 새로운 이벤트 컨트롤 블록을 생성한다.</li>
<li><strong>rt_event_signal</strong>: 특정 이벤트를 신호한다.</li>
<li><strong>rt_event_wait</strong>: 이벤트가 발생할 때까지 기다린다.</li>
</ul>
<p><strong>이벤트 사용 예제</strong></p>
<pre><code class="language-c">#include &lt;native/task.h&gt;
#include &lt;native/event.h&gt;
#include &lt;rtdk.h&gt;

#define EVENT_MASK 1

void event_handler(void *arg) {
    RT_EVENT *event = (RT_EVENT *)arg;
    rt_event_wait(event, EVENT_MASK, EV_ANY, TM_INFINITE, NULL);
    rt_printf(&quot;Event received!\n&quot;);
}

int main() {
    RT_TASK task;
    RT_EVENT event;

    rt_event_create(&amp;event, &quot;MyEvent&quot;, 0, EV_PRIO);

    rt_task_create(&amp;task, &quot;EventTask&quot;, 0, 50, 0);
    rt_task_start(&amp;task, &amp;event_handler, &amp;event);

    rt_timer_spin(1000000000); // 1 second delay
    rt_event_signal(&amp;event, EVENT_MASK);

    rt_task_join(&amp;task);
    rt_task_delete(&amp;task);
    rt_event_delete(&amp;event);
    return 0;
}
</code></pre>
<h2 id="_3">인터럽트 관리</h2>
<p>실시간 시스템에서는 하드웨어 및 소프트웨어 인터럽트를 효율적으로 관리하는 것이 중요하다.</p>
<h3 id="native-api_3">Native 인터럽트 API</h3>
<ul>
<li><strong>rt_intr_create</strong>: 새로운 인터럽트 객체를 생성한다.</li>
<li><strong>rt_intr_enable</strong>: 특정 인터럽트 라인을 활성화한다.</li>
<li><strong>rt_intr_wait</strong>: 인터럽트가 발생할 때까지 기다린다.</li>
</ul>
<p><strong>인터럽트 사용 예제</strong></p>
<pre><code class="language-c">#include &lt;native/intr.h&gt;
#include &lt;rtdk.h&gt;

#define IRQ_NUMBER 10

void interrupt_handler(void *arg) {
    RT_INTR *intr = (RT_INTR *)arg;
    unsigned long dummy;

    rt_intr_wait(intr, TM_INFINITE, &amp;dummy);
    rt_printf(&quot;Interrupt serviced!\n&quot;);
}

int main() {
    RT_INTR intr;
    rt_intr_create(&amp;intr, &quot;MyInterrupt&quot;, IRQ_NUMBER, I_PRIO);

    rt_intr_enable(&amp;intr);

    while (1) {
        rt_timer_spin(1000000000); // Periodically trigger interrupt
        rt_intr_wait(&amp;intr, TM_INFINITE, NULL);
        rtc_task_start(&amp;intr, &amp;interrupt_handler, &amp;intr);
    }

    rt_intr_delete(&amp;intr);
    return 0;
}
</code></pre>
<p>이렇게 다양한 Xenomai API를 통해 실시간 시스템을 효과적으로 관리할 수 있다. 각 기능을 적절히 활용하여 애플리케이션의 성능과 실시간성을 극대화 할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0302/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0302/" class="btn btn-xs btn-link">
        제3장 Xenomai API 및 개발 환경
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../chapter_02/0207/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../chapter_02/0207/" class="btn btn-xs btn-link">
        설치 확인
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>