<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/linux/ffmpeg/A007/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>오디오 포맷 변환 - 실험 도서관</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\uc624\ub514\uc624 \ud3ec\ub9f7 \uac1c\uc694", url: "#_top", children: [
          ]},
          {title: "FFMPEG\ub97c \uc774\uc6a9\ud55c \uc624\ub514\uc624 \ud3ec\ub9f7 \ubcc0\ud658 \uae30\ubcf8 \uba85\ub839\uc5b4", url: "#ffmpeg", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815", url: "#_2", children: [
          ]},
          {title: "\uc0d8\ud50c\ub9c1 \ub808\uc774\ud2b8 \ubcc0\uacbd", url: "#_3", children: [
          ]},
          {title: "\ube44\ud2b8\ub808\uc774\ud2b8 \uc124\uc815", url: "#_4", children: [
          ]},
          {title: "\ucc44\ub110 \uc218 \ubcc0\uacbd", url: "#_5", children: [
          ]},
          {title: "\uc624\ub514\uc624 \ud3ec\ub9f7 \uac04 \ubcc0\ud658 \uc608\uc2dc", url: "#_6", children: [
          ]},
          {title: "\uc624\ub514\uc624 \ud3ec\ub9f7 \ubcc0\ud658 \uc2dc \uace0\ub824 \uc0ac\ud56d", url: "#_7", children: [
          ]},
          {title: "\uc8fc\ud30c\uc218 \uc751\ub2f5\uacfc \ud3ec\ub9f7 \ubcc0\ud658", url: "#_8", children: [
          ]},
          {title: "\uc624\ub514\uc624 \ud544\ud130 \uc801\uc6a9", url: "#_9", children: [
              {title: "\ubcfc\ub968 \uc870\uc815", url: "#_10" },
              {title: "\uace0\uc5ed \ud1b5\uacfc \ud544\ud130", url: "#_11" },
              {title: "\uc800\uc5ed \ud1b5\uacfc \ud544\ud130", url: "#_12" },
              {title: "\ub9ac\ubc84\ube0c \ud6a8\uacfc", url: "#_13" },
          ]},
          {title: "\ucc44\ub110 \ub9e4\ud551", url: "#_14", children: [
          ]},
          {title: "\ub2e4\uc911 \uc624\ub514\uc624 \ud2b8\ub799 \ucc98\ub9ac", url: "#_15", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A008/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A008/" class="btn btn-xs btn-link">
        코덱 설정 및 변경
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A006/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A006/" class="btn btn-xs btn-link">
        비디오 포맷 변환
      </a>
    </div>
    
  </div>

    

    <p>오디오 포맷 변환은 FFMPEG에서 가장 기본적인 기능 중 하나로, 다양한 입력 포맷을 원하는 출력 포맷으로 변환할 수 있다. 여기에서는 오디오 포맷 변환의 기본 개념부터 FFMPEG 명령어를 사용한 실제 변환 과정까지 설명한다.</p>
<h3 id="_1">오디오 포맷 개요</h3>
<p>오디오 포맷은 음성 데이터를 어떻게 저장하고 처리하는지에 대한 규칙을 정의한다. 오디오 파일은 보통 컨테이너 포맷과 코덱을 결합하여 이루어지며, 대표적인 컨테이너 포맷으로는 MP3, WAV, AAC 등이 있다. 각 포맷은 고유의 압축 방식과 인코딩 방식을 가지며, 이를 변환할 때 적절한 코덱 설정이 필요하다.</p>
<p>오디오 변환에서 중요한 변수는 다음과 같다.</p>
<ol>
<li><strong>샘플링 레이트 (<span class="arithmatex"><span class="MathJax_Preview">f_s</span><script type="math/tex">f_s</script></span>)</strong>: 1초당 수집되는 오디오 샘플 수로, 단위는 Hz이다.</li>
<li><strong>비트레이트 (<span class="arithmatex"><span class="MathJax_Preview">b_r</span><script type="math/tex">b_r</script></span>)</strong>: 초당 전달되는 데이터양으로, 주로 kbps로 표기된다.</li>
<li><strong>채널 수 (<span class="arithmatex"><span class="MathJax_Preview">C</span><script type="math/tex">C</script></span>)</strong>: 오디오의 채널 수로, 모노(1채널), 스테레오(2채널), 서라운드(다채널) 등으로 나뉜다.</li>
<li><strong>코덱</strong>: 오디오 데이터를 압축 및 해제하는 방법으로, 각 포맷마다 다르다.</li>
</ol>
<h3 id="ffmpeg">FFMPEG를 이용한 오디오 포맷 변환 기본 명령어</h3>
<p>FFMPEG에서 오디오 파일의 포맷을 변환하기 위해서는 다음과 같은 기본 명령어를 사용한다.</p>
<pre><code>ffmpeg -i input_file output_file
</code></pre>
<p>이 명령어는 입력 파일을 지정된 출력 파일로 변환한다. 여기서 <code>input_file</code>과 <code>output_file</code>은 각각 변환하고자 하는 오디오 파일의 경로와 변환된 파일의 경로를 나타낸다.</p>
<p>예시:</p>
<pre><code>ffmpeg -i input.wav output.mp3
</code></pre>
<p>위 명령어는 <code>input.wav</code> 파일을 <code>output.mp3</code> 파일로 변환한다. 이때 자동으로 적절한 코덱이 선택되지만, 수동으로 코덱을 지정할 수도 있다.</p>
<h3 id="_2">코덱 설정</h3>
<p>FFMPEG에서 오디오 포맷을 변환할 때, 특정 코덱을 지정하려면 <code>-acodec</code> 옵션을 사용할 수 있다. 예를 들어, MP3로 변환할 때는 다음과 같이 코덱을 명시적으로 지정할 수 있다.</p>
<pre><code>ffmpeg -i input.wav -acodec libmp3lame output.mp3
</code></pre>
<p>여기서 <code>libmp3lame</code>은 MP3 인코딩을 위한 코덱이다. 비슷하게 AAC, OGG 등 다양한 코덱을 사용할 수 있다.</p>
<h3 id="_3">샘플링 레이트 변경</h3>
<p>오디오 포맷을 변환하면서 샘플링 레이트 (<span class="arithmatex"><span class="MathJax_Preview">f_s</span><script type="math/tex">f_s</script></span>)도 변경할 수 있다. 샘플링 레이트는 <code>-ar</code> 옵션을 사용하여 설정한다.</p>
<pre><code>ffmpeg -i input.wav -ar 44100 output.mp3
</code></pre>
<p>이 명령어는 입력 파일을 44.1kHz의 샘플링 레이트로 MP3 포맷으로 변환한다.</p>
<p>수학적으로, 샘플링 레이트의 개념은 다음과 같이 정의된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
f_s = \frac{N_s}{T}
</div>
<script type="math/tex; mode=display">
f_s = \frac{N_s}{T}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">N_s</span><script type="math/tex">N_s</script></span>는 1초 동안 샘플링된 데이터의 수, <span class="arithmatex"><span class="MathJax_Preview">T</span><script type="math/tex">T</script></span>는 시간(초)이다. 샘플링 레이트가 높을수록 더 많은 데이터가 수집되어 음질이 좋아지지만, 파일 크기도 커진다.</p>
<h3 id="_4">비트레이트 설정</h3>
<p>오디오 포맷을 변환할 때, 비트레이트 (<span class="arithmatex"><span class="MathJax_Preview">b_r</span><script type="math/tex">b_r</script></span>)는 오디오 파일의 품질과 크기에 큰 영향을 미친다. FFMPEG에서는 <code>-b:a</code> 옵션을 사용하여 오디오의 비트레이트를 설정할 수 있다. 단위는 보통 kbps로 지정한다.</p>
<pre><code>ffmpeg -i input.wav -b:a 192k output.mp3
</code></pre>
<p>위 명령어는 입력 파일을 192kbps 비트레이트로 MP3 포맷으로 변환한다. 비트레이트가 높을수록 음질이 향상되지만, 파일 크기가 커진다.</p>
<p>비트레이트는 다음 수식으로 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
b_r = \frac{S}{T}
</div>
<script type="math/tex; mode=display">
b_r = \frac{S}{T}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">S</span><script type="math/tex">S</script></span>는 초당 전송되는 데이터 양(비트)이고, <span class="arithmatex"><span class="MathJax_Preview">T</span><script type="math/tex">T</script></span>는 전송 시간(초)이다. 비트레이트가 높을수록 더 많은 데이터가 전송되며, 이는 더 좋은 품질의 오디오로 이어진다.</p>
<h3 id="_5">채널 수 변경</h3>
<p>오디오 포맷 변환 중 채널 수 (<span class="arithmatex"><span class="MathJax_Preview">C</span><script type="math/tex">C</script></span>)도 변경할 수 있다. 모노에서 스테레오로, 혹은 스테레오에서 모노로 변환하는 것이 대표적인 예이다. 이때 <code>-ac</code> 옵션을 사용한다.</p>
<pre><code>ffmpeg -i input.wav -ac 1 output.mp3
</code></pre>
<p>위 명령어는 스테레오 오디오 파일을 모노로 변환한다. <code>-ac 2</code>로 설정하면 스테레오로 변환할 수 있다.</p>
<h3 id="_6">오디오 포맷 간 변환 예시</h3>
<p>여러 포맷 간의 변환 예시는 아래와 같다.</p>
<ol>
<li><strong>WAV에서 MP3로 변환</strong>:</li>
</ol>
<pre><code>ffmpeg -i input.wav -acodec libmp3lame output.mp3
</code></pre>
<ol>
<li><strong>MP3에서 AAC로 변환</strong>:</li>
</ol>
<pre><code>ffmpeg -i input.mp3 -acodec aac output.aac
</code></pre>
<ol>
<li><strong>FLAC에서 OGG로 변환</strong>:</li>
</ol>
<pre><code>ffmpeg -i input.flac -acodec libvorbis output.ogg
</code></pre>
<p>위 예시들은 FFMPEG을 사용하여 다양한 오디오 포맷 간에 변환하는 방법을 보여준다.</p>
<h3 id="_7">오디오 포맷 변환 시 고려 사항</h3>
<ol>
<li><strong>파일 크기</strong>: 포맷과 코덱에 따라 파일 크기가 달라진다. 비손실 압축(예: FLAC)은 음질 손상이 없지만 파일 크기가 크며, 손실 압축(예: MP3, AAC)은 음질 손실이 있지만 파일 크기가 작다.</li>
<li><strong>호환성</strong>: 특정 디바이스나 애플리케이션이 지원하는 포맷과 코덱을 고려해야 한다. 예를 들어, 일부 오디오 플레이어는 특정 포맷을 지원하지 않을 수 있다.</li>
<li><strong>음질</strong>: 비트레이트와 샘플링 레이트는 음질에 직접적인 영향을 미친다. 음질을 유지하면서 파일 크기를 줄이는 것이 목표일 수 있다.</li>
</ol>
<h3 id="_8">주파수 응답과 포맷 변환</h3>
<p>주파수 응답은 오디오 데이터의 품질을 결정하는 또 하나의 중요한 요소이다. 샘플링 레이트와 비트레이트가 주파수 응답에 영향을 미치며, 이를 수식으로 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
f_{\text{max}} = \frac{f_s}{2}
</div>
<script type="math/tex; mode=display">
f_{\text{max}} = \frac{f_s}{2}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">f_{\text{max}}</span><script type="math/tex">f_{\text{max}}</script></span>는 샘플링 레이트에서 표현할 수 있는 최대 주파수이다. 이 이론은 나이퀴스트 정리에 근거하며, <span class="arithmatex"><span class="MathJax_Preview">f_s</span><script type="math/tex">f_s</script></span>가 높을수록 더 넓은 주파수 대역을 표현할 수 있다.</p>
<h3 id="_9">오디오 필터 적용</h3>
<p>오디오 포맷 변환 중 오디오 필터를 적용하여 음질을 개선하거나 특정 효과를 추가할 수 있다. FFMPEG에서는 <code>-af</code> 옵션을 사용하여 다양한 오디오 필터를 적용할 수 있다.</p>
<h4 id="_10">볼륨 조정</h4>
<p>오디오 볼륨을 조정하려면 <code>volume</code> 필터를 사용할 수 있다. 예를 들어, 오디오 볼륨을 50%로 줄이려면 다음 명령어를 사용한다.</p>
<pre><code>ffmpeg -i input.wav -af &quot;volume=0.5&quot; output.mp3
</code></pre>
<p>볼륨 필터는 오디오 신호의 진폭을 변경하여 적용되며, 수식으로는 다음과 같이 표현된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{y}(t) = a \cdot \mathbf{x}(t)
</div>
<script type="math/tex; mode=display">
\mathbf{y}(t) = a \cdot \mathbf{x}(t)
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}(t)</span><script type="math/tex">\mathbf{x}(t)</script></span>는 입력 오디오 신호, <span class="arithmatex"><span class="MathJax_Preview">\mathbf{y}(t)</span><script type="math/tex">\mathbf{y}(t)</script></span>는 필터 적용 후 출력 신호, <span class="arithmatex"><span class="MathJax_Preview">a</span><script type="math/tex">a</script></span>는 볼륨 조정 계수이다.</p>
<h4 id="_11">고역 통과 필터</h4>
<p>고역 통과 필터는 특정 주파수 이상의 신호만 통과시키는 필터로, <code>highpass</code> 필터를 사용하여 적용할 수 있다. 예를 들어, 300Hz 이상의 주파수만 통과시키려면 다음과 같이 설정한다.</p>
<pre><code>ffmpeg -i input.wav -af &quot;highpass=f=300&quot; output.mp3
</code></pre>
<p>고역 통과 필터는 다음과 같은 수식으로 표현된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
H(f) = \begin{cases} 
1 &amp; \text{if } f &gt; f_c \\
0 &amp; \text{if } f \leq f_c
\end{cases}
</div>
<script type="math/tex; mode=display">
H(f) = \begin{cases} 
1 & \text{if } f > f_c \\
0 & \text{if } f \leq f_c
\end{cases}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">f_c</span><script type="math/tex">f_c</script></span>는 컷오프 주파수이다.</p>
<h4 id="_12">저역 통과 필터</h4>
<p>반대로, 저역 통과 필터는 특정 주파수 이하의 신호만 통과시킨다. <code>lowpass</code> 필터를 사용하여 적용할 수 있으며, 예를 들어 500Hz 이하의 주파수만 통과시키려면 다음과 같은 명령어를 사용한다.</p>
<pre><code>ffmpeg -i input.wav -af &quot;lowpass=f=500&quot; output.mp3
</code></pre>
<p>저역 통과 필터의 수식은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
H(f) = \begin{cases} 
1 &amp; \text{if } f \leq f_c \\
0 &amp; \text{if } f &gt; f_c
\end{cases}
</div>
<script type="math/tex; mode=display">
H(f) = \begin{cases} 
1 & \text{if } f \leq f_c \\
0 & \text{if } f > f_c
\end{cases}
</script>
</div>
<h4 id="_13">리버브 효과</h4>
<p>FFMPEG을 사용하여 리버브(잔향) 효과를 추가할 수 있다. 리버브 효과는 <code>aecho</code> 필터를 사용하여 적용되며, 예를 들어 0.8초 간격으로 0.5의 감쇠율을 가진 리버브를 추가하려면 다음과 같이 설정한다.</p>
<pre><code>ffmpeg -i input.wav -af &quot;aecho=0.8:0.9:0.5:0.3&quot; output.mp3
</code></pre>
<p>리버브는 다음과 같은 수식으로 표현할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{y}(t) = \mathbf{x}(t) + \alpha \mathbf{x}(t - \tau)
</div>
<script type="math/tex; mode=display">
\mathbf{y}(t) = \mathbf{x}(t) + \alpha \mathbf{x}(t - \tau)
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}(t)</span><script type="math/tex">\mathbf{x}(t)</script></span>는 입력 신호, <span class="arithmatex"><span class="MathJax_Preview">\mathbf{y}(t)</span><script type="math/tex">\mathbf{y}(t)</script></span>는 출력 신호, <span class="arithmatex"><span class="MathJax_Preview">\alpha</span><script type="math/tex">\alpha</script></span>는 감쇠율, <span class="arithmatex"><span class="MathJax_Preview">\tau</span><script type="math/tex">\tau</script></span>는 리버브 지연 시간이다.</p>
<h3 id="_14">채널 매핑</h3>
<p>FFMPEG에서는 오디오 포맷 변환 중 채널 매핑을 변경할 수 있다. 예를 들어, 스테레오 입력 파일에서 좌우 채널을 서로 바꾸려면 <code>-map_channel</code> 옵션을 사용한다.</p>
<pre><code>ffmpeg -i input.wav -map_channel 0.0.1 0.0.0 output.wav
</code></pre>
<p>이 명령어는 입력 파일의 오른쪽 채널을 왼쪽 채널로, 왼쪽 채널을 오른쪽 채널로 변환한다.</p>
<h3 id="_15">다중 오디오 트랙 처리</h3>
<p>FFMPEG을 사용하면 다중 오디오 트랙이 있는 파일에서 특정 트랙만 추출하거나 변환할 수 있다. <code>-map</code> 옵션을 사용하여 원하는 트랙을 지정할 수 있다.</p>
<p>예를 들어, 두 개의 오디오 트랙이 있는 파일에서 첫 번째 트랙만 변환하려면 다음 명령어를 사용한다.</p>
<pre><code>ffmpeg -i input.mkv -map 0:a:0 output.mp3
</code></pre>
<p>이 명령어는 첫 번째 오디오 트랙을 MP3 포맷으로 변환한다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A008/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A008/" class="btn btn-xs btn-link">
        코덱 설정 및 변경
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A006/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A006/" class="btn btn-xs btn-link">
        비디오 포맷 변환
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>