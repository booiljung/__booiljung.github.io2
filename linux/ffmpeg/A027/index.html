<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/linux/ffmpeg/A027/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>오디오 자르기 및 병합 - 실험 도서관</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\uc624\ub514\uc624 \uc790\ub974\uae30", url: "#_top", children: [
              {title: "\uc2dc\uc791 \uc2dc\uac04\uacfc \uc885\ub8cc \uc2dc\uac04\uc744 \uc9c0\uc815\ud558\uc5ec \uc624\ub514\uc624 \uc790\ub974\uae30", url: "#_2" },
              {title: "\uc608\uc2dc", url: "#_3" },
              {title: "\uc790\ub974\uae30 \uba85\ub839\uc758 \ub0b4\ubd80 \ucc98\ub9ac", url: "#_4" },
          ]},
          {title: "\uc624\ub514\uc624 \ubcd1\ud569", url: "#_5", children: [
              {title: "\ud30c\uc77c \ubaa9\ub85d \uc0dd\uc131", url: "#_6" },
              {title: "FFMPEG \uba85\ub839\uc5b4", url: "#ffmpeg" },
              {title: "\ubcd1\ud569 \uba85\ub839\uc758 \ub0b4\ubd80 \ucc98\ub9ac", url: "#_7" },
          ]},
          {title: "\uc608\uc2dc", url: "#_8", children: [
          ]},
          {title: "\uc624\ub514\uc624 \ud30c\uc77c \ud615\uc2dd\uacfc \ucf54\ub371\uc758 \ud638\ud658\uc131", url: "#_9", children: [
              {title: "\ucf54\ub371 \ubcc0\ud658", url: "#_10" },
          ]},
          {title: "\uc2dc\uac04 \ub3d9\uae30\ud654 \ubb38\uc81c", url: "#_11", children: [
              {title: "\uc2dc\uac04 \uc624\ud504\uc14b \uc801\uc6a9", url: "#_12" },
          ]},
          {title: "\ubcd1\ud569 \uc2dc \uc74c\uc9c8 \uc190\uc2e4 \ubc29\uc9c0", url: "#_13", children: [
          ]},
          {title: "\ubcd1\ud569 \uc791\uc5c5\uc758 \ud6a8\uc728\uc131", url: "#_14", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A028/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A028/" class="btn btn-xs btn-link">
        비디오/오디오 동기화
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A026/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A026/" class="btn btn-xs btn-link">
        비디오 자르기 및 병합
      </a>
    </div>
    
  </div>

    

    <h3 id="_1">오디오 자르기</h3>
<p>오디오 자르기는 주어진 오디오 파일에서 특정 시간 구간을 추출하거나 제거하는 작업을 의미한다. FFMPEG에서는 <code>-ss</code>와 <code>-to</code> 옵션을 사용하여 원하는 시간 범위를 지정하여 오디오 파일을 자를 수 있다.</p>
<h4 id="_2">시작 시간과 종료 시간을 지정하여 오디오 자르기</h4>
<p>오디오 파일을 자를 때, 시작 시간 <code>t_1</code>과 종료 시간 <code>t_2</code>를 지정할 수 있다. 이때 FFMPEG 명령어는 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp3 -ss t_1 -to t_2 -c copy output.mp3
</code></pre>
<p>여기서, <code>t_1</code>과 <code>t_2</code>는 각각 자르기 시작 시간과 종료 시간을 의미하며, 형식은 "hh:mm:ss" 또는 초 단위로 표현할 수 있다.</p>
<h4 id="_3">예시</h4>
<p>아래 명령은 10초에서 30초까지의 구간을 추출하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp3 -ss 00:00:10 -to 00:00:30 -c copy output.mp3
</code></pre>
<p>이 명령어는 원본 오디오에서 10초부터 30초까지의 부분을 자르고, 나머지 부분은 버린다.</p>
<h4 id="_4">자르기 명령의 내부 처리</h4>
<p>FFMPEG에서 오디오 자르기를 수행할 때는 각 샘플의 시작점과 종료점을 시간에 맞게 지정하여 처리한다. 오디오 데이터는 보통 시간에 따라 연속된 샘플로 나타나며, 이를 수학적으로는 연속 함수로 표현할 수 있다. 시간 <span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>에서의 오디오 신호 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}(t)</span><script type="math/tex">\mathbf{x}(t)</script></span>는 다음과 같이 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{x}(t) = \sum_{n=0}^{N-1} \mathbf{a}_n \cdot \mathbf{b}_n(t)
</div>
<script type="math/tex; mode=display">
\mathbf{x}(t) = \sum_{n=0}^{N-1} \mathbf{a}_n \cdot \mathbf{b}_n(t)
</script>
</div>
<p>여기서, <span class="arithmatex"><span class="MathJax_Preview">\mathbf{a}_n</span><script type="math/tex">\mathbf{a}_n</script></span>은 오디오 신호의 진폭 벡터, <span class="arithmatex"><span class="MathJax_Preview">\mathbf{b}_n(t)</span><script type="math/tex">\mathbf{b}_n(t)</script></span>는 시간 <span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>에서의 샘플을 의미한다.</p>
<p>오디오 자르기 시, 주어진 시작 시간 <span class="arithmatex"><span class="MathJax_Preview">t_1</span><script type="math/tex">t_1</script></span>과 종료 시간 <span class="arithmatex"><span class="MathJax_Preview">t_2</span><script type="math/tex">t_2</script></span>를 기반으로 <span class="arithmatex"><span class="MathJax_Preview">t_1 \leq t \leq t_2</span><script type="math/tex">t_1 \leq t \leq t_2</script></span> 범위의 신호 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}(t)</span><script type="math/tex">\mathbf{x}(t)</script></span>만을 추출하게 된다.</p>
<h3 id="_5">오디오 병합</h3>
<p>오디오 병합은 여러 오디오 파일을 하나의 파일로 합치는 작업을 의미한다. FFMPEG에서는 파일 목록을 작성한 후, <code>concat</code> 프로토콜을 사용하여 병합할 수 있다.</p>
<h4 id="_6">파일 목록 생성</h4>
<p>먼저 병합하려는 오디오 파일들의 목록을 <code>.txt</code> 파일로 작성한다. 각 파일의 경로는 다음 형식으로 입력해야 한다.</p>
<pre><code class="language-plaintext">file 'path/to/file1.mp3'
file 'path/to/file2.mp3'
file 'path/to/file3.mp3'
</code></pre>
<h4 id="ffmpeg">FFMPEG 명령어</h4>
<p>파일 목록을 생성한 후, 다음 명령어로 파일을 병합할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -f concat -safe 0 -i file_list.txt -c copy output.mp3
</code></pre>
<p>여기서 <code>file_list.txt</code>는 병합할 파일들의 목록을 포함하는 파일이다.</p>
<h4 id="_7">병합 명령의 내부 처리</h4>
<p>오디오 파일 병합은 시간 축을 따라 여러 파일을 순차적으로 이어 붙이는 작업이다. 병합할 오디오 파일을 각각 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_1(t), \mathbf{x}_2(t), \dots, \mathbf{x}_M(t)</span><script type="math/tex">\mathbf{x}_1(t), \mathbf{x}_2(t), \dots, \mathbf{x}_M(t)</script></span>로 표현할 수 있으며, 전체 병합된 신호 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{y}(t)</span><script type="math/tex">\mathbf{y}(t)</script></span>는 다음과 같이 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{y}(t) = 
\begin{cases}
    \mathbf{x}_1(t) &amp; 0 \leq t &lt; T_1 \\
    \mathbf{x}_2(t-T_1) &amp; T_1 \leq t &lt; T_2 \\
    \dots &amp; \dots \\
    \mathbf{x}_M(t-T_{M-1}) &amp; T_{M-1} \leq t &lt; T_M
\end{cases}
</div>
<script type="math/tex; mode=display">
\mathbf{y}(t) = 
\begin{cases}
    \mathbf{x}_1(t) & 0 \leq t < T_1 \\
    \mathbf{x}_2(t-T_1) & T_1 \leq t < T_2 \\
    \dots & \dots \\
    \mathbf{x}_M(t-T_{M-1}) & T_{M-1} \leq t < T_M
\end{cases}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">T_1, T_2, \dots, T_M</span><script type="math/tex">T_1, T_2, \dots, T_M</script></span>은 각각 파일 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_1(t), \mathbf{x}_2(t), \dots, \mathbf{x}_M(t)</span><script type="math/tex">\mathbf{x}_1(t), \mathbf{x}_2(t), \dots, \mathbf{x}_M(t)</script></span>의 지속 시간이다. 이를 통해 각 파일을 시간적으로 연결하여 하나의 파일로 병합할 수 있다.</p>
<h3 id="_8">예시</h3>
<p>다음 명령은 세 개의 MP3 파일을 병합하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -f concat -safe 0 -i file_list.txt -c copy output.mp3
</code></pre>
<p>병합된 파일의 재생 시간은 각 파일의 재생 시간을 더한 값이 된다.</p>
<h3 id="_9">오디오 파일 형식과 코덱의 호환성</h3>
<p>오디오 파일을 병합할 때, 파일들의 형식과 코덱이 동일해야 원활한 병합이 가능한다. FFMPEG은 각 오디오 파일의 형식을 확인하고 동일한 코덱으로 인코딩된 경우에만 병합을 시도한다. 만약 다른 코덱이나 형식을 사용하는 파일들이 있을 경우, 병합 전에 파일들을 동일한 형식으로 변환해야 한다.</p>
<h4 id="_10">코덱 변환</h4>
<p>병합 전, 각 오디오 파일을 동일한 코덱으로 변환하기 위해 다음과 같은 명령을 사용할 수 있다. 이 과정에서 <code>-c:a</code> 옵션을 사용하여 오디오 코덱을 지정한다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp3 -c:a libmp3lame output1.mp3
ffmpeg -i input2.wav -c:a libmp3lame output2.mp3
</code></pre>
<p>이 예시에서 MP3 코덱을 사용하여 오디오 파일을 변환한 후, 변환된 파일들을 병합할 수 있다.</p>
<h3 id="_11">시간 동기화 문제</h3>
<p>오디오 파일 병합 시, 파일들의 시간이 완벽하게 동기화되지 않으면 문제를 일으킬 수 있다. 이를 해결하기 위해서는 각 파일의 시작점과 종료점을 정확히 맞추는 것이 중요하다. FFMPEG에서 이를 제어하기 위한 옵션으로는 <code>-itsoffset</code>을 사용할 수 있다. </p>
<p><code>-itsoffset</code> 옵션은 특정 파일의 재생 시간을 조정하여 시간 차이를 보정하는 역할을 한다.</p>
<h4 id="_12">시간 오프셋 적용</h4>
<p>다음 예시에서는 두 오디오 파일을 병합하는데, 첫 번째 파일을 2초 뒤에 재생하도록 조정한다.</p>
<pre><code class="language-bash">ffmpeg -itsoffset 2 -i input1.mp3 -i input2.mp3 -c copy output.mp3
</code></pre>
<p>이 명령은 첫 번째 오디오 파일의 재생 시간을 2초 지연시켜 두 파일을 병합한다.</p>
<h3 id="_13">병합 시 음질 손실 방지</h3>
<p>오디오 파일 병합 시 음질 손실을 최소화하기 위해, FFMPEG에서 <code>-c copy</code> 옵션을 사용하는 것이 중요하다. 이 옵션은 파일을 다시 인코딩하지 않고, 그대로 복사하여 병합하기 때문에 음질 손실을 방지할 수 있다. 하지만, 파일 형식과 코덱이 동일할 때만 사용할 수 있다.</p>
<h3 id="_14">병합 작업의 효율성</h3>
<p>FFMPEG은 오디오 파일을 빠르게 병합할 수 있도록 최적화되어 있다. 파일 크기나 길이에 따라 병합 시간에 차이가 있을 수 있지만, 대체로 FFMPEG은 병합 작업을 효율적으로 처리할 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A028/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A028/" class="btn btn-xs btn-link">
        비디오/오디오 동기화
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A026/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A026/" class="btn btn-xs btn-link">
        비디오 자르기 및 병합
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>