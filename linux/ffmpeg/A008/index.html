<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/linux/ffmpeg/A008/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>코덱 설정 및 변경 - 실험 도서관</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\ucf54\ub371\uc774\ub780?", url: "#_top", children: [
          ]},
          {title: "\ucf54\ub371 \uc885\ub958", url: "#_2", children: [
          ]},
          {title: "\ucf54\ub371 \uc120\ud0dd \ubc29\ubc95", url: "#_3", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815 \uc635\uc158", url: "#_4", children: [
          ]},
          {title: "\ucf54\ub371 \ubcc0\uacbd \uc2dc \uc8fc\uc758 \uc0ac\ud56d", url: "#_5", children: [
          ]},
          {title: "\ube44\ub514\uc624 \ucf54\ub371 \ubcc0\uacbd \uc608\uc81c", url: "#_6", children: [
          ]},
          {title: "\uc624\ub514\uc624 \ucf54\ub371 \ubcc0\uacbd \uc608\uc81c", url: "#_7", children: [
          ]},
          {title: "\ucf54\ub371\uacfc \uad00\ub828\ub41c \uc8fc\uc694 \uc218\uc2dd", url: "#_8", children: [
          ]},
          {title: "\ube44\ud2b8\ub808\uc774\ud2b8\uc640 \ud30c\uc77c \ud06c\uae30\uc758 \uad00\uacc4", url: "#_9", children: [
          ]},
          {title: "\ucf54\ub371 \ubcc0\uacbd \uc2dc \ube44\ud2b8\ub808\uc774\ud2b8 \uc870\uc815", url: "#_10", children: [
          ]},
          {title: "\ube44\ub514\uc624 \uc778\ucf54\ub529\uacfc \ube44\ud2b8\ub808\uc774\ud2b8 \uc608\uc2dc", url: "#_11", children: [
          ]},
          {title: "\uac00\ubcc0 \ube44\ud2b8\ub808\uc774\ud2b8(VBR)\uc640 \uace0\uc815 \ube44\ud2b8\ub808\uc774\ud2b8(CBR)", url: "#vbr-cbr", children: [
          ]},
          {title: "\ucf54\ub371 \ubcc0\uacbd \uc2dc \ud30c\uc77c \ud638\ud658\uc131", url: "#_12", children: [
          ]},
          {title: "\ucf54\ub371 \ubcc0\uacbd\uacfc \ud3ec\ub9f7 \uac04\uc758 \uad00\uacc4", url: "#_13", children: [
          ]},
          {title: "FFmpeg\uc5d0\uc11c \ucf54\ub371 \uc9c0\uc6d0 \ud655\uc778", url: "#ffmpeg", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815 \ucd5c\uc801\ud654", url: "#_14", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815 \uc2dc \ube44\ud2b8\ub808\uc774\ud2b8\uc640 \ubc84\ud37c \uc0ac\uc774\uc988", url: "#_15", children: [
          ]},
          {title: "\ud558\ub4dc\uc6e8\uc5b4 \uac00\uc18d\uc744 \ud65c\uc6a9\ud55c \ucf54\ub371 \uc124\uc815", url: "#_16", children: [
          ]},
          {title: "NVIDIA NVENC \uc778\ucf54\ub529 \uc608\uc2dc", url: "#nvidia-nvenc", children: [
          ]},
          {title: "\uc778\ucf54\ub529 \uc18d\ub3c4\uc640 \ud558\ub4dc\uc6e8\uc5b4 \uac00\uc18d", url: "#_17", children: [
          ]},
          {title: "\ud558\ub4dc\uc6e8\uc5b4 \uac00\uc18d \ub514\ucf54\ub529", url: "#_18", children: [
          ]},
          {title: "\ud558\ub4dc\uc6e8\uc5b4 \uac00\uc18d\uc758 \ud55c\uacc4", url: "#_19", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815\uc744 \uc704\ud55c \ucee4\ub9e8\ub4dc\ub77c\uc778 \uad6c\uc870", url: "#_20", children: [
          ]},
          {title: "\ucf54\ub371 \uc124\uc815 \uc2dc \ubb38\uc81c \ud574\uacb0", url: "#_21", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A009/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A009/" class="btn btn-xs btn-link">
        비디오 인코딩 및 디코딩
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A007/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A007/" class="btn btn-xs btn-link">
        오디오 포맷 변환
      </a>
    </div>
    
  </div>

    

    <h3 id="_1">코덱이란?</h3>
<p>코덱은 <strong>코더-디코더(Coder-Decoder)</strong>의 줄임말로, 비디오나 오디오 데이터를 인코딩하거나 디코딩하는 데 사용된다. FFMPEG에서는 다양한 코덱을 지원하며, 사용자가 원하는 포맷에 맞게 코덱을 설정하거나 변경할 수 있다. 코덱은 데이터를 압축하고 변환하는 역할을 하므로, 품질, 압축률, 처리 속도 등에 큰 영향을 미친다.</p>
<h3 id="_2">코덱 종류</h3>
<p>FFMPEG에서 사용할 수 있는 주요 코덱의 종류는 다음과 같다.</p>
<ul>
<li><strong>비디오 코덱</strong>: H.264, VP8, VP9, MPEG-4, HEVC 등</li>
<li><strong>오디오 코덱</strong>: AAC, MP3, Vorbis, FLAC 등</li>
<li><strong>자막 코덱</strong>: SubRip, ASS, VobSub 등</li>
</ul>
<h3 id="_3">코덱 선택 방법</h3>
<p>FFMPEG에서 코덱을 선택하는 방법은 <code>-c</code> 또는 <code>-codec</code> 옵션을 사용하는 것이다. 이 옵션을 사용하여 입력 파일 또는 출력 파일에 사용할 코덱을 지정할 수 있다. 기본 형식은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input_file -c:v video_codec -c:a audio_codec output_file
</code></pre>
<ul>
<li><code>-c:v</code>: 비디오 코덱을 지정한다.</li>
<li><code>-c:a</code>: 오디오 코덱을 지정한다.</li>
<li><code>-i</code>: 입력 파일을 지정한다.</li>
<li><code>output_file</code>: 출력 파일을 지정한다.</li>
</ul>
<h3 id="_4">코덱 설정 옵션</h3>
<p>코덱을 설정할 때 다양한 옵션을 적용할 수 있다. 각 코덱은 고유한 설정 값을 가지고 있으며, 비디오 또는 오디오의 품질, 압축률, 비트레이트 등을 조정할 수 있다. 예를 들어, H.264 코덱을 사용할 때는 <code>-preset</code>, <code>-tune</code>, <code>-profile</code> 등의 옵션을 활용하여 품질을 설정할 수 있다.</p>
<ul>
<li><code>-preset</code>: 인코딩 속도와 압축률 간의 균형을 조정한다.</li>
<li><code>-tune</code>: 특정 콘텐츠 유형에 맞게 인코딩을 최적화한다.</li>
<li><code>-profile</code>: 인코딩 품질을 설정한다. 일반적으로 <code>baseline</code>, <code>main</code>, <code>high</code> 등으로 나뉜다.</li>
</ul>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libx264 -preset slow -tune film -profile:v high output.mp4
</code></pre>
<p>이 예제에서는 H.264 코덱을 사용하여 비디오를 인코딩하며, 인코딩 속도는 느리게(<code>slow</code>), 영화 콘텐츠에 최적화(<code>film</code>), 그리고 높은 품질(<code>high</code>)을 설정한다.</p>
<h3 id="_5">코덱 변경 시 주의 사항</h3>
<p>코덱을 변경할 때는 입력 파일의 형식과 코덱의 호환성을 고려해야 한다. 예를 들어, MP4 파일은 H.264와 AAC 코덱을 사용하는 것이 일반적이다. 그러나 MKV 파일은 더 다양한 코덱을 지원하므로 상황에 맞게 코덱을 변경할 수 있다.</p>
<p>또한, 파일 크기와 품질 사이의 균형도 중요한 요소이다. 무손실 코덱을 사용하면 파일 크기가 커질 수 있지만, 압축률이 높은 코덱을 사용하면 품질 저하가 발생할 수 있다.</p>
<h3 id="_6">비디오 코덱 변경 예제</h3>
<p>H.264에서 VP9로 비디오 코덱을 변경하는 예시는 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libvpx-vp9 -b:v 2M output.webm
</code></pre>
<p>이 명령어는 H.264 코덱으로 인코딩된 MP4 파일을 VP9 코덱으로 변환하고, 비트레이트를 2 Mbps로 설정한다. 여기서 <code>-b:v</code> 옵션은 비디오 비트레이트를 지정하는 데 사용된다.</p>
<h3 id="_7">오디오 코덱 변경 예제</h3>
<p>MP3에서 AAC로 오디오 코덱을 변경하는 예시는 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp3 -c:a aac -b:a 128k output.m4a
</code></pre>
<p>이 명령어는 MP3 파일을 AAC 코덱으로 변환하고, 오디오 비트레이트를 128 kbps로 설정한다. <code>-b:a</code> 옵션은 오디오 비트레이트를 지정하는 데 사용된다.</p>
<h3 id="_8">코덱과 관련된 주요 수식</h3>
<p>코덱 설정 및 변경 과정에서 비트레이트를 이해하는 것이 중요하다. 비트레이트는 초당 전송되는 비트의 수를 나타내며, 이는 파일의 품질과 크기에 영향을 준다. 비트레이트는 다음 수식으로 표현될 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\text{Bitrate} = \frac{\mathbf{File \ Size}}{\mathbf{Duration}}
</div>
<script type="math/tex; mode=display">
\text{Bitrate} = \frac{\mathbf{File \ Size}}{\mathbf{Duration}}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{File \ Size}</span><script type="math/tex">\mathbf{File \ Size}</script></span>는 파일의 크기(비트 단위),
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Duration}</span><script type="math/tex">\mathbf{Duration}</script></span>은 파일의 재생 시간(초 단위)이다.</p>
<p>비트레이트가 높을수록 파일의 품질은 높아지지만, 파일 크기도 커진다. 반대로 비트레이트가 낮으면 파일 크기는 작아지지만 품질이 저하될 수 있다.</p>
<h3 id="_9">비트레이트와 파일 크기의 관계</h3>
<p>파일의 크기는 비트레이트와 파일 재생 시간의 곱으로 표현할 수 있다. 이를 수식으로 나타내면 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{File \ Size} = \mathbf{Bitrate} \times \mathbf{Duration}
</div>
<script type="math/tex; mode=display">
\mathbf{File \ Size} = \mathbf{Bitrate} \times \mathbf{Duration}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{File \ Size}</span><script type="math/tex">\mathbf{File \ Size}</script></span>는 비트 단위로 표현된 파일의 크기,
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Bitrate}</span><script type="math/tex">\mathbf{Bitrate}</script></span>는 초당 전송되는 비트 수(비트/초),
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Duration}</span><script type="math/tex">\mathbf{Duration}</script></span>은 파일의 재생 시간(초)이다.</p>
<p>이 수식을 통해 비트레이트와 파일 크기의 관계를 쉽게 파악할 수 있다. 높은 비트레이트를 설정하면 품질은 좋아지지만 파일 크기가 커지게 되며, 낮은 비트레이트는 그 반대의 효과를 낳습니다.</p>
<h3 id="_10">코덱 변경 시 비트레이트 조정</h3>
<p>코덱을 변경할 때 비트레이트 설정을 적절하게 조정해야 한다. FFMPEG에서 비트레이트를 조정하는 옵션은 다음과 같다.</p>
<ul>
<li><strong>비디오 비트레이트 설정</strong>: <code>-b:v</code></li>
<li><strong>오디오 비트레이트 설정</strong>: <code>-b:a</code></li>
</ul>
<p>비트레이트를 설정할 때는 콘텐츠의 복잡성과 요구되는 품질을 고려해야 한다. 예를 들어, 동적인 장면이 많은 비디오는 더 높은 비트레이트가 필요할 수 있으며, 정적인 장면이 많은 비디오는 더 낮은 비트레이트로도 충분한 품질을 유지할 수 있다.</p>
<h3 id="_11">비디오 인코딩과 비트레이트 예시</h3>
<p>다음은 5 Mbps의 비트레이트를 설정하여 H.264 코덱으로 비디오를 인코딩하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libx264 -b:v 5M output.mp4
</code></pre>
<p>이 명령어에서 <code>-b:v 5M</code>은 비디오 비트레이트를 5 Mbps로 설정하는 옵션이다. 이 설정은 고화질 비디오 인코딩에 적합한다.</p>
<h3 id="vbr-cbr">가변 비트레이트(VBR)와 고정 비트레이트(CBR)</h3>
<p>코덱 설정 시 중요한 요소 중 하나는 가변 비트레이트(VBR)와 고정 비트레이트(CBR)의 선택이다.</p>
<ul>
<li><strong>가변 비트레이트(VBR)</strong>: 파일의 복잡성에 따라 비트레이트가 변동하며, 고품질을 유지하면서도 파일 크기를 줄일 수 있다.</li>
<li><strong>고정 비트레이트(CBR)</strong>: 일정한 비트레이트로 파일을 인코딩하며, 일정한 스트리밍 품질을 제공할 수 있다.</li>
</ul>
<p>FFMPEG에서 가변 비트레이트를 설정하려면 <code>-crf</code> 옵션을 사용할 수 있으며, 고정 비트레이트는 <code>-b:v</code> 옵션으로 설정한다. 예를 들어, H.264 코덱에서 가변 비트레이트를 사용한 인코딩 예시는 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libx264 -crf 23 -preset medium output.mp4
</code></pre>
<p>여기서 <code>-crf</code>는 <strong>Constant Rate Factor</strong>로, 숫자가 낮을수록 높은 품질을 의미하며, <code>23</code>은 일반적으로 균형 잡힌 품질과 파일 크기를 제공하는 값이다.</p>
<h3 id="_12">코덱 변경 시 파일 호환성</h3>
<p>코덱을 변경할 때는 출력 파일이 재생될 플랫폼 또는 미디어 플레이어와의 호환성을 고려해야 한다. 일부 코덱은 특정 플레이어에서만 지원되며, 잘못된 코덱을 사용하면 파일이 재생되지 않을 수 있다.</p>
<p>예를 들어, 웹 브라우저에서 재생 가능한 비디오를 만들려면 H.264 또는 VP9 같은 웹 친화적인 코덱을 선택해야 한다. 반면에 무손실 압축을 필요로 하는 환경에서는 FLAC 또는 ALAC와 같은 오디오 코덱을 선택할 수 있다.</p>
<h3 id="_13">코덱 변경과 포맷 간의 관계</h3>
<p>코덱을 변경할 때 주의해야 할 또 다른 요소는 <strong>컨테이너 포맷</strong>과의 관계이다. 컨테이너 포맷은 비디오, 오디오, 자막 등 다양한 스트림을 하나의 파일로 묶는 역할을 하며, 특정 포맷은 특정 코덱과 잘 맞습니다. 예를 들어, MP4는 H.264와 AAC 코덱을 가장 많이 사용하고, MKV는 다양한 코덱을 지원하는 유연한 포맷이다.</p>
<p>컨테이너 포맷을 잘못 설정하면 파일이 정상적으로 재생되지 않거나, 원치 않는 품질 저하가 발생할 수 있다. 다음은 MP4에서 MKV로 컨테이너 포맷을 변경하면서 코덱을 VP9와 Vorbis로 바꾸는 예제이다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libvpx-vp9 -c:a libvorbis output.mkv
</code></pre>
<p>이 명령어는 비디오 코덱을 <strong>VP9</strong>, 오디오 코덱을 <strong>Vorbis</strong>로 설정하며, 결과 파일의 컨테이너 포맷을 <strong>MKV</strong>로 변경한다.</p>
<h3 id="ffmpeg">FFmpeg에서 코덱 지원 확인</h3>
<p>FFMPEG이 지원하는 코덱 목록을 확인하려면 다음 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -codecs
</code></pre>
<p>이 명령어는 FFMPEG이 지원하는 모든 코덱의 목록을 표시하며, 각 코덱이 인코딩 가능한지, 디코딩 가능한지에 대한 정보도 함께 제공된다. 인코딩이 가능한 코덱에는 <strong>E</strong>가, 디코딩이 가능한 코덱에는 <strong>D</strong>가 표시된다.</p>
<p>예를 들어, <code>libx264</code> 코덱은 인코딩과 디코딩이 모두 가능한 코덱으로 표시된다.</p>
<pre><code>DEV.L. libx264              H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (encoders: libx264 libx264rgb)
</code></pre>
<p>여기서 <strong>DEV.L.</strong>은 해당 코덱이 디코딩(Decoding), 인코딩(Encoding), 비디오(Video), 그리고 <strong>Lossy</strong>(손실 압축)를 지원함을 나타낸다.</p>
<h3 id="_14">코덱 설정 최적화</h3>
<p>FFMPEG에서 코덱을 최적화할 때는 사용 사례에 맞는 설정을 선택하는 것이 중요하다. 예를 들어, 다음과 같은 질문들을 고려해야 한다.</p>
<ul>
<li><strong>목표 비트레이트는 무엇인가?</strong></li>
<li><strong>파일 크기를 최소화하려는가?</strong></li>
<li><strong>최고의 화질을 유지해야 하는가?</strong></li>
<li><strong>어떤 플랫폼에서 재생될 것인가?</strong></li>
</ul>
<p>이러한 질문에 따라 적절한 코덱과 비트레이트를 선택하고, 필요한 경우 <code>-crf</code>, <code>-b:v</code>, <code>-maxrate</code>, <code>-bufsize</code> 등의 옵션을 사용하여 품질과 파일 크기를 조정할 수 있다.</p>
<h3 id="_15">코덱 설정 시 비트레이트와 버퍼 사이즈</h3>
<p>FFMPEG에서 비디오 인코딩을 할 때 버퍼 크기를 설정하면 인코딩 과정에서 비트레이트의 변동성을 조절할 수 있다. 버퍼 크기는 다음 수식으로 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{Buffer \ Size} = \frac{\mathbf{Max \ Bitrate} \times \mathbf{Delay \ Time}}{\mathbf{Packet \ Size}}
</div>
<script type="math/tex; mode=display">
\mathbf{Buffer \ Size} = \frac{\mathbf{Max \ Bitrate} \times \mathbf{Delay \ Time}}{\mathbf{Packet \ Size}}
</script>
</div>
<p>여기서:
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Buffer \ Size}</span><script type="math/tex">\mathbf{Buffer \ Size}</script></span>는 버퍼의 크기,
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Max \ Bitrate}</span><script type="math/tex">\mathbf{Max \ Bitrate}</script></span>는 최대 비트레이트,
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Delay \ Time}</span><script type="math/tex">\mathbf{Delay \ Time}</script></span>은 허용되는 지연 시간,
- <span class="arithmatex"><span class="MathJax_Preview">\mathbf{Packet \ Size}</span><script type="math/tex">\mathbf{Packet \ Size}</script></span>는 전송되는 패킷의 크기이다.</p>
<p>버퍼 크기를 설정하면 인코딩 시 비트레이트 변동성을 더 효율적으로 관리할 수 있으며, 이를 통해 안정적인 스트리밍을 구현할 수 있다. 다음은 최대 비트레이트와 버퍼 크기를 설정하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libx264 -b:v 2M -maxrate 2.5M -bufsize 5M output.mp4
</code></pre>
<p>위 예시에서는 비디오 비트레이트를 2 Mbps로 설정하고, 최대 비트레이트는 2.5 Mbps, 버퍼 크기는 5 Mbps로 설정하였다.</p>
<h3 id="_16">하드웨어 가속을 활용한 코덱 설정</h3>
<p>FFMPEG은 하드웨어 가속을 지원하여 인코딩 및 디코딩 성능을 향상시킬 수 있다. 하드웨어 가속을 활용하면 CPU 부하를 줄이고, 처리 속도를 크게 향상시킬 수 있다. 주로 NVIDIA의 NVENC, AMD의 VCE, 그리고 Intel의 QSV 같은 하드웨어 기반 인코더가 사용된다.</p>
<p>하드웨어 가속을 사용하려면 적절한 드라이버가 설치되어 있어야 하며, FFMPEG에서 지원하는 하드웨어 인코더를 사용할 수 있도록 설정해야 한다. 하드웨어 인코딩에 사용할 수 있는 코덱은 다음과 같다.</p>
<ul>
<li><strong>NVIDIA NVENC</strong>: <code>h264_nvenc</code>, <code>hevc_nvenc</code></li>
<li><strong>Intel QSV</strong>: <code>h264_qsv</code>, <code>hevc_qsv</code></li>
<li><strong>AMD VCE</strong>: <code>h264_amf</code>, <code>hevc_amf</code></li>
</ul>
<h3 id="nvidia-nvenc">NVIDIA NVENC 인코딩 예시</h3>
<p>NVIDIA NVENC를 활용하여 H.264 코덱으로 비디오를 인코딩하는 명령어는 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v h264_nvenc -preset slow -b:v 5M output.mp4
</code></pre>
<p>이 명령어는 GPU를 사용하여 H.264 코덱으로 비디오를 인코딩하고, 비트레이트를 5 Mbps로 설정하며, <code>-preset</code> 옵션은 인코딩 속도를 조정한다.</p>
<h3 id="_17">인코딩 속도와 하드웨어 가속</h3>
<p>하드웨어 가속을 사용할 때 중요한 요소는 인코딩 속도와 품질 간의 균형이다. 하드웨어 기반 인코더는 CPU보다 빠른 속도로 작업을 처리할 수 있지만, 경우에 따라 소프트웨어 인코더보다 품질이 낮을 수 있다. 예를 들어, NVENC는 빠른 속도를 제공하지만, 높은 품질의 비디오를 원할 경우에는 소프트웨어 기반의 libx264가 더 적합할 수 있다.</p>
<p>다음은 하드웨어 가속을 사용할 때 성능을 최적화하는 몇 가지 방법이다.</p>
<ol>
<li>
<p><strong>프리셋 조정</strong>: 하드웨어 가속 인코더는 다양한 프리셋을 제공하여 인코딩 속도와 품질을 조절할 수 있다. 예를 들어, <code>-preset</code> 옵션을 사용하여 <code>fast</code>, <code>medium</code>, <code>slow</code> 등의 설정을 선택할 수 있다.</p>
</li>
<li>
<p><strong>비트레이트 조정</strong>: 하드웨어 가속을 사용할 때 비트레이트를 적절히 설정하면 품질을 높일 수 있다. <code>-b:v</code>와 같은 옵션을 사용하여 비트레이트를 적절히 조절하라.</p>
</li>
<li>
<p><strong>고정 비트레이트(CBR)</strong>와 가변 비트레이트(VBR)**: 하드웨어 가속을 사용할 때는 주로 고정 비트레이트(CBR)를 사용하는 것이 일반적이다. 그러나 가변 비트레이트(VBR)를 사용하면 특정 장면에서 품질을 더 높일 수 있다.</p>
</li>
</ol>
<h3 id="_18">하드웨어 가속 디코딩</h3>
<p>디코딩 역시 하드웨어 가속을 통해 속도를 크게 향상시킬 수 있다. 예를 들어, NVIDIA의 하드웨어 가속 디코더를 사용하려면 다음과 같은 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -hwaccel cuda -i input.mp4 -c:v h264 output.mp4
</code></pre>
<p>이 명령어는 CUDA 기반 하드웨어 가속을 사용하여 H.264 비디오를 디코딩한다.</p>
<h3 id="_19">하드웨어 가속의 한계</h3>
<p>하드웨어 가속은 매우 유용하지만, 몇 가지 한계가 존재한다. 특히, 지원되는 코덱이나 해상도에 제한이 있을 수 있으며, 특정 플랫폼에서는 하드웨어 가속이 지원되지 않을 수 있다. 따라서 인코딩 또는 디코딩 작업을 하기 전에 하드웨어 가속의 지원 여부를 확인하는 것이 중요하다.</p>
<p>또한, 하드웨어 인코더는 소프트웨어 인코더보다 품질이 떨어질 수 있기 때문에, 최고 품질의 비디오가 필요하다면 소프트웨어 인코더를 사용하는 것이 더 나은 선택일 수 있다.</p>
<h3 id="_20">코덱 설정을 위한 커맨드라인 구조</h3>
<p>다음은 코덱 설정 및 변경에 대한 일반적인 FFMPEG 명령어 구조이다.</p>
<pre><code class="language-bash">ffmpeg -i input_file -c:v video_codec -b:v video_bitrate -c:a audio_codec -b:a audio_bitrate output_file
</code></pre>
<p>이 명령어 구조에서:
- <code>-c:v</code>는 비디오 코덱을 설정한다.
- <code>-b:v</code>는 비디오 비트레이트를 설정한다.
- <code>-c:a</code>는 오디오 코덱을 설정한다.
- <code>-b:a</code>는 오디오 비트레이트를 설정한다.</p>
<h3 id="_21">코덱 설정 시 문제 해결</h3>
<p>코덱 설정 중 발생할 수 있는 일반적인 문제는 다음과 같다.</p>
<ol>
<li>
<p><strong>지원되지 않는 코덱</strong>: 특정 컨테이너에서 지원되지 않는 코덱을 사용할 때 오류가 발생할 수 있다.</p>
</li>
<li>
<p><strong>파일 크기 문제</strong>: 비트레이트 설정이 적절하지 않으면 예상보다 큰 파일 크기나 낮은 품질의 파일이 생성될 수 있다.</p>
</li>
<li>
<p><strong>인코딩 속도 문제</strong>: <code>-preset</code> 옵션을 적절하게 설정하지 않으면 인코딩 속도가 너무 느리거나 품질이 떨어질 수 있다.</p>
</li>
</ol>
<p>이와 같은 문제를 해결하기 위해 FFMPEG의 로그를 확인하고, 적절한 옵션을 조정해야 한다. FFMPEG의 로그를 활성화하려면 <code>-loglevel</code> 옵션을 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input.mp4 -c:v libx264 -loglevel verbose output.mp4
</code></pre>
<p>이 명령어는 자세한 로그를 출력하여 문제를 디버깅하는 데 도움을 줄 수 있다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A009/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A009/" class="btn btn-xs btn-link">
        비디오 인코딩 및 디코딩
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A007/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A007/" class="btn btn-xs btn-link">
        오디오 포맷 변환
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>