<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/linux/ffmpeg/A018/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>여러 입력 파일 병합 - 실험 도서관</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "concat \ud504\ub85c\ud1a0\ucf5c\uc744 \uc0ac\uc6a9\ud55c \ud30c\uc77c \ubcd1\ud569", url: "#_top", children: [
              {title: "\uc0ac\uc6a9 \ubc29\ubc95", url: "#_1" },
          ]},
          {title: "concat \ud544\ud130\ub97c \uc0ac\uc6a9\ud55c \ud30c\uc77c \ubcd1\ud569", url: "#concat_1", children: [
              {title: "\uc0ac\uc6a9 \ubc29\ubc95", url: "#_2" },
          ]},
          {title: "\uc218\uc2dd\uc73c\ub85c \ub098\ud0c0\ub0b8 \ub370\uc774\ud130 \ubcd1\ud569 \uacfc\uc815", url: "#_3", children: [
          ]},
          {title: "-f concat \ubc29\uc2dd\uacfc \ud544\ud130 \ubc29\uc2dd\uc758 \ucc28\uc774\uc810", url: "#-f-concat", children: [
          ]},
          {title: "ffmpeg concat \ud544\ud130\uc5d0\uc11c n, v, a \ub9e4\uac1c\ubcc0\uc218\uc758 \uc758\ubbf8", url: "#ffmpeg-concat-n-v-a", children: [
              {title: "\uc608\uc2dc", url: "#_4" },
          ]},
          {title: "\ub2e4\uc591\ud55c \ud2b8\ub799 \ubcd1\ud569", url: "#_5", children: [
          ]},
          {title: "\uc2dc\uac04\uc801 \ubcd1\ud569\uacfc \uacf5\uac04\uc801 \ubcd1\ud569", url: "#_6", children: [
              {title: "\uc2dc\uac04\uc801 \ubcd1\ud569", url: "#_7" },
              {title: "\uacf5\uac04\uc801 \ubcd1\ud569", url: "#_8" },
          ]},
          {title: "\uc2dc\uac04\ucd95 \ubcd1\ud569\uacfc \uacf5\uac04\ucd95 \ubcd1\ud569\uc758 \uc218\uc2dd\uc801 \ud45c\ud604", url: "#_9", children: [
          ]},
          {title: "\ud30c\uc77c \ubcd1\ud569 \uc2dc \uace0\ub824\ud574\uc57c \ud560 \uc0ac\ud56d", url: "#_10", children: [
          ]},
          {title: "\ub2e4\uc591\ud55c \uc785\ub825 \ud30c\uc77c\uc758 \ubcd1\ud569", url: "#_11", children: [
              {title: "\ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624 \uc2a4\ud2b8\ub9bc\uc744 \ubcd1\ud569\ud558\ub294 \ubc29\ubc95", url: "#_12" },
          ]},
          {title: "\ube44\ub514\uc624\uc640 \uc624\ub514\uc624\uac00 \ub530\ub85c \uc788\ub294 \uc785\ub825 \ud30c\uc77c \ubcd1\ud569", url: "#_13", children: [
          ]},
          {title: "\uc11c\ub85c \ub2e4\ub978 \ud3ec\ub9f7\uc758 \ud30c\uc77c \ubcd1\ud569", url: "#_14", children: [
          ]},
          {title: "\ubcd1\ud569 \uc804 \ud504\ub808\uc784 \ub808\uc774\ud2b8 \uc77c\uce58", url: "#_15", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc624\ub514\uc624 \ud2b8\ub799 \ubcd1\ud569", url: "#_16", children: [
          ]},
          {title: "\ube44\ub514\uc624\uc640 \uc624\ub514\uc624\uc758 \ube44\uc728 \ub9de\ucd94\uae30", url: "#_17", children: [
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \ube44\ub514\uc624\uc640 \uc624\ub514\uc624 \ubcd1\ud569 \uc2dc \uc2dc\uac04 \uae38\uc774 \uc870\uc815", url: "#_18", children: [
          ]},
          {title: "\ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624\uc758 \ube44\uc728 \uc870\uc815", url: "#_19", children: [
              {title: "\ud574\uc0c1\ub3c4 \uc870\uc815", url: "#_20" },
              {title: "\ud504\ub808\uc784 \ube44\uc728 \uc870\uc815", url: "#_21" },
          ]},
          {title: "\ud30c\uc77c \uae38\uc774 \ub9de\ucd94\uae30", url: "#_22", children: [
              {title: "\uac00\uc7a5 \uc9e7\uc740 \ud30c\uc77c \uae38\uc774\uc5d0 \ub9de\ucd94\uae30", url: "#_23" },
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \uc2dc\uac04 \ube44\uc728 \uc870\uc815", url: "#_24", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \ub3d9\uc2dc \ubcd1\ud569", url: "#_25", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \ud2b8\ub79c\uc9c0\uc158 \uc801\uc6a9", url: "#_26", children: [
              {title: "\ud2b8\ub79c\uc9c0\uc158 \uc801\uc6a9 \uc608\uc2dc", url: "#_27" },
          ]},
          {title: "\uc218\uc2dd\uc73c\ub85c \ub098\ud0c0\ub0b8 \ud2b8\ub79c\uc9c0\uc158 \ud6a8\uacfc", url: "#_28", children: [
          ]},
          {title: "\ub2e4\uc591\ud55c \uc785\ub825 \ud30c\uc77c\uc758 \uc624\ub514\uc624 \ubcd1\ud569", url: "#_29", children: [
              {title: "\uc2a4\ud14c\ub808\uc624 \ud30c\uc77c\ub85c \ubcc0\ud658\ud558\uae30", url: "#_30" },
              {title: "\uc5ec\ub7ec \uac1c\uc758 \uc624\ub514\uc624 \ud2b8\ub799 \ubcd1\ud569", url: "#_31" },
          ]},
          {title: "\uc624\ub514\uc624 \ubcd1\ud569 \uc2dc \uace0\ub824\ud574\uc57c \ud560 \uc0ac\ud56d", url: "#_32", children: [
          ]},
          {title: "\uc624\ub514\uc624 \uc0d8\ud50c\ub9c1 \ub808\uc774\ud2b8 \ubcc0\ud658", url: "#_33", children: [
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \uc624\ub514\uc624 \ubcd1\ud569 \uc2dc \uc0d8\ud50c\ub9c1 \ub808\uc774\ud2b8 \ubcc0\ud658", url: "#_34", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \uc790\ub9c9 \ubcd1\ud569", url: "#_35", children: [
              {title: "SRT \uc790\ub9c9 \ud30c\uc77c \ubcd1\ud569", url: "#srt" },
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \ube44\ub514\uc624\uc640 \uc790\ub9c9\uc758 \uc2dc\uac04 \ub3d9\uae30\ud654", url: "#_36", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \uc2dc\uac04 \ub3d9\uae30\ud654", url: "#_37", children: [
              {title: "-itsoffset \uc635\uc158\uc744 \uc0ac\uc6a9\ud55c \uc2dc\uac04 \uc624\ud504\uc14b \uc870\uc815", url: "#-itsoffset" },
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \uc2dc\uac04 \uc624\ud504\uc14b \uc870\uc815", url: "#_38", children: [
              {title: "\uc608\uc2dc: \uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \uc2dc\uac04 \ub3d9\uae30\ud654", url: "#_39" },
          ]},
          {title: "\ub2e4\uc911 \uc790\ub9c9 \ud30c\uc77c\uc758 \ubcd1\ud569", url: "#_40", children: [
          ]},
          {title: "\uc790\ub9c9 \ubcd1\ud569 \uc2dc \uace0\ub824\ud560 \uc0ac\ud56d", url: "#_41", children: [
          ]},
          {title: "\uc790\ub9c9 \ud30c\uc77c\uc758 \uc2dc\uac04 \uc870\uc815", url: "#_42", children: [
          ]},
          {title: "\uc790\ub9c9\uacfc \ube44\ub514\uc624\uc758 \ub3d9\uae30\ud654 \uc218\uc2dd", url: "#_43", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc790\ub9c9 \ud30c\uc77c\uc758 \ubcd1\ud569 \uc218\uc2dd", url: "#_44", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624 \ub3d9\uae30\ud654", url: "#_45", children: [
              {title: "-af aresample \uc635\uc158\uc744 \uc0ac\uc6a9\ud55c \uc624\ub514\uc624 \uc2dc\uac04 \uc870\uc815", url: "#-af-aresample" },
              {title: "\ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624\uc758 \uc0d8\ud50c\ub9c1 \ub808\uc774\ud2b8 \ubcc0\ud658", url: "#_46" },
          ]},
          {title: "\ube44\ub514\uc624\uc640 \uc624\ub514\uc624\uc758 \ube44\uc728 \ub3d9\uae30\ud654", url: "#_47", children: [
              {title: "-filter_complex atempo\ub97c \uc0ac\uc6a9\ud55c \uc624\ub514\uc624 \uc18d\ub3c4 \uc870\uc815", url: "#-filter_complex-atempo" },
              {title: "-filter_complex setpts\ub97c \uc0ac\uc6a9\ud55c \ube44\ub514\uc624 \uc18d\ub3c4 \uc870\uc815", url: "#-filter_complex-setpts" },
          ]},
          {title: "\uc218\ud559\uc801 \ud45c\ud604: \ube44\ub514\uc624\uc640 \uc624\ub514\uc624\uc758 \uc2dc\uac04 \ubc0f \uc18d\ub3c4 \uc870\uc815", url: "#_48", children: [
          ]},
          {title: "\uc5ec\ub7ec \uc785\ub825 \ud30c\uc77c\uc758 \ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624 \ube44\uc728 \uc870\uc815 \uc608\uc2dc", url: "#_49", children: [
          ]},
          {title: "\ub2e4\uc591\ud55c \ube44\ub514\uc624 \ubc0f \uc624\ub514\uc624 \ud2b8\ub799\uc758 \ubcd1\ud569", url: "#_50", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script>
      <script src="../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A019/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A019/" class="btn btn-xs btn-link">
        파일 분할
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A017/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A017/" class="btn btn-xs btn-link">
        자막 인코딩
      </a>
    </div>
    
  </div>

    

    <p>FFmpeg을 사용하여 여러 입력 파일을 병합하는 것은 다양한 방식으로 이루어질 수 있다. 일반적으로는 비디오 파일이나 오디오 파일을 연결하거나 특정 트랙들을 하나의 파일로 결합하는 방식이 사용된다. 여기서는 여러 가지 방법 중 가장 대표적인 방법들을 설명하겠다.</p>
<h3 id="concat">concat 프로토콜을 사용한 파일 병합</h3>
<p>가장 기본적인 방법 중 하나는 <code>concat</code> 프로토콜을 사용하는 것이다. 이 방법은 파일들이 동일한 포맷을 가지고 있을 때 효과적이다.</p>
<h4 id="_1">사용 방법</h4>
<p>FFmpeg에서 <code>concat</code> 프로토콜을 사용하여 여러 파일을 병합하려면 다음과 같은 형식의 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -f concat -safe 0 -i &lt;input_file_list.txt&gt; -c copy &lt;output_file&gt;
</code></pre>
<p>여기서 <code>input_file_list.txt</code>는 병합할 파일들의 리스트를 포함한 텍스트 파일이다. 이 텍스트 파일은 다음과 같은 형식을 따라야 한다.</p>
<pre><code class="language-text">file 'input1.mp4'
file 'input2.mp4'
file 'input3.mp4'
</code></pre>
<p>이 방법은 파일들을 복사하여 연결하기 때문에, 코덱을 다시 인코딩할 필요가 없다.</p>
<h3 id="concat_1">concat 필터를 사용한 파일 병합</h3>
<p>파일 포맷이 다르거나 더 복잡한 병합 작업이 필요할 때는 <code>concat</code> 필터를 사용할 수 있다. 이 방법은 서로 다른 포맷의 파일들도 병합할 수 있는 장점이 있다. 다만, 코덱을 다시 인코딩해야 하기 때문에 처리 시간이 오래 걸릴 수 있다.</p>
<h4 id="_2">사용 방법</h4>
<p>다음은 두 개 이상의 파일을 병합할 때 사용하는 <code>concat</code> 필터의 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -filter_complex &quot;[0:v][0:a][1:v][1:a]concat=n=2:v=1:a=1[outv][outa]&quot; -map &quot;[outv]&quot; -map &quot;[outa]&quot; output.mp4
</code></pre>
<p>이 명령어에서 <code>n=2</code>는 병합할 파일의 개수를 나타내고, <code>v=1</code>은 비디오 트랙이 하나 있다는 것을, <code>a=1</code>은 오디오 트랙이 하나 있다는 것을 의미한다. 이 필터는 각 입력 파일의 비디오 및 오디오 스트림을 가져와서 하나의 파일로 병합한다.</p>
<h3 id="_3">수식으로 나타낸 데이터 병합 과정</h3>
<p>병합 작업을 수학적으로 표현하면 다음과 같다. 각 입력 파일의 데이터를 <strong>벡터</strong>로 정의할 수 있다. 비디오 데이터와 오디오 데이터를 각각 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{V}_i</span><script type="math/tex">\mathbf{V}_i</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{A}_i</span><script type="math/tex">\mathbf{A}_i</script></span>로 표현하면, 병합 작업은 각 데이터 벡터의 연결(연속)을 의미한다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{V}_{\text{merged}} = \mathbf{V}_1 \oplus \mathbf{V}_2 \oplus \dots \oplus \mathbf{V}_n
</div>
<script type="math/tex; mode=display">
\mathbf{V}_{\text{merged}} = \mathbf{V}_1 \oplus \mathbf{V}_2 \oplus \dots \oplus \mathbf{V}_n
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{A}_{\text{merged}} = \mathbf{A}_1 \oplus \mathbf{A}_2 \oplus \dots \oplus \mathbf{A}_n
</div>
<script type="math/tex; mode=display">
\mathbf{A}_{\text{merged}} = \mathbf{A}_1 \oplus \mathbf{A}_2 \oplus \dots \oplus \mathbf{A}_n
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\oplus</span><script type="math/tex">\oplus</script></span>는 병합 연산을 나타내며, 각 비디오와 오디오 스트림이 시간 축에서 연결되는 과정을 수학적으로 나타낸다.</p>
<h3 id="-f-concat"><code>-f concat</code> 방식과 필터 방식의 차이점</h3>
<p><code>-f concat</code> 프로토콜은 파일을 단순히 시간 축에서 연결하는 방식이며, 코덱 재인코딩이 없기 때문에 속도가 빠르다. 그러나 이 방법은 파일 포맷이 동일한 경우에만 사용 가능한다.</p>
<p>반면, <code>concat</code> 필터를 사용하면 파일 포맷이 다르더라도 연결할 수 있으며, 더 복잡한 연결 작업(예: 여러 오디오 및 비디오 트랙 병합)도 가능한다. 하지만 이 경우에는 인코딩 과정을 거치므로 처리 시간이 더 오래 걸릴 수 있다.</p>
<h3 id="ffmpeg-concat-n-v-a">ffmpeg concat 필터에서 n, v, a 매개변수의 의미</h3>
<p>concat 필터에서 중요한 매개변수는 <code>n</code>, <code>v</code>, <code>a</code>이다.</p>
<ul>
<li><code>n</code>: 병합할 입력 파일의 수를 의미한다. 이 값은 병합하려는 파일의 개수에 따라 결정된다.</li>
<li><code>v</code>: 병합할 비디오 트랙의 수를 의미한다. 예를 들어, 비디오가 하나씩 있는 경우 <code>v=1</code>로 설정한다.</li>
<li><code>a</code>: 병합할 오디오 트랙의 수를 의미한다. 오디오 트랙이 있다면 <code>a=1</code>로 설정하고, 오디오가 없으면 <code>a=0</code>으로 설정한다.</li>
</ul>
<p>병합된 파일의 비디오와 오디오 트랙은 각각 다음과 같은 방식으로 매핑된다.</p>
<ul>
<li><code>outv</code>: 병합된 비디오 트랙을 매핑하는 출력 변수.</li>
<li><code>outa</code>: 병합된 오디오 트랙을 매핑하는 출력 변수.</li>
</ul>
<h4 id="_4">예시</h4>
<p>세 개의 비디오 파일을 병합하려면 <code>n=3</code>으로 설정하고, 각 파일에 비디오와 오디오가 있을 경우 다음과 같이 명령어를 작성할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -i input3.mp4 -filter_complex &quot;[0:v][0:a][1:v][1:a][2:v][2:a]concat=n=3:v=1:a=1[outv][outa]&quot; -map &quot;[outv]&quot; -map &quot;[outa]&quot; output.mp4
</code></pre>
<p>이 명령어는 세 개의 입력 파일을 병합하여 하나의 비디오 파일로 출력한다.</p>
<h3 id="_5">다양한 트랙 병합</h3>
<p>여러 개의 비디오 또는 오디오 트랙을 병합하는 경우 각 트랙을 명확하게 매핑해야 한다. 예를 들어, 다중 비디오 트랙과 다중 오디오 트랙이 있는 파일을 병합하려면 각 트랙을 적절히 처리해야 한다. 이 경우에는 <code>concat</code> 필터의 <code>v</code> 및 <code>a</code> 값을 여러 개의 트랙에 맞게 설정해야 한다.</p>
<h3 id="_6">시간적 병합과 공간적 병합</h3>
<p>FFmpeg에서 파일을 병합하는 방법은 시간적으로 병합하는 방식과 공간적으로 병합하는 방식으로 나뉜다.</p>
<h4 id="_7">시간적 병합</h4>
<p>시간적 병합은 위에서 설명한 것처럼 비디오 파일들이 시간 축에서 순차적으로 연결되는 방식이다. 예를 들어, 두 개의 10초짜리 비디오 파일을 시간적으로 병합하면, 최종 출력 파일의 길이는 20초가 된다.</p>
<h4 id="_8">공간적 병합</h4>
<p>공간적 병합은 여러 비디오 파일을 동시에 화면에 표시하는 방식이다. 이 경우에는 <code>concat</code> 필터 대신 <code>hstack</code> 또는 <code>vstack</code> 필터를 사용할 수 있다.</p>
<ul>
<li><code>hstack</code>: 비디오 파일들을 가로로 나란히 병합.</li>
<li><code>vstack</code>: 비디오 파일들을 세로로 나란히 병합.</li>
</ul>
<p>다음은 두 개의 비디오 파일을 가로로 병합하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -filter_complex &quot;hstack=inputs=2&quot; output.mp4
</code></pre>
<p>이 명령어는 두 개의 비디오 파일을 화면에서 가로로 나란히 배치하여 하나의 파일로 병합한다.</p>
<h3 id="_9">시간축 병합과 공간축 병합의 수식적 표현</h3>
<p>시간축 병합을 수식으로 나타내면 다음과 같다. 각 비디오 파일의 시간 길이를 <span class="arithmatex"><span class="MathJax_Preview">t_i</span><script type="math/tex">t_i</script></span>라고 할 때, 병합된 비디오 파일의 시간 길이 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{merged}}</span><script type="math/tex">t_{\text{merged}}</script></span>는 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
t_{\text{merged}} = \sum_{i=1}^{n} t_i
</div>
<script type="math/tex; mode=display">
t_{\text{merged}} = \sum_{i=1}^{n} t_i
</script>
</div>
<p>즉, 각 비디오 파일의 시간 길이를 더하여 최종 파일의 시간 길이가 결정된다.</p>
<p>공간축 병합의 경우, 비디오 프레임의 가로 또는 세로 크기를 기준으로 병합된다. 가로로 병합할 경우 최종 비디오의 가로 크기 <span class="arithmatex"><span class="MathJax_Preview">w_{\text{merged}}</span><script type="math/tex">w_{\text{merged}}</script></span>는 각 비디오의 가로 크기 <span class="arithmatex"><span class="MathJax_Preview">w_i</span><script type="math/tex">w_i</script></span>를 더한 값이 된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
w_{\text{merged}} = \sum_{i=1}^{n} w_i
</div>
<script type="math/tex; mode=display">
w_{\text{merged}} = \sum_{i=1}^{n} w_i
</script>
</div>
<p>세로로 병합할 경우 최종 비디오의 세로 크기 <span class="arithmatex"><span class="MathJax_Preview">h_{\text{merged}}</span><script type="math/tex">h_{\text{merged}}</script></span>는 각 비디오의 세로 크기 <span class="arithmatex"><span class="MathJax_Preview">h_i</span><script type="math/tex">h_i</script></span>를 더한 값이 된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
h_{\text{merged}} = \sum_{i=1}^{n} h_i
</div>
<script type="math/tex; mode=display">
h_{\text{merged}} = \sum_{i=1}^{n} h_i
</script>
</div>
<p>이 수식은 병합된 비디오의 해상도가 어떻게 변화하는지를 수학적으로 나타낸다.</p>
<h3 id="_10">파일 병합 시 고려해야 할 사항</h3>
<p>여러 파일을 병합할 때는 다음과 같은 사항들을 고려해야 한다.</p>
<ol>
<li><strong>파일 포맷 및 코덱</strong>: 병합할 파일들이 동일한 포맷과 코덱을 사용하는 것이 이상적이다. 만약 다르다면 <code>concat</code> 필터를 사용하여 재인코딩해야 할 수 있다.</li>
<li><strong>비디오 해상도</strong>: 해상도가 다른 파일을 병합할 때는 해상도를 일치시켜야 한다. 해상도가 다르면 병합 과정에서 오류가 발생할 수 있다.</li>
<li><strong>프레임 레이트</strong>: 프레임 레이트가 다른 파일을 병합할 때는 프레임 레이트를 일치시키는 것이 중요하다. 그렇지 않으면 병합된 결과물이 부자연스러워질 수 있다.</li>
<li><strong>비트레이트</strong>: 병합할 파일의 비트레이트도 동일하게 설정하는 것이 좋다. 비트레이트가 다르면 품질 저하가 발생할 수 있다.</li>
</ol>
<h3 id="_11">다양한 입력 파일의 병합</h3>
<p>FFmpeg에서는 비디오와 오디오를 함께 병합하거나 서로 다른 형식의 입력 파일들을 병합할 수 있다. 이 경우에는 각 입력 파일의 스트림을 명확하게 지정하여 병합해야 한다.</p>
<h4 id="_12">비디오 및 오디오 스트림을 병합하는 방법</h4>
<p>비디오 파일에 새로운 오디오 트랙을 추가하거나 비디오 파일과 오디오 파일을 병합하는 경우, 각 스트림을 개별적으로 지정하여 병합할 수 있다. 이를 위해서는 <code>-map</code> 옵션을 사용하여 각각의 입력 스트림을 명시적으로 선택한다.</p>
<p>예를 들어, 비디오 파일 <code>input_video.mp4</code>와 오디오 파일 <code>input_audio.mp3</code>를 병합하는 경우 다음과 같이 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input_video.mp4 -i input_audio.mp3 -c:v copy -c:a aac output.mp4
</code></pre>
<p>이 명령어는 비디오 코덱을 다시 인코딩하지 않고 그대로 복사(<code>-c:v copy</code>)하며, 오디오 파일을 AAC로 인코딩하여 병합한다. 이때 비디오 스트림은 <code>input_video.mp4</code>에서, 오디오 스트림은 <code>input_audio.mp3</code>에서 가져온다.</p>
<h3 id="_13">비디오와 오디오가 따로 있는 입력 파일 병합</h3>
<p>비디오와 오디오가 각각 별도로 존재하는 경우(예: <code>input1.mp4</code>에 비디오만 있고, <code>input2.mp4</code>에 오디오만 있는 경우), 이를 하나의 파일로 병합할 수 있다. 이 경우에도 <code>-map</code> 옵션을 사용하여 각각의 스트림을 지정해야 한다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -map 0:v -map 1:a -c:v copy -c:a copy output.mp4
</code></pre>
<p>이 명령어에서 <code>-map 0:v</code>는 첫 번째 입력 파일(<code>input1.mp4</code>)의 비디오 스트림을 선택하고, <code>-map 1:a</code>는 두 번째 입력 파일(<code>input2.mp4</code>)의 오디오 스트림을 선택하여 병합한다.</p>
<h3 id="_14">서로 다른 포맷의 파일 병합</h3>
<p>서로 다른 포맷을 가진 파일을 병합할 때는 각각의 파일을 동일한 포맷으로 변환해야 한다. 예를 들어, 하나의 비디오 파일이 MP4 형식이고 다른 파일이 AVI 형식일 때, 두 파일을 병합하려면 둘 다 동일한 형식으로 인코딩한 후 병합하는 것이 일반적이다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.avi -c:v libx264 -c:a aac output.mp4
</code></pre>
<p>이 명령어는 <code>input1.mp4</code>와 <code>input2.avi</code> 파일을 H.264 비디오 코덱과 AAC 오디오 코덱으로 인코딩하여 하나의 파일로 병합한다.</p>
<h3 id="_15">병합 전 프레임 레이트 일치</h3>
<p>파일 병합 전, 두 파일의 프레임 레이트가 다를 경우 병합 과정에서 문제가 발생할 수 있다. 이때는 <code>-r</code> 옵션을 사용하여 프레임 레이트를 일치시켜야 한다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -r 30 -i input2.mp4 -r 30 -filter_complex &quot;[0:v][1:v]concat=n=2:v=1[outv]&quot; -map &quot;[outv]&quot; output.mp4
</code></pre>
<p>이 명령어는 <code>input1.mp4</code>와 <code>input2.mp4</code>의 프레임 레이트를 30fps로 맞추고, 두 비디오 파일을 병합한다.</p>
<h3 id="_16">여러 오디오 트랙 병합</h3>
<p>하나의 비디오 파일에 여러 개의 오디오 트랙을 병합하는 경우, 각 오디오 트랙을 명확하게 지정하고 병합해야 한다. 다음은 두 개의 오디오 파일을 하나의 비디오 파일에 병합하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio1.mp3 -i audio2.mp3 -map 0:v -map 1:a -map 2:a -c:v copy -c:a aac -shortest output.mp4
</code></pre>
<p>이 명령어에서 <code>-map 0:v</code>는 첫 번째 입력 파일인 비디오 스트림을 선택하고, <code>-map 1:a</code>와 <code>-map 2:a</code>는 각각 오디오 트랙을 선택한다. <code>-shortest</code> 옵션은 가장 짧은 트랙에 맞춰 출력 파일의 길이를 조정하는 옵션이다.</p>
<h3 id="_17">비디오와 오디오의 비율 맞추기</h3>
<p>병합할 비디오와 오디오의 길이가 다를 경우, 한쪽을 다른 쪽에 맞춰 늘리거나 줄일 수 있다. 예를 들어, 비디오가 오디오보다 길다면 <code>-t</code> 옵션을 사용하여 비디오의 길이를 오디오에 맞출 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -c:v copy -c:a aac -t 00:03:00 output.mp4
</code></pre>
<p>이 명령어는 비디오 파일의 길이를 3분으로 제한하여 오디오와 맞추는 방법이다.</p>
<h3 id="_18">수학적 표현: 비디오와 오디오 병합 시 시간 길이 조정</h3>
<p>병합 작업 시 비디오와 오디오의 시간 길이를 수학적으로 표현할 수 있다. 각 비디오와 오디오의 시간 길이를 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{audio}}</span><script type="math/tex">t_{\text{audio}}</script></span>로 나타내면, 병합 후의 최종 파일의 시간 길이 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{output}}</span><script type="math/tex">t_{\text{output}}</script></span>는 다음과 같이 정의할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
t_{\text{output}} = \min(t_{\text{video}}, t_{\text{audio}})
</div>
<script type="math/tex; mode=display">
t_{\text{output}} = \min(t_{\text{video}}, t_{\text{audio}})
</script>
</div>
<p>이 수식은 비디오와 오디오 중 더 짧은 길이에 맞춰 병합할 때의 시간 길이를 나타낸다. 반대로, 길이를 동일하게 맞추기 위해서는 둘 중 더 긴 쪽에 맞춰야 한다.</p>
<h3 id="_19">비디오 및 오디오의 비율 조정</h3>
<p>비디오와 오디오의 비율을 맞출 때, 서로 다른 비율을 가진 두 파일을 병합하는 경우 비율을 일치시켜야 한다. FFmpeg에서는 다양한 비율 변환을 제공하는 필터를 사용할 수 있으며, 주로 비디오의 해상도나 프레임 비율을 맞추기 위해 사용된다.</p>
<h4 id="_20">해상도 조정</h4>
<p>두 개의 비디오 파일의 해상도가 다를 경우 해상도를 일치시키는 것이 병합 작업에서 중요하다. 이를 위해 FFmpeg에서는 <code>scale</code> 필터를 사용할 수 있다. 예를 들어, 1080p 해상도의 비디오와 720p 해상도의 비디오를 병합할 때, 두 비디오의 해상도를 동일하게 맞추기 위해 다음과 같은 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -filter_complex &quot;[0:v]scale=1280:720[v0];[1:v]scale=1280:720[v1];[v0][v1]concat=n=2:v=1[outv]&quot; -map &quot;[outv]&quot; output.mp4
</code></pre>
<p>이 명령어는 각각 1080p와 720p 해상도의 비디오를 1280x720 해상도로 맞추어 병합한다.</p>
<h4 id="_21">프레임 비율 조정</h4>
<p>비디오 파일의 프레임 비율이 다르면 병합 시 문제를 일으킬 수 있다. 프레임 비율을 일치시키기 위해서는 <code>fps</code> 필터를 사용할 수 있다. 예를 들어, 24fps 비디오와 30fps 비디오를 병합하려면 다음과 같은 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -filter_complex &quot;[0:v]fps=30[v0];[1:v]fps=30[v1];[v0][v1]concat=n=2:v=1[outv]&quot; -map &quot;[outv]&quot; output.mp4
</code></pre>
<p>이 명령어는 두 비디오 파일의 프레임 비율을 30fps로 맞추어 병합한다.</p>
<h3 id="_22">파일 길이 맞추기</h3>
<p>비디오 파일과 오디오 파일을 병합할 때 파일의 길이가 서로 다르면, 병합 후의 파일 길이가 의도하지 않게 비정상적으로 길어지거나 짧아질 수 있다. 이를 방지하기 위해 비디오 파일 또는 오디오 파일의 길이를 맞추는 방법을 사용할 수 있다.</p>
<h4 id="_23">가장 짧은 파일 길이에 맞추기</h4>
<p>두 파일 중 짧은 파일에 맞추어 병합하려면 <code>-shortest</code> 옵션을 사용한다. 예를 들어, 비디오 파일이 오디오 파일보다 길 경우, 비디오를 오디오 파일 길이에 맞춰 병합하는 방법은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -c:v copy -c:a aac -shortest output.mp4
</code></pre>
<p>이 명령어는 오디오 파일의 길이에 맞춰 비디오 파일을 잘라서 병합한다.</p>
<h3 id="_24">수학적 표현: 시간 비율 조정</h3>
<p>비디오와 오디오의 시간 비율을 수식으로 나타내면, 비디오와 오디오의 실제 재생 시간이 다를 경우 두 파일의 비율을 조정하여 병합할 수 있다. 예를 들어, 비디오 파일의 길이를 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>, 오디오 파일의 길이를 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{audio}}</span><script type="math/tex">t_{\text{audio}}</script></span>로 나타내면, 최종 출력 파일의 시간 비율은 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
r_{\text{output}} = \frac{t_{\text{audio}}}{t_{\text{video}}}
</div>
<script type="math/tex; mode=display">
r_{\text{output}} = \frac{t_{\text{audio}}}{t_{\text{video}}}
</script>
</div>
<p>이 수식은 비디오 파일의 길이를 오디오 파일에 맞춰 조정할 때의 비율을 나타낸다.</p>
<h3 id="_25">여러 입력 파일의 동시 병합</h3>
<p>여러 개의 입력 파일을 동시에 병합할 경우, 각 파일의 비디오 및 오디오 스트림을 분리하여 처리하는 것이 중요하다. 예를 들어, 두 개 이상의 파일을 병합할 때 각 입력 파일의 비디오와 오디오 트랙을 개별적으로 처리하는 방법은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -i input3.mp4 -filter_complex &quot;[0:v][0:a][1:v][1:a][2:v][2:a]concat=n=3:v=1:a=1[outv][outa]&quot; -map &quot;[outv]&quot; -map &quot;[outa]&quot; output.mp4
</code></pre>
<p>이 명령어는 세 개의 입력 파일을 병합하여 하나의 비디오 및 오디오 트랙으로 출력한다. 여기서 <code>n=3</code>은 병합할 파일의 개수를 의미하고, 각각의 비디오 및 오디오 스트림을 개별적으로 병합하는 과정을 나타낸다.</p>
<h3 id="_26">여러 입력 파일의 트랜지션 적용</h3>
<p>병합 작업에서 각 비디오 파일 간에 트랜지션 효과를 적용할 수 있다. 트랜지션 효과를 사용하면 파일이 단순히 연결되는 대신, 시각적으로 부드럽게 전환되는 효과를 얻을 수 있다. FFmpeg에서는 <code>xfade</code> 필터를 사용하여 다양한 트랜지션 효과를 적용할 수 있다.</p>
<h4 id="_27">트랜지션 적용 예시</h4>
<p>다음은 두 개의 비디오 파일을 병합하면서 <code>fade</code> 트랜지션을 적용하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -i input2.mp4 -filter_complex &quot;[0:v][1:v]xfade=transition=fade:duration=2:offset=5&quot; output.mp4
</code></pre>
<p>이 명령어는 첫 번째 비디오가 재생된 지 5초 후에 두 번째 비디오로 부드럽게 전환되며, 전환 효과는 2초 동안 지속된다.</p>
<h3 id="_28">수식으로 나타낸 트랜지션 효과</h3>
<p>트랜지션 효과를 수학적으로 표현하면, 각 비디오 파일의 재생 시간과 트랜지션 시간이 조합된 식으로 나타낼 수 있다. 예를 들어, 두 비디오 파일의 시간 길이를 각각 <span class="arithmatex"><span class="MathJax_Preview">t_1</span><script type="math/tex">t_1</script></span>과 <span class="arithmatex"><span class="MathJax_Preview">t_2</span><script type="math/tex">t_2</script></span>로 나타내고, 트랜지션 시간이 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{transition}}</span><script type="math/tex">t_{\text{transition}}</script></span>일 때, 최종 출력 파일의 시간 길이 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{output}}</span><script type="math/tex">t_{\text{output}}</script></span>는 다음과 같이 표현된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
t_{\text{output}} = t_1 + t_2 - t_{\text{transition}}
</div>
<script type="math/tex; mode=display">
t_{\text{output}} = t_1 + t_2 - t_{\text{transition}}
</script>
</div>
<p>이는 트랜지션 시간 동안 두 비디오 파일이 겹쳐지기 때문에, 최종 파일의 시간 길이가 줄어드는 것을 나타낸다.</p>
<h3 id="_29">다양한 입력 파일의 오디오 병합</h3>
<p>여러 오디오 파일을 병합할 때, 각 오디오 트랙을 서로 다른 채널로 분리하여 병합하거나, 다중 채널 오디오를 하나의 파일로 합칠 수 있다. FFmpeg에서는 오디오 필터를 사용하여 이러한 작업을 수행할 수 있다.</p>
<h4 id="_30">스테레오 파일로 변환하기</h4>
<p>서로 다른 오디오 파일을 좌우 스테레오 채널로 병합하려면 <code>amerge</code> 필터를 사용할 수 있다. 예를 들어, 두 개의 모노 오디오 파일을 스테레오 파일로 변환하려면 다음과 같이 명령어를 작성할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i left_channel.mp3 -i right_channel.mp3 -filter_complex &quot;[0:a][1:a]amerge=inputs=2&quot; -ac 2 output.mp3
</code></pre>
<p>이 명령어는 두 개의 모노 파일을 하나의 스테레오 파일로 병합한다. <code>-ac 2</code> 옵션은 오디오를 스테레오로 출력하도록 지정하는 옵션이다.</p>
<h4 id="_31">여러 개의 오디오 트랙 병합</h4>
<p>여러 개의 오디오 트랙을 하나의 파일로 병합할 때는 각 오디오 트랙을 개별적으로 처리해야 한다. 예를 들어, 다중 입력 파일을 사용하여 각 오디오 파일을 동시에 병합하는 방법은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i audio1.mp3 -i audio2.mp3 -filter_complex &quot;[0:a][1:a]amix=inputs=2:duration=longest&quot; output.mp3
</code></pre>
<p>이 명령어는 두 개의 오디오 파일을 믹싱하여 하나의 파일로 병합한다. <code>duration=longest</code> 옵션은 가장 긴 오디오 트랙에 맞춰 믹싱을 진행한다.</p>
<h3 id="_32">오디오 병합 시 고려해야 할 사항</h3>
<p>여러 개의 오디오 트랙을 병합할 때는 다음과 같은 사항들을 고려해야 한다.</p>
<ol>
<li><strong>오디오 샘플링 레이트</strong>: 병합할 오디오 파일들의 샘플링 레이트가 동일해야 한다. 만약 샘플링 레이트가 다르면, 병합 전에 샘플링 레이트를 일치시켜야 한다.</li>
<li><strong>오디오 채널</strong>: 오디오 파일의 채널 수(예: 모노, 스테레오)가 다를 경우 병합 전에 각 파일의 채널 수를 동일하게 맞추는 것이 중요하다.</li>
<li><strong>오디오 비트레이트</strong>: 병합할 파일들의 비트레이트가 다르면, 병합 후 품질에 영향을 미칠 수 있다. 이 경우 비트레이트를 일치시키는 것이 권장된다.</li>
</ol>
<h3 id="_33">오디오 샘플링 레이트 변환</h3>
<p>서로 다른 샘플링 레이트를 가진 오디오 파일을 병합하려면, <code>aresample</code> 필터를 사용하여 샘플링 레이트를 일치시켜야 한다. 다음은 샘플링 레이트를 44.1kHz로 변환하여 두 개의 오디오 파일을 병합하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i audio1.mp3 -i audio2.mp3 -filter_complex &quot;[0:a]aresample=44100[a0];[1:a]aresample=44100[a1];[a0][a1]amix=inputs=2&quot; output.mp3
</code></pre>
<p>이 명령어는 두 개의 오디오 파일의 샘플링 레이트를 44.1kHz로 맞춘 후 병합한다.</p>
<h3 id="_34">수학적 표현: 오디오 병합 시 샘플링 레이트 변환</h3>
<p>오디오 파일의 샘플링 레이트를 수학적으로 표현하면, 오디오 파일의 샘플링 주파수 <span class="arithmatex"><span class="MathJax_Preview">f_s</span><script type="math/tex">f_s</script></span>와 각 오디오 파일의 시간 길이 <span class="arithmatex"><span class="MathJax_Preview">t</span><script type="math/tex">t</script></span>를 이용하여 다음과 같이 표현할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
N = f_s \times t
</div>
<script type="math/tex; mode=display">
N = f_s \times t
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">N</span><script type="math/tex">N</script></span>은 샘플의 총 개수이다. 서로 다른 샘플링 레이트를 가진 두 파일을 병합할 때는 두 파일의 샘플 개수를 동일하게 맞춰야 한다. 예를 들어, 샘플링 레이트가 <span class="arithmatex"><span class="MathJax_Preview">f_{s1}</span><script type="math/tex">f_{s1}</script></span>인 첫 번째 파일과 <span class="arithmatex"><span class="MathJax_Preview">f_{s2}</span><script type="math/tex">f_{s2}</script></span>인 두 번째 파일을 병합할 때, 최종 샘플링 레이트 <span class="arithmatex"><span class="MathJax_Preview">f_{\text{merged}}</span><script type="math/tex">f_{\text{merged}}</script></span>는 다음과 같이 정의할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
f_{\text{merged}} = \text{gcd}(f_{s1}, f_{s2})
</div>
<script type="math/tex; mode=display">
f_{\text{merged}} = \text{gcd}(f_{s1}, f_{s2})
</script>
</div>
<p>이 수식은 두 파일의 샘플링 레이트를 최소 공배수로 맞춰서 병합하는 경우에 적용된다.</p>
<h3 id="_35">여러 입력 파일의 자막 병합</h3>
<p>FFmpeg에서는 여러 개의 자막 파일을 병합하거나 자막을 비디오 파일에 삽입할 수 있다. 자막 파일을 비디오에 병합하는 경우, 자막 파일의 포맷에 따라 다르게 처리해야 한다.</p>
<h4 id="srt">SRT 자막 파일 병합</h4>
<p>SRT 자막 파일을 비디오 파일에 병합하려면 <code>-c:s mov_text</code> 옵션을 사용하여 자막을 인코딩할 수 있다. 예를 들어, 비디오 파일과 SRT 자막 파일을 병합하려면 다음과 같은 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i subtitle.srt -c:v copy -c:a copy -c:s mov_text output.mp4
</code></pre>
<p>이 명령어는 비디오 파일에 SRT 자막을 삽입하여 최종 출력 파일로 병합한다.</p>
<h3 id="_36">수학적 표현: 비디오와 자막의 시간 동기화</h3>
<p>비디오와 자막의 시간 동기화를 수식으로 나타내면, 비디오 파일의 프레임 수 <span class="arithmatex"><span class="MathJax_Preview">N_{\text{video}}</span><script type="math/tex">N_{\text{video}}</script></span>와 자막 파일의 자막 개수 <span class="arithmatex"><span class="MathJax_Preview">N_{\text{subtitles}}</span><script type="math/tex">N_{\text{subtitles}}</script></span>가 동일한 비율로 동기화되어야 한다. 이를 수식으로 표현하면 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\frac{N_{\text{video}}}{t_{\text{video}}} = \frac{N_{\text{subtitles}}}{t_{\text{subtitles}}}
</div>
<script type="math/tex; mode=display">
\frac{N_{\text{video}}}{t_{\text{video}}} = \frac{N_{\text{subtitles}}}{t_{\text{subtitles}}}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>는 비디오의 총 재생 시간, <span class="arithmatex"><span class="MathJax_Preview">t_{\text{subtitles}}</span><script type="math/tex">t_{\text{subtitles}}</script></span>는 자막이 표시되는 총 시간을 나타낸다. 두 값이 동일해야 비디오와 자막이 정상적으로 동기화된다.</p>
<h3 id="_37">여러 입력 파일의 시간 동기화</h3>
<p>여러 비디오 파일을 병합할 때, 각 파일의 시간 동기화는 매우 중요하다. 특히 비디오와 오디오 파일이 별도로 존재하는 경우, 시간 동기화를 제대로 설정하지 않으면 비디오와 오디오가 어긋나는 문제가 발생할 수 있다.</p>
<h4 id="-itsoffset"><code>-itsoffset</code> 옵션을 사용한 시간 오프셋 조정</h4>
<p>FFmpeg에서는 <code>-itsoffset</code> 옵션을 사용하여 입력 파일의 시간 오프셋을 조정할 수 있다. 이 옵션을 사용하면 특정 파일이 시작되는 시간을 조정할 수 있으며, 이를 통해 비디오와 오디오의 동기화를 맞출 수 있다.</p>
<p>예를 들어, 오디오 파일이 비디오보다 2초 늦게 시작해야 하는 경우, 다음과 같이 명령어를 작성할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -itsoffset 00:00:02 -i audio.mp3 -c:v copy -c:a copy output.mp4
</code></pre>
<p>이 명령어는 오디오 파일의 시작 시간을 2초 늦추어 비디오 파일과 동기화한다.</p>
<h3 id="_38">수학적 표현: 시간 오프셋 조정</h3>
<p>시간 오프셋 조정을 수학적으로 표현하면, 비디오 파일과 오디오 파일의 시간 축이 맞지 않을 경우 이를 맞추기 위해 시간 오프셋을 적용할 수 있다. 비디오 파일의 시간 시작점을 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>, 오디오 파일의 시간 시작점을 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{audio}}</span><script type="math/tex">t_{\text{audio}}</script></span>라고 할 때, 오디오 파일에 적용할 오프셋 시간 <span class="arithmatex"><span class="MathJax_Preview">\Delta t</span><script type="math/tex">\Delta t</script></span>는 다음과 같이 정의된다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\Delta t = t_{\text{audio}} - t_{\text{video}}
</div>
<script type="math/tex; mode=display">
\Delta t = t_{\text{audio}} - t_{\text{video}}
</script>
</div>
<p>따라서 오디오 파일의 시작 시간을 <span class="arithmatex"><span class="MathJax_Preview">\Delta t</span><script type="math/tex">\Delta t</script></span>만큼 조정하여 비디오와 동기화할 수 있다.</p>
<h4 id="_39">예시: 여러 입력 파일의 시간 동기화</h4>
<p>여러 개의 비디오 파일을 병합할 때, 각각의 파일이 시작하는 시간을 조정하여 동기화할 수 있다. 예를 들어, 세 개의 비디오 파일이 각각 0초, 5초, 10초에 시작하도록 설정하려면 다음과 같은 명령어를 사용할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i input1.mp4 -itsoffset 00:00:05 -i input2.mp4 -itsoffset 00:00:10 -i input3.mp4 -filter_complex &quot;[0:v][1:v][2:v]concat=n=3:v=1[outv]&quot; -map &quot;[outv]&quot; output.mp4
</code></pre>
<p>이 명령어는 첫 번째 파일은 바로 시작하고, 두 번째 파일은 5초 후에, 세 번째 파일은 10초 후에 시작되도록 시간 동기화를 맞추어 병합한다.</p>
<h3 id="_40">다중 자막 파일의 병합</h3>
<p>비디오에 여러 개의 자막 파일을 삽입할 수 있으며, 각 자막 파일을 개별 트랙으로 추가하여 다중 자막을 지원하는 파일을 만들 수 있다. 예를 들어, 두 개의 SRT 자막 파일을 하나의 비디오에 병합하는 방법은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i subtitle1.srt -i subtitle2.srt -c:v copy -c:a copy -c:s mov_text -map 0:v -map 0:a -map 1:s -map 2:s output.mp4
</code></pre>
<p>이 명령어는 첫 번째 자막을 트랙 1로, 두 번째 자막을 트랙 2로 병합한다. <code>-map</code> 옵션을 사용하여 각 자막 파일을 개별적으로 지정한다.</p>
<h3 id="_41">자막 병합 시 고려할 사항</h3>
<p>여러 자막 파일을 병합할 때는 자막의 시간 정보가 정확히 일치해야 한다. 자막의 시간 정보가 어긋나면 자막이 비디오와 동기화되지 않거나 잘못된 시간에 표시될 수 있다. 자막 파일이 여러 언어로 제공되는 경우, 각 자막 트랙에 대한 명확한 언어 설정이 필요할 수 있다.</p>
<h3 id="_42">자막 파일의 시간 조정</h3>
<p>FFmpeg에서는 자막 파일의 시간 정보를 조정할 수 있는 옵션을 제공하며, 이를 통해 자막 파일의 시작 시간을 맞출 수 있다. 예를 들어, 자막 파일의 시작 시간을 2초 늦추려면 다음과 같이 명령어를 작성할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -itsoffset 00:00:02 -i subtitle.srt -c copy output.srt
</code></pre>
<p>이 명령어는 자막 파일의 시작 시간을 2초 늦춰서 동기화된 자막 파일을 생성한다.</p>
<h3 id="_43">자막과 비디오의 동기화 수식</h3>
<p>자막 파일과 비디오 파일의 동기화를 수학적으로 표현하면, 자막의 시작 시간 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{subtitles}}</span><script type="math/tex">t_{\text{subtitles}}</script></span>과 비디오의 시작 시간 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>가 일치해야 한다. 자막이 비디오보다 늦게 시작할 경우, 시간 차이를 <span class="arithmatex"><span class="MathJax_Preview">\Delta t</span><script type="math/tex">\Delta t</script></span>로 나타낼 수 있으며, 이때 자막의 시작 시간을 다음과 같이 조정할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
t_{\text{subtitles}}' = t_{\text{subtitles}} + \Delta t
</div>
<script type="math/tex; mode=display">
t_{\text{subtitles}}' = t_{\text{subtitles}} + \Delta t
</script>
</div>
<p>이 수식은 자막 파일의 시작 시간을 조정하여 비디오와 동기화하는 과정을 나타낸다.</p>
<h3 id="_44">여러 자막 파일의 병합 수식</h3>
<p>여러 개의 자막 파일을 병합할 때, 각 자막 파일의 시간 정보를 일치시키는 것이 중요하다. 각 자막 파일의 시작 시간과 끝 시간을 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{sub1-start}}, t_{\text{sub1-end}}</span><script type="math/tex">t_{\text{sub1-start}}, t_{\text{sub1-end}}</script></span>로, 두 번째 자막 파일의 시작 시간과 끝 시간을 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{sub2-start}}, t_{\text{sub2-end}}</span><script type="math/tex">t_{\text{sub2-start}}, t_{\text{sub2-end}}</script></span>로 정의할 수 있다. 두 자막 파일을 병합하는 경우, 병합된 자막의 시간 정보는 다음과 같이 나타낼 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
t_{\text{merged}} = \min(t_{\text{sub1-start}}, t_{\text{sub2-start}}) \quad \text{에서} \quad \max(t_{\text{sub1-end}}, t_{\text{sub2-end}})
</div>
<script type="math/tex; mode=display">
t_{\text{merged}} = \min(t_{\text{sub1-start}}, t_{\text{sub2-start}}) \quad \text{에서} \quad \max(t_{\text{sub1-end}}, t_{\text{sub2-end}})
</script>
</div>
<p>이 수식은 두 자막 파일을 병합할 때 자막의 시간 동기화를 어떻게 처리하는지를 나타낸다.</p>
<h3 id="_45">여러 입력 파일의 비디오 및 오디오 동기화</h3>
<p>비디오와 오디오 파일을 병합할 때, 동기화를 맞추는 것은 중요한 과정이다. FFmpeg에서는 각 파일의 시간 정보를 분석하여 비디오와 오디오의 동기화를 조정할 수 있으며, 이는 비디오의 정확한 재생과 오디오의 자연스러운 흐름을 보장한다.</p>
<h4 id="-af-aresample"><code>-af aresample</code> 옵션을 사용한 오디오 시간 조정</h4>
<p>비디오와 오디오의 길이가 다를 경우, 오디오 파일의 샘플링 레이트를 조정하여 동기화할 수 있다. <code>aresample</code> 필터는 오디오의 시간 길이를 조정하거나 샘플링 레이트를 변경하는 데 사용된다.</p>
<p>다음은 비디오 파일의 길이에 맞춰 오디오 파일의 시간을 조정하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -filter_complex &quot;[1:a]aresample=async=1&quot; -c:v copy -c:a aac output.mp4
</code></pre>
<p>이 명령어는 비디오 파일과 오디오 파일을 병합하면서, 오디오 파일의 샘플링 레이트를 비디오 길이에 맞춰 조정한다.</p>
<h4 id="_46">비디오 및 오디오의 샘플링 레이트 변환</h4>
<p>비디오 파일의 프레임 레이트와 오디오 파일의 샘플링 레이트가 일치하지 않을 경우, 비디오 및 오디오의 샘플링 레이트를 변환하여 일치시켜야 한다. FFmpeg에서는 <code>-r</code> 옵션을 사용하여 프레임 레이트를 조정하고, <code>-af aresample</code> 필터를 사용하여 오디오의 샘플링 레이트를 변환할 수 있다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -r 30 -filter_complex &quot;[1:a]aresample=48000&quot; -c:v copy -c:a aac output.mp4
</code></pre>
<p>이 명령어는 비디오 파일의 프레임 레이트를 30fps로 조정하고, 오디오 파일의 샘플링 레이트를 48kHz로 변환하여 동기화한다.</p>
<h3 id="_47">비디오와 오디오의 비율 동기화</h3>
<p>비디오 파일과 오디오 파일의 길이가 다를 때, 비디오와 오디오의 비율을 맞추는 작업이 필요하다. 이를 위해 FFmpeg에서는 비디오와 오디오의 재생 속도를 조정할 수 있는 다양한 옵션을 제공한다. 예를 들어, 비디오 파일이 오디오 파일보다 빠르게 재생되도록 하거나, 반대로 오디오 파일의 속도를 조정하여 비디오와 맞출 수 있다.</p>
<h4 id="-filter_complex-atempo"><code>-filter_complex atempo</code>를 사용한 오디오 속도 조정</h4>
<p>오디오 파일의 속도를 조정하여 비디오 파일과 일치시키려면 <code>atempo</code> 필터를 사용할 수 있다. <code>atempo</code> 필터는 오디오의 재생 속도를 빠르게 또는 느리게 조정하는 역할을 한다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -filter_complex &quot;[1:a]atempo=1.5&quot; -c:v copy -c:a aac output.mp4
</code></pre>
<p>이 명령어는 오디오 파일의 속도를 1.5배 빠르게 조정하여 비디오와 동기화한다.</p>
<h4 id="-filter_complex-setpts"><code>-filter_complex setpts</code>를 사용한 비디오 속도 조정</h4>
<p>비디오 파일의 재생 속도를 조정하려면 <code>setpts</code> 필터를 사용할 수 있다. 이 필터는 비디오 프레임의 시간 정보를 조정하여 재생 속도를 변경하는 역할을 한다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -filter_complex &quot;[0:v]setpts=0.5*PTS&quot; -c:v libx264 -c:a aac output.mp4
</code></pre>
<p>이 명령어는 비디오 파일의 재생 속도를 2배 빠르게 조정하여 오디오와 동기화한다.</p>
<h3 id="_48">수학적 표현: 비디오와 오디오의 시간 및 속도 조정</h3>
<p>비디오와 오디오의 재생 속도를 수학적으로 표현하면, 각 파일의 재생 시간을 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>와 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{audio}}</span><script type="math/tex">t_{\text{audio}}</script></span>로 나타낼 수 있다. 두 파일을 동일한 비율로 재생시키기 위해서는, 비디오 파일의 재생 시간 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{video}}</span><script type="math/tex">t_{\text{video}}</script></span>를 오디오 파일의 재생 시간 <span class="arithmatex"><span class="MathJax_Preview">t_{\text{audio}}</span><script type="math/tex">t_{\text{audio}}</script></span>에 맞춰야 한다. 이를 수식으로 나타내면 다음과 같다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
r_{\text{video}} = \frac{t_{\text{audio}}}{t_{\text{video}}}
</div>
<script type="math/tex; mode=display">
r_{\text{video}} = \frac{t_{\text{audio}}}{t_{\text{video}}}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">r_{\text{video}}</span><script type="math/tex">r_{\text{video}}</script></span>는 비디오의 속도 조정 비율을 의미한다. 마찬가지로, 오디오 파일의 재생 속도를 비디오 파일에 맞추려면 다음과 같은 수식을 사용할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
r_{\text{audio}} = \frac{t_{\text{video}}}{t_{\text{audio}}}
</div>
<script type="math/tex; mode=display">
r_{\text{audio}} = \frac{t_{\text{video}}}{t_{\text{audio}}}
</script>
</div>
<p>이 수식들은 비디오와 오디오의 재생 속도를 맞추기 위해 각각의 속도를 조정할 때 사용된다.</p>
<h3 id="_49">여러 입력 파일의 비디오 및 오디오 비율 조정 예시</h3>
<p>비디오와 오디오 파일을 병합할 때, 두 파일의 길이가 다르면 비율을 맞춰야 한다. 예를 들어, 비디오 파일이 10초이고 오디오 파일이 5초일 때, 오디오 파일의 속도를 2배로 조정하여 비디오와 일치시키는 방법은 다음과 같다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio.mp3 -filter_complex &quot;[1:a]atempo=2.0&quot; -c:v copy -c:a aac output.mp4
</code></pre>
<p>이 명령어는 오디오 파일의 재생 속도를 2배 빠르게 조정하여 비디오 파일과 동일한 길이로 병합한다.</p>
<h3 id="_50">다양한 비디오 및 오디오 트랙의 병합</h3>
<p>하나의 비디오 파일에 여러 개의 오디오 트랙을 병합할 수 있으며, 각 오디오 트랙을 개별적으로 처리하여 다양한 언어 트랙을 포함한 비디오 파일을 만들 수 있다. 다음은 두 개의 오디오 트랙을 비디오 파일에 병합하는 예시이다.</p>
<pre><code class="language-bash">ffmpeg -i video.mp4 -i audio1.mp3 -i audio2.mp3 -map 0:v -map 1:a -map 2:a -c:v copy -c:a aac -shortest output.mp4
</code></pre>
<p>이 명령어는 비디오 파일에 두 개의 오디오 트랙을 병합하여, 다중 오디오 트랙을 지원하는 출력 파일을 생성한다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../A019/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../A019/" class="btn btn-xs btn-link">
        파일 분할
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../A017/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../A017/" class="btn btn-xs btn-link">
        자막 인코딩
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>