<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/sensor_data_processing/_pointcloud/chapter_04/0404_XYZ/">
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>XYZ 파일 형식 - 실험 도서관</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <link href="../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\ud30c\uc77c \uad6c\uc131", url: "#_top", children: [
          ]},
          {title: "\ub370\uc774\ud130 \ud615\uc2dd", url: "#_2", children: [
          ]},
          {title: "\uc0ac\uc6a9 \uc608\uc2dc", url: "#_3", children: [
          ]},
          {title: "XYZ \ud30c\uc77c \ud615\uc2dd\uc758 \uc7a5\uc810", url: "#xyz", children: [
          ]},
          {title: "XYZ \ud30c\uc77c \ud615\uc2dd\uc758 \ub2e8\uc810", url: "#xyz_1", children: [
          ]},
          {title: "XYZ \ud30c\uc77c \ud615\uc2dd\uc758 \uc608\uc2dc", url: "#xyz_2", children: [
          ]},
          {title: "XYZ \ud30c\uc77c\uc758 \uc77d\uae30 \ubc0f \uc4f0\uae30", url: "#xyz_3", children: [
              {title: "XYZ \ud30c\uc77c \uc77d\uae30 \uc608\uc81c", url: "#xyz_4" },
          ]},
          {title: "XYZ \ud30c\uc77c \uc4f0\uae30 \uc608\uc81c", url: "#xyz_5", children: [
          ]},
          {title: "XYZ \ud30c\uc77c\uc744 \uc774\uc6a9\ud55c \uc88c\ud45c \ubcc0\ud658", url: "#xyz_6", children: [
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script>
      <script src="../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    

    <p>XYZ 파일 형식은 포인트클라우드를 가장 단순한 형태로 저장할 수 있는 텍스트 기반의 파일 형식이다. 이 파일 형식은 각 점의 3차원 좌표를 나타내기 위해 X, Y, Z 좌표를 텍스트로 저장한다. 보통 다음과 같은 형태로 포맷이 이루어진다:</p>
<pre><code>X1 Y1 Z1
X2 Y2 Z2
X3 Y3 Z3
...
</code></pre>
<h3 id="_1">파일 구성</h3>
<p>각 줄은 한 개의 점(포인트)를 나타내며, 공백으로 구분된 세 개의 실수 값으로 X, Y, Z 좌표를 표현한다. 여기서 파일의 확장자는 ".xyz"로 설정하며, 이는 포인트의 공간 좌표 정보를 직관적으로 나타낸다.</p>
<p>XYZ 파일은 매우 단순한 구조를 가지므로 사용 및 읽기가 간편한다. 하지만 그만큼 메타데이터(예: 색상, 밀도 정보, 포인트 개수 등)를 포함하지 않으므로, 이러한 정보가 필요할 경우 다른 파일 형식을 사용하는 것이 일반적이다.</p>
<h3 id="_2">데이터 형식</h3>
<p>XYZ 파일에 저장되는 각 좌표는 실수로 표현된다. 이때 좌표는 보통 소수점으로 나타내며, 파일의 크기나 포인트의 수에 따라 소수점 자릿수와 값의 범위는 달라질 수 있다. 각 좌표를 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_i = (x_i, y_i, z_i)</span><script type="math/tex">\mathbf{x}_i = (x_i, y_i, z_i)</script></span>로 표현할 수 있다.</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{x}_i = 
\begin{bmatrix}
x_i \\
y_i \\
z_i \\
\end{bmatrix}
</div>
<script type="math/tex; mode=display">
\mathbf{x}_i = 
\begin{bmatrix}
x_i \\
y_i \\
z_i \\
\end{bmatrix}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">x_i, y_i, z_i</span><script type="math/tex">x_i, y_i, z_i</script></span>는 각각 3차원 공간에서의 좌표값을 나타내며, 포인트 클라우드의 각 점을 정의하는 데 사용된다. <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>는 점의 인덱스이며, XYZ 파일의 각 줄이 개별 포인트를 나타낸다.</p>
<h3 id="_3">사용 예시</h3>
<p>XYZ 파일 형식은 매우 단순한 구조 덕분에 다양한 애플리케이션에서 사용된다. 대표적인 사용 예시는 다음과 같다.</p>
<ol>
<li>
<p><strong>3D 스캐닝 결과 저장</strong><br />
   XYZ 파일은 3D 스캔 장치에서 출력된 데이터를 저장할 때 자주 사용된다. 3D 스캔 결과는 수많은 점들의 집합으로 표현되며, 각 점의 좌표는 XYZ 파일 형식으로 기록된다.</p>
</li>
<li>
<p><strong>포인트클라우드 시각화 도구와의 호환성</strong><br />
   PCL이나 MeshLab 같은 소프트웨어는 XYZ 파일을 불러와 포인트 클라우드를 시각화할 수 있다. XYZ 파일을 읽어들인 후, 소프트웨어는 포인트들의 분포를 그래픽으로 표시하여 사용자가 데이터를 직관적으로 확인할 수 있게 한다.</p>
</li>
<li>
<p><strong>데이터 변환 및 전처리</strong><br />
   XYZ 파일 형식은 다른 복잡한 형식으로 변환하기 전에 임시로 데이터를 저장하거나, 데이터 전처리를 할 때 자주 사용된다. 예를 들어, 정렬이나 필터링 등의 작업을 수행하기 전, 데이터를 XYZ 파일로 변환하여 임시 저장한 후, 후처리 작업에 활용할 수 있다.</p>
</li>
</ol>
<h3 id="xyz">XYZ 파일 형식의 장점</h3>
<ol>
<li>
<p><strong>간단한 구조</strong><br />
   XYZ 파일 형식은 그 자체로 매우 간단한다. 포인트 클라우드의 점들을 X, Y, Z 좌표로 나열하기만 하면 되기 때문에 파일 형식 자체를 이해하고 다루기가 쉽다.</p>
</li>
<li>
<p><strong>텍스트 기반 파일 형식</strong><br />
   XYZ 파일은 텍스트 파일이기 때문에 텍스트 편집기를 이용하여 쉽게 열람하고 편집할 수 있다. 이를 통해 필요한 부분만 직접 수정하거나, 일부 데이터만 분리하여 저장하는 등의 작업을 간편하게 수행할 수 있다.</p>
</li>
</ol>
<h3 id="xyz_1">XYZ 파일 형식의 단점</h3>
<ol>
<li>
<p><strong>메타데이터 부재</strong><br />
   XYZ 파일 형식은 X, Y, Z 좌표만을 기록하기 때문에 포인트의 색상, 밀도, 반사율 등의 메타데이터는 포함되지 않는다. 이런 정보가 필요한 경우에는 PCD(Point Cloud Data) 같은 더 복잡한 파일 형식을 사용하는 것이 일반적이다.</p>
</li>
<li>
<p><strong>비효율적인 데이터 관리</strong><br />
   XYZ 파일 형식은 텍스트 기반이기 때문에 이진(binary) 파일에 비해 파일 크기가 크다. 따라서 대량의 포인트 클라우드를 다룰 때는 용량 효율이 좋지 않으며, 데이터를 읽고 쓰는 속도도 상대적으로 느리다.</p>
</li>
</ol>
<h3 id="xyz_2">XYZ 파일 형식의 예시</h3>
<p>XYZ 파일 형식은 간단하게 포인트 데이터를 저장할 수 있다. 실제 파일 형식의 예시는 다음과 같다:</p>
<pre><code>1.234 5.678 9.012
2.345 6.789 10.123
3.456 7.890 11.234
</code></pre>
<p>이 예시는 세 개의 포인트를 포함하며, 각 줄은 한 포인트의 X, Y, Z 좌표를 의미한다. 이와 같은 형태로 수백만 개의 포인트를 저장할 수 있으며, XYZ 파일은 쉽게 가독성을 유지할 수 있는 형식이다.</p>
<h3 id="xyz_3">XYZ 파일의 읽기 및 쓰기</h3>
<p>XYZ 파일 형식을 다루는 것은 매우 간단한다. 일반적으로 파일의 각 줄에서 X, Y, Z 값을 읽고, 이를 포인트 클라우드 데이터 구조에 저장하는 방식으로 동작한다. PCL(Point Cloud Library)에서는 XYZ 파일을 쉽게 불러오고 저장할 수 있는 함수를 제공한다.</p>
<h4 id="xyz_4">XYZ 파일 읽기 예제</h4>
<p>다음은 PCL 라이브러리를 사용하여 XYZ 파일을 읽어들이는 간단한 C++ 코드이다:</p>
<pre><code class="language-cpp">#include &lt;pcl/io/pcd_io.h&gt;
#include &lt;pcl/point_types.h&gt;

int main(int argc, char** argv)
{
    pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZ&gt;);

    if (pcl::io::loadXYZFile(argv[1], *cloud) == -1)
    {
        PCL_ERROR(&quot;Couldn't read the XYZ file\n&quot;);
        return (-1);
    }
    std::cout &lt;&lt; &quot;Loaded &quot; &lt;&lt; cloud-&gt;width * cloud-&gt;height &lt;&lt; &quot; data points from the XYZ file.&quot; &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<p>위 코드는 XYZ 파일을 불러와 포인트 클라우드를 저장하는 간단한 방법을 보여준다. <code>pcl::PointCloud</code> 클래스는 포인트 데이터를 저장하며, <code>loadXYZFile</code> 함수는 주어진 XYZ 파일을 읽어들이다.</p>
<h3 id="xyz_5">XYZ 파일 쓰기 예제</h3>
<p>XYZ 파일 형식으로 데이터를 저장하는 방법도 마찬가지로 간단한다. 아래는 포인트 클라우드를 XYZ 파일로 저장하는 예시 코드이다:</p>
<pre><code class="language-cpp">#include &lt;pcl/io/xyz_io.h&gt;
#include &lt;pcl/point_types.h&gt;

int main(int argc, char** argv)
{
    pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZ&gt;);
    cloud-&gt;width = 5;
    cloud-&gt;height = 1;
    cloud-&gt;points.resize(cloud-&gt;width * cloud-&gt;height);

    for (size_t i = 0; i &lt; cloud-&gt;points.size(); ++i)
    {
        cloud-&gt;points[i].x = 1024 * rand() / (RAND_MAX + 1.0f);
        cloud-&gt;points[i].y = 1024 * rand() / (RAND_MAX + 1.0f);
        cloud-&gt;points[i].z = 1024 * rand() / (RAND_MAX + 1.0f);
    }

    pcl::io::saveXYZFile(&quot;output.xyz&quot;, *cloud);

    return 0;
}
</code></pre>
<p>이 코드는 간단한 임의 포인트 클라우드를 생성하고, 그것을 XYZ 파일 형식으로 저장한다. 파일은 <code>saveXYZFile</code> 함수를 통해 출력되며, 텍스트 형식으로 각 점이 저장된다.</p>
<h3 id="xyz_6">XYZ 파일을 이용한 좌표 변환</h3>
<p>포인트 클라우드 데이터를 좌표 변환할 때 XYZ 파일 형식은 매우 유용하게 사용될 수 있다. 좌표 변환은 다음과 같은 수식을 이용하여 각 점을 변환할 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{T} \cdot \mathbf{x}_i = \mathbf{x}_i'
</div>
<script type="math/tex; mode=display">
\mathbf{T} \cdot \mathbf{x}_i = \mathbf{x}_i'
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{T}</span><script type="math/tex">\mathbf{T}</script></span>는 4x4 좌표 변환 행렬이며, <span class="arithmatex"><span class="MathJax_Preview">\mathbf{x}_i'</span><script type="math/tex">\mathbf{x}_i'</script></span>는 변환된 좌표를 나타낸다. 변환된 점은 다시 XYZ 파일 형식으로 저장될 수 있다. 변환 행렬 <span class="arithmatex"><span class="MathJax_Preview">\mathbf{T}</span><script type="math/tex">\mathbf{T}</script></span>는 회전, 평행 이동을 포함하여 다음과 같이 정의된다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{T} = 
\begin{bmatrix}
r_{11} &amp; r_{12} &amp; r_{13} &amp; t_x \\
r_{21} &amp; r_{22} &amp; r_{23} &amp; t_y \\
r_{31} &amp; r_{32} &amp; r_{33} &amp; t_z \\
0 &amp; 0 &amp; 0 &amp; 1 \\
\end{bmatrix}
</div>
<script type="math/tex; mode=display">
\mathbf{T} = 
\begin{bmatrix}
r_{11} & r_{12} & r_{13} & t_x \\
r_{21} & r_{22} & r_{23} & t_y \\
r_{31} & r_{32} & r_{33} & t_z \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">r_{ij}</span><script type="math/tex">r_{ij}</script></span>는 회전 행렬의 요소이며, <span class="arithmatex"><span class="MathJax_Preview">t_x, t_y, t_z</span><script type="math/tex">t_x, t_y, t_z</script></span>는 평행 이동 요소이다. 변환 후에도 각 포인트는 XYZ 형식으로 다시 기록될 수 있다.</p>

  <br>
    

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>