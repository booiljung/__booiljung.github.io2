<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/sensor_data_processing/pointcloud/introduction_to_pointcloud/chapter_03/0312_PointXYZRGBNormal/">
    <link rel="shortcut icon" href="../../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>PCL의 PointXYZRGBNormal 구조 - 실험 도서관</title>
    <link href="../../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../css/highlight.css">
    <link href="../../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "PointXYZRGBNormal \uac1c\uc694", url: "#_top", children: [
          ]},
          {title: "\uad6c\uc870 \uc815\uc758", url: "#_1", children: [
          ]},
          {title: "PointXYZRGBNormal \uad6c\uc870\uc758 \uc0ac\uc6a9 \uc608\uc2dc", url: "#pointxyzrgbnormal_1", children: [
              {title: "\ud3ec\uc778\ud2b8 \ud074\ub77c\uc6b0\ub4dc \ub370\uc774\ud130 \uc0dd\uc131", url: "#_2" },
              {title: "\ud3ec\uc778\ud2b8 \ud074\ub77c\uc6b0\ub4dc\uc758 \uc2dc\uac01\ud654", url: "#_3" },
              {title: "Normal \ubca1\ud130\uc640 \uace1\ub960 \uc815\ubcf4", url: "#normal" },
          ]},
        ];

    </script>
    <script src="../../../../../js/base.js"></script>
      <script src="../../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0313_PointXYZINormal/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0313_PointXYZINormal/" class="btn btn-xs btn-link">
        PCL의 PointXYZINormal 구조
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0311_PointXYZL/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0311_PointXYZL/" class="btn btn-xs btn-link">
        PCL의 PointXYZL 구조
      </a>
    </div>
    
  </div>

    

    <h2 id="pointxyzrgbnormal">PointXYZRGBNormal 개요</h2>
<p><code>PointXYZRGBNormal</code>은 PCL에서 널리 사용되는 데이터 구조로, 각각의 포인트가 다음과 같은 정보를 포함한다:
- <span class="arithmatex"><span class="MathJax_Preview">x, y, z</span><script type="math/tex">x, y, z</script></span> 좌표: 포인트의 공간적 위치를 나타낸다.
- RGB 색상 정보: 각 포인트에 대한 색상 정보를 포함한다.
- Normal 벡터: 포인트가 위치한 표면의 법선(normal) 방향을 나타낸다.</p>
<p>이 구조는 3D 모델에서 포인트의 위치와 더불어 색상 및 표면 기하 정보를 동시에 담을 수 있어, 시각화 및 객체 인식과 같은 다양한 작업에 적합한다.</p>
<h2 id="_1">구조 정의</h2>
<p>PointXYZRGBNormal 구조는 다음과 같은 구성 요소로 정의된다:</p>
<ol>
<li><strong>포인트의 좌표</strong><br />
포인트의 공간적 위치는 3D 공간에서의 좌표인 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span>, <span class="arithmatex"><span class="MathJax_Preview">y</span><script type="math/tex">y</script></span>, <span class="arithmatex"><span class="MathJax_Preview">z</span><script type="math/tex">z</script></span>로 정의된다. 이 좌표는 3차원 좌표계의 기준에 따라 설정되며, 이를 벡터로 나타내면:</li>
</ol>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{p} = \begin{bmatrix} x \\ y \\ z \end{bmatrix}
</div>
<script type="math/tex; mode=display">
\mathbf{p} = \begin{bmatrix} x \\ y \\ z \end{bmatrix}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span>, <span class="arithmatex"><span class="MathJax_Preview">y</span><script type="math/tex">y</script></span>, <span class="arithmatex"><span class="MathJax_Preview">z</span><script type="math/tex">z</script></span>는 포인트의 공간적 위치를 나타낸다.</p>
<ol>
<li><strong>RGB 색상</strong><br />
포인트의 색상은 RGB 컬러 모델을 사용하여 표현된다. 각 포인트는 8비트로 표현되는 <span class="arithmatex"><span class="MathJax_Preview">R</span><script type="math/tex">R</script></span>, <span class="arithmatex"><span class="MathJax_Preview">G</span><script type="math/tex">G</script></span>, <span class="arithmatex"><span class="MathJax_Preview">B</span><script type="math/tex">B</script></span> 값을 포함하며, 각각 빨강, 초록, 파랑 색상 채널을 나타낸다. 색상 정보는 일반적으로 하나의 정수 값으로 저장되며, 각 색상 채널은 아래와 같은 비트 연산으로 분리할 수 있다.</li>
</ol>
<div class="arithmatex">
<div class="MathJax_Preview">
\text{Color} = (R &lt;&lt; 16) | (G &lt;&lt; 8) | B
</div>
<script type="math/tex; mode=display">
\text{Color} = (R << 16) | (G << 8) | B
</script>
</div>
<p>각각의 채널 값을 추출하려면 다음과 같은 연산을 통해 가능한다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
R = (\text{Color} &gt;&gt; 16) \&amp; 0xFF
</div>
<script type="math/tex; mode=display">
R = (\text{Color} >> 16) \& 0xFF
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
G = (\text{Color} &gt;&gt; 8) \&amp; 0xFF
</div>
<script type="math/tex; mode=display">
G = (\text{Color} >> 8) \& 0xFF
</script>
</div>
<div class="arithmatex">
<div class="MathJax_Preview">
B = \text{Color} \&amp; 0xFF
</div>
<script type="math/tex; mode=display">
B = \text{Color} \& 0xFF
</script>
</div>
<ol>
<li><strong>Normal 벡터</strong><br />
Normal 벡터는 표면의 법선을 나타내는 3D 벡터이다. 법선은 포인트가 위치한 표면이 어떤 방향을 향하고 있는지에 대한 정보를 제공한다. Normal 벡터는 <span class="arithmatex"><span class="MathJax_Preview">n_x</span><script type="math/tex">n_x</script></span>, <span class="arithmatex"><span class="MathJax_Preview">n_y</span><script type="math/tex">n_y</script></span>, <span class="arithmatex"><span class="MathJax_Preview">n_z</span><script type="math/tex">n_z</script></span>로 구성되며, 이를 벡터로 표현하면:</li>
</ol>
<div class="arithmatex">
<div class="MathJax_Preview">
\mathbf{n} = \begin{bmatrix} n_x \\ n_y \\ n_z \end{bmatrix}
</div>
<script type="math/tex; mode=display">
\mathbf{n} = \begin{bmatrix} n_x \\ n_y \\ n_z \end{bmatrix}
</script>
</div>
<p>법선 벡터는 정규화된 상태로, 즉 크기가 1인 단위 벡터로 유지되어야 한다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\sqrt{n_x^2 + n_y^2 + n_z^2} = 1
</div>
<script type="math/tex; mode=display">
\sqrt{n_x^2 + n_y^2 + n_z^2} = 1
</script>
</div>
<p>이 법선 벡터는 포인트 클라우드에서 표면의 곡률 계산 및 객체 인식에 중요한 정보를 제공한다.</p>
<h2 id="pointxyzrgbnormal_1">PointXYZRGBNormal 구조의 사용 예시</h2>
<p>PCL 라이브러리에서 <code>PointXYZRGBNormal</code> 구조는 포인트 클라우드 데이터를 처리하는데 매우 유용하다. 다양한 작업에서 이 구조를 활용하여 포인트 클라우드를 처리할 수 있으며, 특히 시각화, 객체 인식, 그리고 표면의 기하학적 특성 분석에 자주 사용된다. 이를 실질적으로 어떻게 사용하는지에 대한 기본 예시를 살펴보자.</p>
<h3 id="_2">포인트 클라우드 데이터 생성</h3>
<p>다음은 <code>PointXYZRGBNormal</code>을 사용하여 포인트 클라우드 데이터를 생성하는 간단한 예이다.</p>
<pre><code class="language-cpp">#include &lt;pcl/point_types.h&gt;
#include &lt;pcl/point_cloud.h&gt;

int main() {
  // 포인트 클라우드 객체 생성
  pcl::PointCloud&lt;pcl::PointXYZRGBNormal&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZRGBNormal&gt;);

  // 임의의 포인트 데이터 추가
  pcl::PointXYZRGBNormal point;
  point.x = 1.0f;
  point.y = 2.0f;
  point.z = 3.0f;

  // RGB 값을 설정
  point.r = 255;
  point.g = 0;
  point.b = 0;

  // Normal 벡터 값 설정
  point.normal_x = 0.0f;
  point.normal_y = 1.0f;
  point.normal_z = 0.0f;

  // 포인트를 클라우드에 추가
  cloud-&gt;points.push_back(point);

  return 0;
}
</code></pre>
<p>이 예제는 다음과 같은 절차로 동작한다:</p>
<ol>
<li><strong>포인트 클라우드 객체 생성</strong>: <code>PointXYZRGBNormal</code> 타입을 사용하는 포인트 클라우드 객체를 생성한다.</li>
<li><strong>포인트 정의</strong>: 포인트의 위치 좌표 <span class="arithmatex"><span class="MathJax_Preview">(x, y, z)</span><script type="math/tex">(x, y, z)</script></span>, 색상 <span class="arithmatex"><span class="MathJax_Preview">RGB</span><script type="math/tex">RGB</script></span>, 그리고 법선 벡터 <span class="arithmatex"><span class="MathJax_Preview">(n_x, n_y, n_z)</span><script type="math/tex">(n_x, n_y, n_z)</script></span> 값을 정의한다.</li>
<li><strong>포인트 추가</strong>: 생성된 포인트를 포인트 클라우드에 추가한다.</li>
</ol>
<h3 id="_3">포인트 클라우드의 시각화</h3>
<p>PCL 라이브러리를 사용하면 포인트 클라우드를 시각화할 수 있는 다양한 도구가 제공된다. 특히 <code>PointXYZRGBNormal</code> 구조는 각 포인트의 색상과 법선을 표현할 수 있기 때문에 매우 직관적인 시각화가 가능한다. 시각화를 위해 PCL의 <code>pcl::visualization</code> 모듈을 활용할 수 있다.</p>
<p>다음은 포인트 클라우드를 시각화하는 예시이다:</p>
<pre><code class="language-cpp">#include &lt;pcl/visualization/cloud_viewer.h&gt;

int main() {
  // 포인트 클라우드 생성
  pcl::PointCloud&lt;pcl::PointXYZRGBNormal&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZRGBNormal&gt;);

  // 포인트 클라우드에 데이터 추가 (생략)

  // 시각화 객체 생성
  pcl::visualization::CloudViewer viewer(&quot;PCL Viewer&quot;);

  // 포인트 클라우드 시각화
  viewer.showCloud(cloud);

  // 창이 닫힐 때까지 대기
  while (!viewer.wasStopped()) {
  }

  return 0;
}
</code></pre>
<h3 id="normal">Normal 벡터와 곡률 정보</h3>
<p><code>PointXYZRGBNormal</code> 구조에서 제공하는 Normal 벡터는 각 포인트가 위치한 표면의 방향을 나타낸다. 이는 객체 인식 및 표면 분석에서 매우 중요한 역할을 한다. PCL에서는 <code>Normal</code> 벡터를 기반으로 곡률(curvature)을 계산할 수도 있다. 곡률은 포인트 클라우드 상에서 표면의 기하학적 성질을 분석하는 데 매우 유용한 정보이다.</p>
<p>곡률은 다음과 같은 공식을 통해 계산할 수 있다:</p>
<div class="arithmatex">
<div class="MathJax_Preview">
\text{Curvature} = \frac{\lambda_{\text{min}}}{\lambda_1 + \lambda_2 + \lambda_3}
</div>
<script type="math/tex; mode=display">
\text{Curvature} = \frac{\lambda_{\text{min}}}{\lambda_1 + \lambda_2 + \lambda_3}
</script>
</div>
<p>여기서 <span class="arithmatex"><span class="MathJax_Preview">\lambda_{\text{min}}</span><script type="math/tex">\lambda_{\text{min}}</script></span>은 주어진 포인트 주변의 코베리언스 행렬의 가장 작은 고유값을 나타내며, <span class="arithmatex"><span class="MathJax_Preview">\lambda_1, \lambda_2, \lambda_3</span><script type="math/tex">\lambda_1, \lambda_2, \lambda_3</script></span>는 나머지 고유값들이다. 곡률 값이 클수록 해당 포인트는 곡면의 일부분을 나타낸다.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../0313_PointXYZINormal/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../0313_PointXYZINormal/" class="btn btn-xs btn-link">
        PCL의 PointXYZINormal 구조
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../0311_PointXYZL/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../0311_PointXYZL/" class="btn btn-xs btn-link">
        PCL의 PointXYZL 구조
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>