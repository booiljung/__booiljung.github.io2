<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://booiljung.github.io/programming/cplusplus/cmake/chapter_01/003/">
    <link rel="shortcut icon" href="../../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>CMake의 기본 개념 (Fundamentals of CMake) - 소프트웨어 융합</title>
    <link href="../../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../css/highlight.css">
    <link href="../../../../../css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "CMake\ub780 \ubb34\uc5c7\uc778\uac00?", url: "#_top", children: [
          ]},
          {title: "CMake\uc758 \uad6c\uc131 \uc694\uc18c", url: "#cmake_1", children: [
          ]},
          {title: "CMake\uc758 \uc791\ub3d9 \ubc29\uc2dd", url: "#cmake_2", children: [
          ]},
          {title: "CMake\uc758 \uc8fc\uc694 \uba85\ub839\uc5b4", url: "#cmake_3", children: [
          ]},
          {title: "CMake\uc758 \ubcc0\uc218\uc640 \uc124\uc815", url: "#cmake_4", children: [
          ]},
          {title: "CMake\uc758 \uace0\uae09 \uae30\ub2a5", url: "#cmake_5", children: [
          ]},
          {title: "CMake\uc758 \ud655\uc7a5\uc131\uacfc \ubaa8\ub4c8\ud654", url: "#cmake_6", children: [
          ]},
        ];

    </script>
    <script src="../../../../../js/base.js"></script>
      <script src="../../../../../js/google_analytics.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-3F4LHCTF88"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../004/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../004/" class="btn btn-xs btn-link">
        CMake 설치 및 설정 방법
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../002/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../002/" class="btn btn-xs btn-link">
        CMake의 역사와 목적
      </a>
    </div>
    
  </div>

    

    <h3 id="cmake">CMake란 무엇인가?</h3>
<p>CMake는 크로스 플랫폼 빌드 시스템을 생성하기 위한 도구이다. 소프트웨어 프로젝트의 컴파일, 링크 및 배포를 자동화하는 데 사용된다. CMake는 Makefile, Ninja 파일, Visual Studio 솔루션 파일 등을 생성하여, 다양한 환경에서 일관된 빌드 프로세스를 가능하게 한다. 이는 특히 대규모 프로젝트나 멀티플랫폼 환경에서 유용하다.</p>
<h3 id="cmake_1">CMake의 구성 요소</h3>
<p>CMake는 여러 구성 요소로 이루어져 있으며, 이들은 프로젝트의 빌드 프로세스를 정의하고 제어하는 역할을 한다.</p>
<ul>
<li>
<p><strong>CMakeLists.txt</strong>: CMakeLists.txt 파일은 CMake 프로젝트의 핵심 구성 파일이다. 이 파일에는 프로젝트 설정, 소스 파일 목록, 타겟 정의, 빌드 옵션 등이 포함된다. 이 파일은 각 디렉토리에 존재할 수 있으며, 계층 구조를 통해 서브 프로젝트를 관리할 수 있다.</p>
</li>
<li>
<p><strong>Commands (명령어)</strong>: CMake는 다양한 명령어를 제공하며, 이를 통해 빌드 설정을 구체적으로 지정할 수 있다. 주요 명령어로는 <code>project()</code>, <code>add_executable()</code>, <code>add_library()</code>, <code>target_link_libraries()</code>, <code>find_package()</code> 등이 있다.</p>
</li>
<li>
<p><strong>Variables (변수)</strong>: CMake에서 변수는 설정을 저장하고 빌드 프로세스 전반에서 이를 참조하는 데 사용된다. 예를 들어, <code>CMAKE_CXX_COMPILER</code>는 사용할 C++ 컴파일러를 지정하는 변수이다. 변수는 <code>set()</code> 명령어를 통해 정의되며, 필요 시 <code>option()</code>을 사용해 사용자에게 값을 입력받을 수도 있다.</p>
</li>
<li>
<p><strong>Targets (타겟)</strong>: 타겟은 CMake에서 빌드할 엔티티를 의미한다. 예를 들어, 실행 파일, 라이브러리 등이 타겟이 될 수 있다. 타겟은 <code>add_executable()</code>이나 <code>add_library()</code> 명령어로 정의되며, 이후 <code>target_link_libraries()</code>, <code>target_include_directories()</code> 등을 통해 종속성 및 설정을 추가할 수 있다.</p>
</li>
</ul>
<h3 id="cmake_2">CMake의 작동 방식</h3>
<p>CMake는 기본적으로 두 단계로 작동한다. 첫 번째 단계는 '생성' 단계이며, 두 번째 단계는 '빌드' 단계이다.</p>
<ul>
<li>
<p><strong>생성 단계 (Generation Stage)</strong>: 이 단계에서는 CMake가 프로젝트의 <code>CMakeLists.txt</code> 파일을 읽고, 사용자가 지정한 빌드 시스템 파일(예: Makefile, Visual Studio 솔루션 파일)을 생성한다. <code>cmake</code> 명령어를 실행하면 이 단계가 시작된다. 이 단계에서 CMake는 설정된 변수 값, 타겟 및 종속성, 기타 설정을 종합하여 빌드 시스템을 설정한다.</p>
</li>
<li>
<p><strong>빌드 단계 (Build Stage)</strong>: 빌드 시스템이 생성된 후, 사용자는 해당 빌드 시스템의 명령어(예: <code>make</code>, <code>ninja</code>, <code>msbuild</code>)를 사용해 실제 컴파일을 수행한다. 이 단계에서는 CMake가 직접 관여하지 않으며, 빌드 시스템에 의해 관리된다.</p>
</li>
</ul>
<h3 id="cmake_3">CMake의 주요 명령어</h3>
<p>CMake에는 프로젝트를 구성하고 관리하는 데 필수적인 여러 명령어가 있다.</p>
<ul>
<li>
<p><strong>project()</strong>: <code>project()</code> 명령어는 CMake 프로젝트의 이름과 언어를 정의한다. 예를 들어, <code>project(MyProject CXX)</code>는 MyProject라는 이름의 C++ 프로젝트를 정의한다.</p>
</li>
<li>
<p><strong>add_executable()</strong>: <code>add_executable()</code> 명령어는 실행 파일 타겟을 정의한다. 예를 들어, <code>add_executable(MyApp main.cpp)</code>는 MyApp이라는 이름의 실행 파일을 생성하며, 이를 위해 main.cpp 파일을 컴파일한다.</p>
</li>
<li>
<p><strong>add_library()</strong>: <code>add_library()</code> 명령어는 정적 또는 동적 라이브러리 타겟을 정의한다. 예를 들어, <code>add_library(MyLib STATIC lib.cpp)</code>는 MyLib라는 이름의 정적 라이브러리를 생성하며, 이를 위해 lib.cpp 파일을 컴파일한다.</p>
</li>
<li>
<p><strong>target_link_libraries()</strong>: <code>target_link_libraries()</code> 명령어는 타겟에 대해 링크할 라이브러리를 지정한다. 예를 들어, <code>target_link_libraries(MyApp MyLib)</code>는 MyApp 실행 파일에 MyLib 라이브러리를 링크한다.</p>
</li>
<li>
<p><strong>find_package()</strong>: <code>find_package()</code> 명령어는 외부 패키지를 검색하고, 이를 프로젝트에 포함시킨다. 예를 들어, <code>find_package(Boost REQUIRED)</code>는 Boost 라이브러리를 검색하고, 이를 프로젝트에 포함한다.</p>
</li>
</ul>
<h3 id="cmake_4">CMake의 변수와 설정</h3>
<p>CMake에서는 다양한 변수와 설정을 통해 빌드 프로세스를 제어할 수 있다. 이러한 변수들은 전역적으로 사용되거나 특정 타겟에만 적용될 수 있다.</p>
<ul>
<li>
<p><strong>CMAKE_CXX_COMPILER</strong>: C++ 컴파일러를 지정하는 변수이다. 예를 들어, <code>set(CMAKE_CXX_COMPILER /usr/bin/g++)</code>는 G++ 컴파일러를 사용하도록 설정한다.</p>
</li>
<li>
<p><strong>CMAKE_BUILD_TYPE</strong>: 빌드 타입을 지정하는 변수로, <code>Debug</code>, <code>Release</code>, <code>MinSizeRel</code>, <code>RelWithDebInfo</code>와 같은 값이 올 수 있다. 예를 들어, <code>set(CMAKE_BUILD_TYPE Release)</code>는 릴리즈 빌드를 수행하도록 설정한다.</p>
</li>
<li>
<p><strong>CMAKE_CXX_FLAGS</strong>: C++ 컴파일러에 전달할 추가 플래그를 지정하는 변수이다. 예를 들어, <code>set(CMAKE_CXX_FLAGS "-Wall -O2")</code>는 모든 경고를 출력하고 최적화 수준 2를 사용하도록 설정한다.</p>
</li>
</ul>
<h3 id="cmake_5">CMake의 고급 기능</h3>
<p>CMake는 대규모 프로젝트나 복잡한 빌드 요구사항을 지원하기 위해 다양한 고급 기능을 제공한다.</p>
<ul>
<li>
<p><strong>ExternalProject</strong>: <code>ExternalProject</code> 모듈은 외부 프로젝트를 빌드하고 이를 포함할 수 있도록 한다. 이는 예를 들어, 서드파티 라이브러리를 소스 코드부터 빌드하여 포함해야 할 때 유용하다.</p>
</li>
<li>
<p><strong>CTest</strong>: CTest는 CMake와 통합된 테스트 도구이다. 이를 통해 자동화된 테스트를 설정하고 실행할 수 있다. <code>enable_testing()</code>과 <code>add_test()</code> 명령어를 통해 테스트를 정의할 수 있다.</p>
</li>
<li>
<p><strong>CPack</strong>: CPack은 CMake 프로젝트의 패키징을 자동화하는 도구이다. 이를 통해 다양한 포맷(RPM, DEB, ZIP 등)으로 패키지를 생성할 수 있다.</p>
</li>
</ul>
<h3 id="cmake_6">CMake의 확장성과 모듈화</h3>
<p>CMake는 모듈화된 구조를 가지고 있으며, 이는 사용자가 정의한 기능을 추가하거나 CMake의 기본 기능을 확장하는 데 유용하다.</p>
<ul>
<li>
<p><strong>Custom Modules</strong>: 사용자는 CMake 모듈을 정의하여, 프로젝트 내에서 반복적으로 사용되는 설정이나 명령어를 관리할 수 있다. 이는 <code>CMakeLists.txt</code> 파일을 간소화하고 유지보수를 용이하게 한다.</p>
</li>
<li>
<p><strong>Function 및 Macro</strong>: <code>function()</code>과 <code>macro()</code> 명령어는 사용자 정의 함수와 매크로를 생성할 수 있도록 한다. 이는 복잡한 설정을 단순화하고, 코드 재사용성을 높인다.</p>
</li>
</ul>
<hr />
<p>관련 자료:
- CMake 공식 문서: https://cmake.org/cmake/help/latest/
- Modern CMake 소개: https://cliutils.gitlab.io/modern-cmake/
- Professional CMake: A Practical Guide by Craig Scott</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../004/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../004/" class="btn btn-xs btn-link">
        CMake 설치 및 설정 방법
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../002/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../002/" class="btn btn-xs btn-link">
        CMake의 역사와 목적
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>